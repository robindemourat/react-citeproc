!function(t){function e(s){if(i[s])return i[s].exports;var r=i[s]={exports:{},id:s,loaded:!1};return t[s].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};e.m=t,e.c=i,e.p="/build/",e(0)}([function(t,e,i){t.exports=i(38)},function(t,e,i){var s=i(3),r=i(8);t.exports=function(t){return function e(i,n){switch(arguments.length){case 0:return e;case 1:return r(i)?e:s(function(e){return t(i,e)});default:return r(i)&&r(n)?e:r(i)?s(function(e){return t(e,n)}):r(n)?s(function(e){return t(i,e)}):t(i,n)}}}},function(t,e,i){"use strict";var s=function(t){};t.exports=function(t,e,i,r,n,a,o,l){if(s(e),!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[i,r,n,a,o,l],h=0;(u=new Error(e.replace(/%s/g,function(){return p[h++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,i){var s=i(8);t.exports=function(t){return function e(i){return 0===arguments.length||s(i)?e:t.apply(this,arguments)}}},function(t,e,i){"use strict";function s(t){return void 0!==t.ref}function r(t){return void 0!==t.key}var n=i(7),a=i(32),o=(i(6),i(35),Object.prototype.hasOwnProperty),l=i(33),u={key:!0,ref:!0,__self:!0,__source:!0},p=function(t,e,i,s,r,n,a){var o={$$typeof:l,type:t,key:e,ref:i,props:a,_owner:n};return o};p.createElement=function(t,e,i){var n,l={},h=null,c=null;if(null!=e){s(e)&&(c=e.ref),r(e)&&(h=""+e.key),void 0===e.__self?null:e.__self,void 0===e.__source?null:e.__source;for(n in e)o.call(e,n)&&!u.hasOwnProperty(n)&&(l[n]=e[n])}var f=arguments.length-2;if(1===f)l.children=i;else if(f>1){for(var m=Array(f),d=0;d<f;d++)m[d]=arguments[d+2];l.children=m}if(t&&t.defaultProps){var g=t.defaultProps;for(n in g)void 0===l[n]&&(l[n]=g[n])}return p(t,h,c,0,0,a.current,l)},p.createFactory=function(t){var e=p.createElement.bind(null,t);return e.type=t,e},p.cloneAndReplaceKey=function(t,e){return p(t.type,e,t.ref,t._self,t._source,t._owner,t.props)},p.cloneElement=function(t,e,i){var l,h=n({},t.props),c=t.key,f=t.ref,m=(t._self,t._source,t._owner);if(null!=e){s(e)&&(f=e.ref,m=a.current),r(e)&&(c=""+e.key);var d;t.type&&t.type.defaultProps&&(d=t.type.defaultProps);for(l in e)o.call(e,l)&&!u.hasOwnProperty(l)&&(void 0===e[l]&&void 0!==d?h[l]=d[l]:h[l]=e[l])}var g=arguments.length-2;if(1===g)h.children=i;else if(g>1){for(var b=Array(g),_=0;_<g;_++)b[_]=arguments[_+2];h.children=b}return p(t.type,c,f,0,0,m,h)},p.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===l},t.exports=p},function(t,e){"use strict";function i(t){return function(){return t}}var s=function(){};s.thatReturns=i,s.thatReturnsFalse=i(!1),s.thatReturnsTrue=i(!0),s.thatReturnsNull=i(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(t){return t},t.exports=s},function(t,e,i){"use strict";var s=i(5);t.exports=s},function(t,e){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(t){s[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var a,o,l=i(t),u=1;u<arguments.length;u++){a=Object(arguments[u]);for(var p in a)r.call(a,p)&&(l[p]=a[p]);if(s){o=s(a);for(var h=0;h<o.length;h++)n.call(a,o[h])&&(l[o[h]]=a[o[h]])}}return l}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}},function(t,e){"use strict";t.exports=function(t){for(var e=arguments.length-1,i="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,s=0;s<e;s++)i+="&args[]="+encodeURIComponent(arguments[s+1]);i+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var r=new Error(i);throw r.name="Invariant Violation",r.framesToPop=1,r}},function(t,e){t.exports=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,i){return e.apply(this,arguments)};case 3:return function(t,i,s){return e.apply(this,arguments)};case 4:return function(t,i,s,r){return e.apply(this,arguments)};case 5:return function(t,i,s,r,n){return e.apply(this,arguments)};case 6:return function(t,i,s,r,n,a){return e.apply(this,arguments)};case 7:return function(t,i,s,r,n,a,o){return e.apply(this,arguments)};case 8:return function(t,i,s,r,n,a,o,l){return e.apply(this,arguments)};case 9:return function(t,i,s,r,n,a,o,l,u){return e.apply(this,arguments)};case 10:return function(t,i,s,r,n,a,o,l,u,p){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(t,e,i){var s=i(29),r=i(76);t.exports=function(t,e,i){return function(){if(0===arguments.length)return i();var n=Array.prototype.slice.call(arguments,0),a=n.pop();if(!s(a)){for(var o=0;o<t.length;){if("function"==typeof a[t[o]])return a[t[o]].apply(a,n);o+=1}if(r(a))return e.apply(null,n)(a)}return i.apply(this,arguments)}}},function(t,e){t.exports=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)}},function(t,e,i){var s=i(73),r=i(82),n=i(64);t.exports=function(){function t(t,e,i){for(var s=0,r=i.length;s<r;){if((e=t["@@transducer/step"](e,i[s]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}s+=1}return t["@@transducer/result"](e)}function e(t,e,i){for(var s=i.next();!s.done;){if((e=t["@@transducer/step"](e,s.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}s=i.next()}return t["@@transducer/result"](e)}function i(t,e,i,s){return t["@@transducer/result"](i[s](n(t["@@transducer/step"],t),e))}var a="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(n,o,l){if("function"==typeof n&&(n=r(n)),s(l))return t(n,o,l);if("function"==typeof l["fantasy-land/reduce"])return i(n,o,l,"fantasy-land/reduce");if(null!=l[a])return e(n,o,l[a]());if("function"==typeof l.next)return e(n,o,l);if("function"==typeof l.reduce)return i(n,o,l,"reduce");throw new TypeError("reduce: list must be array or iterable")}}()},function(t,e){t.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}}},function(t,e,i){"use strict";t.exports=i(89)},function(t,e){t.exports=function(t){return null==t?"":""+t}},function(t,e){t.exports=function(t,e){for(var i=0;i<t.length;i++)e(i,t[i])}},function(t,e,s){(function(t){var s={PROCESSOR_VERSION:"1.1.169",CONDITION_LEVEL_TOP:1,CONDITION_LEVEL_BOTTOM:2,PLAIN_HYPHEN_REGEX:/(?:[^\\]-|\u2013)/,LOCATOR_LABELS_REGEXP:new RegExp("^((art|ch|subch|col|fig|l|n|no|op|p|pp|para|subpara|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_GROUPED_REGEX:/((?:^| )(?:art|bk|ch|subch|col|fig|fol|l|n|no|op|p|pp|para|subpara|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\. *)/g,STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:art|bk|ch|subch|col|fig|fol|l|n|no|op|p|pp|para|subpara|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"art.":"article","bk.":"book","ch.":"chapter","subch.":"subchapter","p.":"page","pp.":"page","para.":"paragraph","subpara.":"subparagraph","pt.":"part","r.":"rule","sec.":"section","subsec.":"subsection","sch.":"schedule","tit.":"title","col.":"column","fig.":"figure","fol.":"folio","l.":"line","n.":"note","no.":"issue","op.":"opus","sv.":"sub-verbo","vrs.":"verse","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{article:"art.",book:"bk.",chapter:"ch.",subchapter:"subch.",page:"p.",paragraph:"para.",subparagraph:"subpara.",part:"pt.",rule:"r.",section:"sec.",subsection:"subsec.",schedule:"sch.",title:"tit.",column:"col.",figure:"fig.",folio:"fol.",line:"l.",note:"n.",issue:"no.",opus:"op.","sub-verbo":"sv.","sub verbo":"sv.",verse:"vrs.",volume:"vol."},LOCATOR_LABELS_MAP:{art:"article",bk:"book",ch:"chapter",subch:"subchapter",col:"column",fig:"figure",fol:"folio",l:"line",n:"note",no:"issue",op:"opus",p:"page",pp:"page",para:"paragraph",subpara:"subparagraph",pt:"part",r:"rule",sec:"section",subsec:"subsection",sv:"sub-verbo",sch:"schedule",tit:"title",vrs:"verse",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0},NestedBraces:[["(","["],[")","]"]],checkNestedBrace:function(t){"note"===t.opt.xclass?(this.depth=0,this.update=function(t){for(var e=(t=t||"").split(/([\(\)])/),i=1,s=e.length;i<s;i+=2)"("===e[i]?(1==this.depth%2&&(e[i]="["),this.depth+=1):")"===e[i]&&(0==this.depth%2&&(e[i]="]"),this.depth-=1);return e.join("")}):this.update=function(t){return t}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"journals",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"number",edition:"number",issue:"number",volume:"number"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",number:"number",place:"place",archive:"collection-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(t){if(this.opt.development_extensions.locator_date_and_revision&&t.locator){t.locator=""+t.locator;var e=t.locator.indexOf("|");if(e>-1){var i=t.locator;t.locator=i.slice(0,e),i=i.slice(e+1),m=i.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/),m&&(t["locator-date"]=this.fun.dateparser.parseDateToObject(m[1]),i=i.slice(m[1].length)),t["locator-extra"]=i.replace(/^\s+/,"").replace(/\s+$/,"")}}return t.locator&&(t.locator=(""+t.locator).replace(/\s+$/,"")),t},normalizeLocaleStr:function(t){if(t){var e=t.split("-");return e[0]=e[0].toLowerCase(),e[1]&&(e[1]=e[1].toUpperCase()),e.join("-")}},parseNoteFieldHacks:function(t,e,i){if("string"==typeof t.note){for(var r=[],n=t.note.split("\n"),a=0,o=n.length;a<o;a++){var r=[],l=(m=n[a]).match(s.NOTE_FIELDS_REGEXP);if(l){for(var u=m.split(s.NOTE_FIELDS_REGEXP),p=0,h=u.length-1;p<h;p++)r.push(u[p]),r.push(l[p]);r.push(u[u.length-1]);for(var p=1,h=r.length;p<h&&(!r[p-1].trim()||!(a>0||p>1)||r[p-1].match(s.NOTE_FIELD_REGEXP));p+=2)r[p]="\n"+r[p].slice(2,-1).trim()+"\n";n[a]=r.join("")}}for(var c=0,f={},a=0,o=(n=n.join("\n").split("\n")).length;a<o;a++){var m=n[a],d=m.match(s.NOTE_FIELD_REGEXP);if(m.trim()){if(!d){if(0===a)continue;c=a;break}var g=d[1],b=d[2].replace(/^\s+/,"").replace(/\s+$/,"");if("type"===g)t.type=b,n[a]="";else if(s.DATE_VARIABLES.indexOf(g)>-1)i&&(t[g]={raw:b},(!e||e[g]&&b.match(/^[0-9]{4}(?:-[0-9]{1,2}(?:-[0-9]{1,2})*)*$/))&&(n[a]=""));else if(!t[g]){if(s.NAME_VARIABLES.indexOf(g)>-1){f[g]||(f[g]=[]);var _=b.split(/\s*\|\|\s*/);if(1===_.length)f[g].push({literal:_[0]});else if(2===_.length){var v={family:_[0],given:_[1]};s.parseParticles(v),f[g].push(v)}}else t[g]=b;e&&!e[g]||(n[a]="")}}}for(var g in f)t[g]=f[g];if(e){n[c].trim()&&(n[c]="\n"+n[c]);for(a=c-1;a>-1;a--)n[a].trim()||(n=n.slice(0,a).concat(n.slice(a+1)))}t.note=n.join("\n").trim()}},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,ONLY_FIRST:1,ALWAYS:2,ONLY_LAST:3,FINISH:1,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,MARK_TRAILING_NAMES:!0,POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort"],CITE_FIELDS:["first-reference-note-number","locator","locator-extra"],MINIMAL_NAME_FIELDS:["literal","family"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,COLLAPSE_VALUES:["citation-number","year","year-suffix"],DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DECORABLE_NAME_PARTS:["given","family","suffix"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],PARALLEL_MATCH_VARS:["container-title"],PARALLEL_TYPES:["bill","gazette","regulation","legislation","legal_case","treaty","article-magazine","article-journal"],PARALLEL_COLLAPSING_MID_VARSET:["volume","issue","container-title","section","collection-number"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0590-\u05ff\u00c0-\u017f\u0400-\u042f\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0590-\u05d4\u05d6-\u05ff\u0080-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0590-\u05ff\u00c0-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0590-\u05d4\u05d6-\u05ff\u00c0-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0590-\u05d4\u05d6-\u05ff\u00c0-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0590-\u05ff\u00c0-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","editor","translator","contributor","collection-editor","composer","container-author","director","editorial-director","interviewer","original-author","recipient"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","edition","page","issue","locator","number","number-of-pages","number-of-volumes","volume","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","container","original-date","publication-date","original-date","available-date","submitted"],TITLE_FIELD_SPLITS:function(t){for(var e=["title","short","main","sub"],i={},s=0,r=e.length;s<r;s++)i[e[s]]=t+"title"+("title"===e[s]?"":"-"+e[s]);return i},TAG_USEALL:function(t){var e,i,s,r;for(e=[""],i=t.indexOf("<"),s=t.indexOf(">");i>-1&&s>-1;)r=i>s?i+1:s+1,i<s&&-1===t.slice(i+1,s).indexOf("<")?(e[e.length-1]+=t.slice(0,i),e.push(t.slice(i,s+1)),e.push(""),t=t.slice(r)):(e[e.length-1]+=t.slice(0,s+1),t=t.slice(r)),i=t.indexOf("<"),s=t.indexOf(">");return e[e.length-1]+=t,e},demoteNoiseWords:function(t,e,i){var s=t.locale[t.opt.lang].opts["leading-noise-words"];if(e&&i){(e=e.split(/\s+/)).reverse();for(var r=[],n=e.length-1;n>-1&&s.indexOf(e[n].toLowerCase())>-1;n+=-1)r.push(e.pop());e.reverse();var a=e.join(" "),o=r.join(" ");"drop"!==i&&o?"demote"===i&&(e=[a,o].join(", ")):e=a}return e},extractTitleAndSubtitle:function(t){for(var e=["","container-"],i=0,r=e.length;i<r;i++){var n=e[i],a=s.TITLE_FIELD_SPLITS(n),o=[!1];if(t.multi)for(var l in t.multi._keys[a.short])o.push(l);var u=0;for(o.length;u<r;u++){var p={};if((l=o[u])?(t.multi._keys[a.title]&&(p[a.title]=t.multi._keys[a.title][l]),t.multi._keys[a.short]&&(p[a.short]=t.multi._keys[a.short][l])):(p[a.title]=t[a.title],p[a.short]=t[a.short]),p[a.main]=p[a.title],p[a.sub]=!1,p[a.title]&&p[a.short]){var h=p[a.short];offset=h.length,p[a.title].slice(0,offset)===h&&p[a.title].slice(offset).match(/^\s*:/)&&(p[a.main]=p[a.title].slice(0,offset).replace(/\s+$/,""),p[a.sub]=p[a.title].slice(offset).replace(/^\s*:\s*/,""))}if(l)for(var c in p)t.multi._keys[c]||(t.multi._keys[c]={}),t.multi._keys[c][l]=p[c];else for(var c in p)t[c]=p[c]}}},titlecaseSentenceOrNormal:function(t,e,i,r,n){var a=s.TITLE_FIELD_SPLITS(i),o={};if(r&&e.multi?(e.multi._keys[a.title]&&(o[a.title]=e.multi._keys[a.title][r]),e.multi._keys[a.main]&&(o[a.main]=e.multi._keys[a.main][r]),e.multi._keys[a.sub]&&(o[a.sub]=e.multi._keys[a.sub][r])):(o[a.title]=e[a.title],o[a.main]=e[a.main],o[a.sub]=e[a.sub]),o[a.main]&&o[a.sub]){var l=o[a.main],u=o[a.sub];return n?(l=s.Output.Formatters.sentence(t,l),u=s.Output.Formatters.sentence(t,u)):u=s.Output.Formatters["capitalize-first"](t,u),[l,u].join(o[a.title].slice(l.length,-1*u.length))}return n?s.Output.Formatters.sentence(t,o[a.title]):o[a.title]},getSafeEscape:function(t){if(["bibliography","citation"].indexOf(t.tmp.area)>-1){var e=[];return t.opt.development_extensions.thin_non_breaking_space_html_hack&&"html"===t.opt.mode&&e.push(function(t){return t.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')}),e.length?function(i){for(var r=0,n=e.length;r<n;r+=1)i=e[r](i);return s.Output.Formats[t.opt.mode].text_escape(i)}:s.Output.Formats[t.opt.mode].text_escape}return function(t){return t}},SKIP_WORDS:["about","above","across","afore","after","against","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis-à-vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","et","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],CREATORS:["author","editor","contributor","translator","recipient","interviewer","composer","original-author","container-author","collection-editor"],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokmål)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukranian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{"ª":"a","²":"2","³":"3","¹":"1","º":"o","ʰ":"h","ʱ":"ɦ","ʲ":"j","ʳ":"r","ʴ":"ɹ","ʵ":"ɻ","ʶ":"ʁ","ʷ":"w","ʸ":"y","ˠ":"ɣ","ˡ":"l","ˢ":"s","ˣ":"x","ˤ":"ʕ","ᴬ":"A","ᴭ":"Æ","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴲ":"Ǝ","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴽ":"Ȣ","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ᵂ":"W","ᵃ":"a","ᵄ":"ɐ","ᵅ":"ɑ","ᵆ":"ᴂ","ᵇ":"b","ᵈ":"d","ᵉ":"e","ᵊ":"ə","ᵋ":"ɛ","ᵌ":"ɜ","ᵍ":"g","ᵏ":"k","ᵐ":"m","ᵑ":"ŋ","ᵒ":"o","ᵓ":"ɔ","ᵔ":"ᴖ","ᵕ":"ᴗ","ᵖ":"p","ᵗ":"t","ᵘ":"u","ᵙ":"ᴝ","ᵚ":"ɯ","ᵛ":"v","ᵜ":"ᴥ","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"φ","ᵡ":"χ","⁰":"0","ⁱ":"i","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","⁺":"+","⁻":"−","⁼":"=","⁽":"(","⁾":")","ⁿ":"n","℠":"SM","™":"TM","㆒":"一","㆓":"二","㆔":"三","㆕":"四","㆖":"上","㆗":"中","㆘":"下","㆙":"甲","㆚":"乙","㆛":"丙","㆜":"丁","㆝":"天","㆞":"地","㆟":"人","ˀ":"ʔ","ˁ":"ʕ","ۥ":"و","ۦ":"ي"},SUPERSCRIPTS_REGEXP:new RegExp("[ª²³¹ºʰʱʲʳʴʵʶʷʸˠˡˢˣˤᴬᴭᴮᴰᴱᴲᴳᴴᴵᴶᴷᴸᴹᴺᴼᴽᴾᴿᵀᵁᵂᵃᵄᵅᵆᵇᵈᵉᵊᵋᵌᵍᵏᵐᵑᵒᵓᵔᵕᵖᵗᵘᵙᵚᵛᵜᵝᵞᵟᵠᵡ⁰ⁱ⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾ⁿ℠™㆒㆓㆔㆕㆖㆗㆘㆙㆚㆛㆜㆝㆞㆟ˀˁۥۦ]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(t,e,i){if(t.tmp.group_context.tip.condition){if(t.tmp.group_context.tip.condition.test){var r;if("empty-label"===t.tmp.group_context.tip.condition.test)r=!e;else if("comma-safe"===t.tmp.group_context.tip.condition.test){var n=!e,a=e.slice(0,1).match(s.ALL_ROMANESQUE_REGEXP);t.tmp.just_did_number;r=!!n||!(!a||i)}t.tmp.group_context.tip.force_suppress=!r,t.tmp.group_context.tip.condition.not&&(t.tmp.group_context.tip.force_suppress=!t.tmp.group_context.tip.force_suppress)}}else e.slice(-1).match(/[0-9]/)?t.tmp.just_did_number=!0:t.tmp.just_did_number=!1},locale:{},locale_opts:{},locale_dates:{}};if(void 0!==t&&"exports"in t){e.CSL=s}s.TERMINAL_PUNCTUATION_REGEXP=new RegExp("^(["+s.TERMINAL_PUNCTUATION.slice(0,-1).join("")+"])(.*)"),s.CLOSURES=new RegExp(".*[\\]\\)]"),"undefined"==typeof console?(s.debug=function(t){dump("CSL: "+t+"\n")},s.error=function(t){dump("CSL error: "+t+"\n")}):(s.debug=function(t){console.log("CSL: "+t)},s.error=function(t){console.log("CSL error: "+t)}),s.XmlJSON=function(t){this.dataObj=t,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", ","substitute-use-first":"1","use-last":"1"},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}},s.XmlJSON.prototype.clean=function(t){return t},s.XmlJSON.prototype.getStyleId=function(t,e){var i="id";e&&(i="title");for(var s="",r=t.children,n=0,a=r.length;n<a;n++)if("info"===r[n].name)for(var o=r[n].children,l=0,u=o.length;l<u;l++)o[l].name===i&&(s=o[l].children[0]);return s},s.XmlJSON.prototype.children=function(t){return!(!t||!t.children.length)&&t.children.slice()},s.XmlJSON.prototype.nodename=function(t){return t.name},s.XmlJSON.prototype.attributes=function(t){var e={};for(var i in t.attrs)e["@"+i]=t.attrs[i];return e},s.XmlJSON.prototype.content=function(t){var e="";if(!t||!t.children)return e;for(var i=0,s=t.children.length;i<s;i+=1)"string"==typeof t.children[i]&&(e+=t.children[i]);return e},s.XmlJSON.prototype.namespace={},s.XmlJSON.prototype.numberofnodes=function(t){return t&&"number"==typeof t.length?t.length:0},s.XmlJSON.prototype.getAttributeValue=function(t,e,i){var s="";return i&&(e=i+":"+e),t&&t.attrs&&(s=t.attrs[e]?t.attrs[e]:""),s},s.XmlJSON.prototype.getNodeValue=function(t,e){var i="";if(e)for(var s=0,r=t.children.length;s<r;s+=1)t.children[s].name===e&&(i=t.children[s].children.length?t.children[s]:"");else t&&(i=t);return i&&i.children&&1==i.children.length&&"string"==typeof i.children[0]&&(i=i.children[0]),i},s.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(t,e,i,s,r){"@"===s.slice(0,1)&&(s=s.slice(1));for(var n=0,a=t.children.length;n<a;n+=1)t.children[n].name===e&&t.children[n].attrs.name===i&&(t.children[n].attrs[s]=r)},s.XmlJSON.prototype.deleteNodeByNameAttribute=function(t,e){var i,s;for(i=0,s=t.children.length;i<s;i+=1)t.children[i]&&"string"!=typeof t.children[i]&&t.children[i].attrs.name==e&&(t.children=t.children.slice(0,i).concat(t.children.slice(i+1)))},s.XmlJSON.prototype.deleteAttribute=function(t,e){void 0!==t.attrs[e]&&t.attrs.pop(e)},s.XmlJSON.prototype.setAttribute=function(t,e,i){return t.attrs[e]=i,!1},s.XmlJSON.prototype.nodeCopy=function(t,e){if(!e)var e={};if("object"==typeof e&&void 0===e.length)for(var i in t)"string"==typeof t[i]?e[i]=t[i]:"object"==typeof t[i]&&(void 0===t[i].length?e[i]=this.nodeCopy(t[i],{}):e[i]=this.nodeCopy(t[i],[]));else for(var s=0,r=t.length;s<r;s+=1)"string"==typeof t[s]?e[s]=t[s]:e[s]=this.nodeCopy(t[s],{});return e},s.XmlJSON.prototype.getNodesByName=function(t,e,i,s){if(!s)var s=[];if(!t||!t.children)return s;e===t.name&&(i?i===t.attrs.name&&s.push(t):s.push(t));for(var r=0,n=t.children.length;r<n;r+=1)"object"==typeof t.children[r]&&this.getNodesByName(t.children[r],e,i,s);return s},s.XmlJSON.prototype.nodeNameIs=function(t,e){return void 0!==t&&e==t.name},s.XmlJSON.prototype.makeXml=function(t){return"string"==typeof t&&(t="<"===t.slice(0,1)?this.jsonStringWalker.walkToObject(t):JSON.parse(t)),t},s.XmlJSON.prototype.insertChildNodeAfter=function(t,e,i,s){for(var r=0,n=t.children.length;r<n;r+=1)if(e===t.children[r]){t.children=t.children.slice(0,r).concat([s]).concat(t.children.slice(r+1));break}return t},s.XmlJSON.prototype.insertPublisherAndPlace=function(t){if("group"===t.name){for(var e=!0,i=["publisher","publisher-place"],s=0,r=t.children.length;s<r;s+=1){var n=i.indexOf(t.children[s].attrs.variable);if(!("text"===t.children[s].name&&n>-1)||t.children[s].attrs.prefix||t.children[s].attrs.suffix){e=!1;break}i=i.slice(0,n).concat(i.slice(n+1))}e&&!i.length&&(t.attrs["has-publisher-and-publisher-place"]=!0)}for(var s=0,r=t.children.length;s<r;s+=1)"object"==typeof t.children[s]&&this.insertPublisherAndPlace(t.children[s])},s.XmlJSON.prototype.isChildOfSubstitute=function(t){if(t.length>0){var e=t.slice();return"substitute"===e.pop()||this.isChildOfSubstitute(e)}return!1},s.XmlJSON.prototype.addMissingNameNodes=function(t,e){if(e||(e=[]),"names"===t.name&&!this.isChildOfSubstitute(e)){for(var i=!0,s=0,r=t.children.length;s<r;s++)if("name"===t.children[s].name){i=!1;break}i&&(t.children=[{name:"name",attrs:{},children:[]}].concat(t.children))}e.push(t.name);for(var s=0,r=t.children.length;s<r;s+=1)"object"==typeof t.children[s]&&this.addMissingNameNodes(t.children[s],e);e.pop()},s.XmlJSON.prototype.addInstitutionNodes=function(t){if("names"===t.name){for(var e={},i=-1,r=0,n=t.children.length;r<n;r+=1){if("name"==t.children[r].name){for(var a in t.children[r].attrs)e[a]=t.children[r].attrs[a];e.delimiter=t.children[r].attrs.delimiter,e.and=t.children[r].attrs.and,i=r;for(var o=0,l=t.children[r].children.length;o<l;o+=1)if("family"===t.children[r].children[o].attrs.name)for(var a in t.children[r].children[o].attrs)e[a]=t.children[r].children[o].attrs[a]}if("institution"==t.children[r].name){i=-1;break}}if(i>-1){for(var u=this.nodeCopy(this.institution),r=0,n=s.INSTITUTION_KEYS.length;r<n;r+=1){var p=s.INSTITUTION_KEYS[r];void 0!==e[p]&&(u.children[0].attrs[p]=e[p]),e.delimiter&&(u.attrs.delimiter=e.delimiter),e.and&&(u.attrs.and="text")}t.children=t.children.slice(0,i+1).concat([u]).concat(t.children.slice(i+1))}}for(var r=0,n=t.children.length;r<n;r+=1)"string"!=typeof t.children[r]&&this.addInstitutionNodes(t.children[r])},s.XmlJSON.prototype.flagDateMacros=function(t){for(var e=0,i=t.children.length;e<i;e+=1)"macro"===t.children[e].name&&this.inspectDateMacros(t.children[e])&&(t.children[e].attrs["macro-has-date"]="true")},s.XmlJSON.prototype.inspectDateMacros=function(t){if(!t||!t.children)return!1;if("date"===t.name)return!0;for(var e=0,i=t.children.length;e<i;e+=1)if(this.inspectDateMacros(t.children[e]))return!0;return!1},s.stripXmlProcessingInstruction=function(t){return t?(t=t.replace(/^<\?[^?]+\?>/,""),t=t.replace(/<!--[^>]+-->/g,""),t=t.replace(/^\s+/g,""),t=t.replace(/\s+$/g,"")):t},s.parseXml=function(t){function e(t){return t.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,function(t,e){var i=parseInt(e,10);return String.fromCharCode(i)}).replace(/&#x([a-f0-9]{1,6});/gi,function(t,e){var i=parseInt(e,16);return String.fromCharCode(i)})}function i(t){var e=t.match(/([^\'\"=	 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(e)for(var i=0,s=e.length;i<s;i++)e[i]=e[i].replace(/=.*/,"");return e}function s(t,e){var i=RegExp("^.*[\t ]+"+e+"=(\"(?:[^\"]*)\"|'(?:[^']*)').*$"),s=t.match(i);return s?s[1].slice(1,-1):null}function r(t){var e=RegExp("^<([^\t />]+)"),i=t.match(e);return i?i[1]:null}function n(t){var n={};n.name=r(t),n.attrs={};var a=i(t);if(a)for(var o=0,l=a.length;o<l;o++){var u={name:a[o],value:s(t,a[o])};n.attrs[u.name]=e(u.value)}return n.children=[],n}function a(t){return e(t.match(/^.*>([^<]*)<.*$/)[1])}function o(t){p.slice(-1)[0].push(t)}function l(t){p.push(t.children)}for(var u={children:[]},p=[u.children],h=function(t){for(var e=(t=t.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[	 ]+</g,"><").replace(/<\!--.*?-->/g,"")).split("><"),i=null,s=0,r=e.length;s<r;s++)s>0&&(e[s]="<"+e[s]),s<e.length-1&&(e[s]=e[s]+">"),"number"!=typeof i&&("<style "!==e[s].slice(0,7)&&"<locale "!=e[s].slice(0,8)||(i=s));for(s=(e=e.slice(i)).length-2;s>-1;s--)if(-1===e[s].slice(1).indexOf("<")){var n=e[s].slice(0,5);"<term"===n?"</term"===e[s+1].slice(0,6)&&(e[s]=e[s]+e[s+1],e=e.slice(0,s+1).concat(e.slice(s+2))):["<sing","<mult"].indexOf(n)>-1&&"/>"!==e[s].slice(-2)&&"<"===e[s+1].slice(0,1)&&(e[s]=e[s]+e[s+1],e=e.slice(0,s+1).concat(e.slice(s+2)))}return e}(t),c=0,f=h.length;c<f;c++)!function(t){var e;t.slice(1).indexOf("<")>-1?((e=n(t.slice(0,t.indexOf(">")+1))).children=[a(t)],o(e)):"/>"===t.slice(-2)?(e=n(t),"term"===r(t)&&e.children.push(""),o(e)):"</"===t.slice(0,2)?p.pop():(o(e=n(t)),l(e))}(h[c]);return u.children[0]},s.XmlDOM=function(t){this.dataObj=t,"undefined"==typeof DOMParser?(DOMParser=function(){},DOMParser.prototype.parseFromString=function(t,e){if("undefined"!=typeof ActiveXObject)return(i=new ActiveXObject("MSXML.DomDocument")).async=!1,i.loadXML(t),i;if("undefined"!=typeof XMLHttpRequest){var i=new XMLHttpRequest;return e||(e="text/xml"),i.open("GET","data:"+e+";charset=utf-8,"+encodeURIComponent(t),!1),i.overrideMimeType&&i.overrideMimeType(e),i.send(null),i.responseXML}return"undefined"!=typeof marknote?(new marknote.Parser).parse(t):void 0},this.hasAttributes=function(t){return!(!t.attributes||!t.attributes.length)}):this.hasAttributes=function(t){return!(!t.attributes||!t.attributes.length)},this.importNode=function(t,e){if(void 0===t.importNode)i=this._importNode(t,e,!0);else var i=t.importNode(e,!0);return i},this._importNode=function(t,e,i){switch(e.nodeType){case 1:var s=t.createElement(e.nodeName);if(e.attributes&&e.attributes.length>0)for(var r=0,n=e.attributes.length;r<n;)s.setAttribute(e.attributes[r].nodeName,e.getAttribute(e.attributes[r++].nodeName));if(i&&e.childNodes&&e.childNodes.length>0)for(var r=0,n=e.childNodes.length;r<n;)s.appendChild(this._importNode(t,e.childNodes[r++],i));return s}},this.parser=new DOMParser;var e=this.parser.parseFromString('<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',"text/xml"),i=e.getElementsByTagName("institution");this.institution=i.item(0);var s=e.getElementsByTagName("institution-part");this.institutionpart=s.item(0),this.ns="http://purl.org/net/xbiblio/csl"},s.XmlDOM.prototype.clean=function(t){return t=t.replace(/<\?[^?]+\?>/g,""),t=t.replace(/<![^>]+>/g,""),t=t.replace(/^\s+/,""),t=t.replace(/\s+$/,""),t=t.replace(/^\n*/,"")},s.XmlDOM.prototype.getStyleId=function(t,e){var i="",s="id";e&&(s="title");var r=t.getElementsByTagName(s);return r&&r.length&&(r=r.item(0)),r&&(i=r.textContent),i||(i=r.innerText),i||(i=r.innerHTML),i},s.XmlDOM.prototype.children=function(t){var e,i,s,r;if(t){for(r=[],i=0,s=(e=t.childNodes).length;i<s;i+=1)"#text"!=e[i].nodeName&&r.push(e[i]);return r}return[]},s.XmlDOM.prototype.nodename=function(t){return t.nodeName},s.XmlDOM.prototype.attributes=function(t){var e,i,s,r,n;if(e=new Object,t&&this.hasAttributes(t))for(r=0,n=(i=t.attributes).length;r<n;r+=1)e["@"+(s=i[r]).name]=s.value;return e},s.XmlDOM.prototype.content=function(t){return void 0!==t.textContent?t.textContent:void 0!==t.innerText?t.innerText:t.txt},s.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"},s.XmlDOM.prototype.numberofnodes=function(t){return t?t.length:0},s.XmlDOM.prototype.getAttributeName=function(t){return t.name},s.XmlDOM.prototype.getAttributeValue=function(t,e,i){var s="";return i&&(e=i+":"+e),t&&this.hasAttributes(t)&&t.getAttribute(e)&&(s=t.getAttribute(e)),s},s.XmlDOM.prototype.getNodeValue=function(t,e){var i=null;if(e){var s=t.getElementsByTagName(e);s.length>0&&(i=void 0!==s[0].textContent?s[0].textContent:void 0!==s[0].innerText?s[0].innerText:s[0].text)}return null===i&&t&&t.childNodes&&(0==t.childNodes.length||1==t.childNodes.length&&"#text"==t.firstChild.nodeName)&&(i=void 0!==t.textContent?t.textContent:void 0!==t.innerText?t.innerText:t.text),null===i&&(i=t),i},s.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(t,e,i,s,r){var n,a,o,l;for("@"===s.slice(0,1)&&(s=s.slice(1)),n=0,a=(o=t.getElementsByTagName(e)).length;n<a;n+=1)(l=o[n]).getAttribute("name")==i&&l.setAttribute(s,r)},s.XmlDOM.prototype.deleteNodeByNameAttribute=function(t,e){var i,s,r,n;for(i=0,s=(n=t.childNodes).length;i<s;i+=1)(r=n[i])&&r.nodeType!=r.TEXT_NODE&&this.hasAttributes(r)&&r.getAttribute("name")==e&&t.removeChild(n[i])},s.XmlDOM.prototype.deleteAttribute=function(t,e){t.removeAttribute(e)},s.XmlDOM.prototype.setAttribute=function(t,e,i){return t.ownerDocument||(t=t.firstChild),["function","unknown"].indexOf(typeof t.setAttribute)>-1&&t.setAttribute(e,i),!1},s.XmlDOM.prototype.nodeCopy=function(t){return t.cloneNode(!0)},s.XmlDOM.prototype.getNodesByName=function(t,e,i){var s,r,n,a,o;for(s=[],a=0,o=(r=t.getElementsByTagName(e)).length;a<o;a+=1)n=r.item(a),(!i||this.hasAttributes(n)&&n.getAttribute("name")==i)&&s.push(n);return s},s.XmlDOM.prototype.nodeNameIs=function(t,e){return e==t.nodeName},s.XmlDOM.prototype.makeXml=function(t){return t||(t="<docco><bogus/></docco>"),t=t.replace(/\s*<\?[^>]*\?>\s*\n*/g,""),this.parser.parseFromString(t,"application/xml").firstChild},s.XmlDOM.prototype.insertChildNodeAfter=function(t,e,i,s){var r;return r=this.importNode(e.ownerDocument,s),t.replaceChild(r,e),t},s.XmlDOM.prototype.insertPublisherAndPlace=function(t){for(var e=t.getElementsByTagName("group"),i=0,s=e.length;i<s;i+=1){for(var r=e.item(i),n=[],a=0,o=r.childNodes.length;a<o;a+=1)1!==r.childNodes.item(a).nodeType&&n.push(a);if(r.childNodes.length-n.length==2){for(var l=[],a=0,o=2;a<o;a+=1)if(!(n.indexOf(a)>-1)){for(var u=r.childNodes.item(a),p=[],h=0,c=u.childNodes.length;h<c;h+=1)1!==u.childNodes.item(h).nodeType&&p.push(h);if(u.childNodes.length-p.length==0&&(l.push(u.getAttribute("variable")),u.getAttribute("suffix")||u.getAttribute("prefix"))){l=[];break}}l.indexOf("publisher")>-1&&l.indexOf("publisher-place")>-1&&r.setAttribute("has-publisher-and-publisher-place",!0)}}},s.XmlDOM.prototype.isChildOfSubstitute=function(t){return!!t.parentNode&&("substitute"===t.parentNode.tagName.toLowerCase()||this.isChildOfSubstitute(t.parentNode))},s.XmlDOM.prototype.addMissingNameNodes=function(t){for(var e=t.getElementsByTagName("names"),i=0,s=e.length;i<s;i+=1){var r=e.item(i),n=r.getElementsByTagName("name");if(!(n&&0!==n.length||this.isChildOfSubstitute(r))){var a=r.ownerDocument.createElement("name");r.appendChild(a)}}},s.XmlDOM.prototype.addInstitutionNodes=function(t){var e,i,r,n,a,o,l;for(o=0,l=(e=t.getElementsByTagName("names")).length;o<l;o+=1)if(i=e.item(o),0!=(n=i.getElementsByTagName("name")).length&&0==i.getElementsByTagName("institution").length){r=this.importNode(t.ownerDocument,this.institution),theinstitutionpart=r.getElementsByTagName("institution-part").item(0),a=n.item(0),i.insertBefore(r,a.nextSibling);for(var u=0,p=s.INSTITUTION_KEYS.length;u<p;u+=1){m=s.INSTITUTION_KEYS[u];(d=a.getAttribute(m))&&theinstitutionpart.setAttribute(m,d)}for(var h=a.getElementsByTagName("name-part"),u=0,p=h.length;u<p;u+=1)if("family"===h[u].getAttribute("name"))for(var c=0,f=s.INSTITUTION_KEYS.length;c<f;c+=1){var m=s.INSTITUTION_KEYS[c],d=h[u].getAttribute(m);d&&theinstitutionpart.setAttribute(m,d)}}},s.XmlDOM.prototype.flagDateMacros=function(t){var e,i,s;for(nodes=t.getElementsByTagName("macro"),e=0,i=nodes.length;e<i;e+=1)(s=nodes.item(e)).getElementsByTagName("date").length&&s.setAttribute("macro-has-date","true")},s.setupXml=function(t){var e={},i=null;if(void 0!==t?"string"==typeof t?(e="<"===(t=t.replace("^\ufeff","").replace(/^\s+/,"")).slice(0,1)?s.parseXml(t):JSON.parse(t),i=new s.XmlJSON(e)):i=void 0!==t.getAttribute?new s.XmlDOM(t):void 0!==t.toXMLString?new s.XmlE4X(t):new s.XmlJSON(t):s.error("unable to parse XML input"),!i)throw"citeproc-js error: unable to parse CSL style or locale object";return i},s.getSortCompare=function(t){if(s.stringCompare)return s.stringCompare;var e,i={sensitivity:"base",ignorePunctuation:!0,numeric:!0};t||(t="en-US");var r=function(t){return t.replace(/^[\[\]\'\"]*/g,"")},n=!!(e=function(e,s){return e.toLocaleLowerCase().localeCompare(s.toLocaleLowerCase(),t,i)})("[x","x")&&function(t,i){return e(r(t),r(i))};return function(t,i){return n?n(t,i):e(t,i)}},s.ambigConfigDiff=function(t,e){var i,s,r,n;if(t.names.length!==e.names.length)return 1;for(i=0,s=t.names.length;i<s;i+=1){if(t.names[i]!==e.names[i])return 1;for(r=0,n=t.givens[i];r<n;r+=1)if(t.givens[i][r]!==e.givens[i][r])return 1}return t.disambiguate!=e.disambiguate?1:t.year_suffix!==e.year_suffix?1:0},s.cloneAmbigConfig=function(t,e,i){var s,r,n,a,o,l={};for(l.names=[],l.givens=[],l.year_suffix=!1,l.disambiguate=!1,s=0,r=t.names.length;s<r;s+=1)o=t.names[s],l.names[s]=o;for(s=0,r=t.givens.length;s<r;s+=1){for(o=[],n=0,a=t.givens[s].length;n<a;n+=1)o.push(t.givens[s][n]);l.givens.push(o)}return e?(l.year_suffix=e.year_suffix,l.disambiguate=e.disambiguate):(l.year_suffix=t.year_suffix,l.disambiguate=t.disambiguate),l},s.getAmbigConfig=function(){var t;return(t=this.tmp.disambig_request)||(t=this.tmp.disambig_settings),s.cloneAmbigConfig(t)},s.getMaxVals=function(){return this.tmp.names_max.mystack.slice()},s.getMinVal=function(){return this.tmp["et-al-min"]},s.tokenExec=function(t,e,i){var s,r;s=t.next,r=!1;t.test&&(s=function(e){return e?(this.tmp.jump.replace("succeed"),t.succeed):(this.tmp.jump.replace("fail"),t.fail)}.call(this,t.test(e,i)));for(var n=0,a=t.execs.length;n<a;n++)(r=t.execs[n].call(t,this,e,i))&&(s=r);return s},s.expandMacro=function(t,e){var i,r,n;i=t.postponed_macro,t=new s.Token("group",s.START);var a=!1,o=!1;if((r=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",i)).length&&(o=this.cslXml.getAttributeValue(r[0],"cslid"),a=this.cslXml.getAttributeValue(r[0],"macro-has-date")),a&&(i=i+"@"+this.build.current_default_locale,u=function(t,e){t.tmp.extension&&(t.tmp["doing-macro-with-date"]=!0)},t.execs.push(u)),this.build.macro_stack.indexOf(i)>-1)throw'CSL processor error: call to macro "'+i+'" would cause an infinite loop';if(this.build.macro_stack.push(i),t.cslid=o,s.MODULE_MACROS[i]&&(t.juris=i,this.opt.update_mode=s.POSITION),s.Node.group.build.call(t,this,e,!0),!this.cslXml.getNodeValue(r))throw'CSL style error: undefined macro "'+i+'"';var l=s.getMacroTarget.call(this,i);if(l&&(s.buildMacro.call(this,l,r),s.configureMacro.call(this,l)),!this.build.extension){var u=function(t){return function(e,i,r){for(var n=0;n<e.macros[t].length;)n=s.tokenExec.call(e,e.macros[t][n],i,r)}}(i),p=new s.Token("text",s.SINGLETON);p.execs.push(u),e.push(p)}n=new s.Token("group",s.END),a&&(u=function(t,e){t.tmp.extension&&(t.tmp["doing-macro-with-date"]=!1)},n.execs.push(u)),t.juris&&(n.juris=i),s.Node.group.build.call(n,this,e,!0),this.build.macro_stack.pop()},s.getMacroTarget=function(t){var e=!1;return this.build.extension?e=this[this.build.root+this.build.extension].tokens:this.macros[t]||(e=[],this.macros[t]=e),e},s.buildMacro=function(t,e){s.makeBuilder(this,t)(void 0===e.length?e:e[0])},s.configureMacro=function(t){this.build.extension||this.configureTokenList(t)},s.XmlToToken=function(t,e,i){var r,n,a,o,l,u,p;if(r=t.cslXml.nodename(this),!t.build.skip||t.build.skip===r)if(r){if(!s.Node[t.cslXml.nodename(this)])throw'Undefined node name "'+r+'".';if([],a=t.cslXml.attributes(this),o=s.setDecorations.call(this,t,a),l=new s.Token(r,e),e!==s.END||"if"===r||"else-if"===r||"layout"===r){for(u in a)if(a.hasOwnProperty(u)){if(e===s.END&&"@language"!==u&&"@locale"!==u)continue;if(a.hasOwnProperty(u))if(s.Attributes[u])try{s.Attributes[u].call(l,t,""+a[u])}catch(t){throw s.error(t),"CSL processor error, "+u+" attribute: "+t}else s.debug('warning: undefined attribute "'+u+'" in style')}l.decorations=o}else e===s.END&&a["@variable"]&&(l.hasVariable=!0,s.DATE_VARIABLES.indexOf(a["@variable"])>-1&&(l.variables=a["@variable"].split(/\s+/)));p=i||t[t.build.area].tokens,s.Node[r].build.call(l,t,p,!0)}else(n=t.cslXml.content(this))&&(t.build.text=n)},s.DateParser=new function(){for(var t=[["明治",1867],["大正",1911],["昭和",1925],["平成",1988]],e={},i=0,r=t.length;i<r;i++){var n=t[i][0],a=t[i][1];e[n]=a}for(var o=[],i=0,r=t.length;i<r;i++){a=t[i][0];o.push(a)}var l=o.join("|"),u=new RegExp("(?:"+l+")(?:[0-9]+)"),p=new RegExp("(?:"+l+")(?:[0-9]+)","g"),h=/(\u6708|\u5E74)/g,c=/\u65E5/g,f=/\u301c/g,m="([?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])|(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])|[?0-9]{1,3}|[%%DATED%%]|[?~]|[^-/~?0-9]+)",d=new RegExp(m.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),g=new RegExp(m.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),b=new RegExp(m.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-"));this.monthStrings="january february march april may june july august september october november december spring summer fall winter spring summer".split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var t=0,e=this.monthStrings.length;t<e;t++)this.monthSets.push([this.monthStrings[t]]);this.monthAbbrevs=[];for(var t=0,e=this.monthSets.length;t<e;t++){this.monthAbbrevs.push([]);for(var i=0,s=this.monthSets[t].length;i<s;i++)this.monthAbbrevs[t].push(this.monthSets[t][0].slice(0,3))}this.monthRexes=[];for(var t=0,e=this.monthAbbrevs.length;t<e;t++)this.monthRexes.push(new RegExp("(?:"+this.monthAbbrevs[t].join("|")+")"))},this.addDateParserMonths=function(t){if("string"==typeof t&&(t=t.split(/\s+/)),12===t.length||16===t.length){for(var e=0,i=t.length;e<i;e++){for(var r=null,n=!1,a=3,o={},l=0,u=this.monthAbbrevs.length;l<u;l++){if(o[l]={},l===e){for(var p=0,h=this.monthAbbrevs[e].length;p<h;p++)if(this.monthAbbrevs[e][p]===t[e].slice(0,this.monthAbbrevs[e][p].length)){n=!0;break}}else for(var p=0,h=this.monthAbbrevs[l].length;p<h;p++)if(r=this.monthAbbrevs[l][p].length,this.monthAbbrevs[l][p]===t[e].slice(0,r)){for(;this.monthSets[l][p].slice(0,r)===t[e].slice(0,r);){if(r>t[e].length||r>this.monthSets[l][p].length){s.debug("unable to disambiguate month string in date parser: "+t[e]);break}r+=1}a=r,o[l][p]=r}for(var c in o)for(kKey in o[c])r=o[c][kKey],c=parseInt(c,10),kKey=parseInt(kKey,10),this.monthAbbrevs[c][kKey]=this.monthSets[c][kKey].slice(0,r)}n||(this.monthSets[e].push(t[e]),this.monthAbbrevs[e].push(t[e].slice(0,a)))}this.monthRexes=[],this.monthRexStrs=[];for(var e=0,i=this.monthAbbrevs.length;e<i;e++)this.monthRexes.push(new RegExp("^(?:"+this.monthAbbrevs[e].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[e].join("|")+")");if(18===this.monthAbbrevs.length)for(var e=12,i=14;e<i;e++)this.monthRexes[e+4]=new RegExp("^(?:"+this.monthAbbrevs[e].join("|")+")"),this.monthRexStrs[e+4]="^(?:"+this.monthAbbrevs[e].join("|")+")"}else s.debug("month [+season] list of "+t.length+", expected 12 or 16. Ignoring.")},this.convertDateObjectToArray=function(t){t["date-parts"]=[],t["date-parts"].push([]);for(var e=0,i=0,s=3;i<s;i++){var r=["year","month","day"][i];if(!t[r])break;e+=1,t["date-parts"][0].push(t[r]),delete t[r]}t["date-parts"].push([]);for(var i=0,s=e;i<s&&(r=["year_end","month_end","day_end"][i],t[r]);i++)t["date-parts"][1].push(t[r]),delete t[r];return t["date-parts"][0].length!==t["date-parts"][1].length&&t["date-parts"].pop(),t},this.convertDateObjectToString=function(t){for(var e=[],i=0;i<3&&t[DATE_PARTS_ALL[i]];i+=1)e.push(t[DATE_PARTS_ALL[i]]);return e.join("-")},this._parseNumericDate=function(t,e,i,s){i||(i="");for(var r=s.split(e),n=0,a=r.length;n<a;n++)if(4===r[n].length){t["year"+i]=r[n].replace(/^0*/,""),r=n?r.slice(0,n):r.slice(1);break}for(var n=0,a=r.length;n<a;n++)r[n]=parseInt(r[n],10);1===r.length||2===r.length&&!r[1]?t["month"+i]=""+r[0]:2===r.length&&(r[this.monthGuess]>12?(t["month"+i]=""+r[this.dayGuess],t["day"+i]=""+r[this.monthGuess]):(t["month"+i]=""+r[this.monthGuess],t["day"+i]=""+r[this.dayGuess]))},this.parseDateToObject=function(t){var e,i=t,r=-1,n=-1,a=!1;if(t){if("-"===t.slice(0,1)&&(a=!0,t=t.slice(1)),t.match(/^[0-9]{1,3}$/))for(;t.length<4;)t="0"+t;if(O=(t=(t=""+t).replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"")).match(h)){var o=(t=(t=(t=(t=(t=(t=t.replace(/\s+/g,"")).replace(c,"")).replace(h,"-")).replace(f,"/")).replace(/\-\//g,"/")).replace(/-$/g,"")).split(u);e=[];var l=t.match(p);if(l){for(var m=[],_=0,v=l.length;_<v;_++)m=m.concat(l[_].match(/([^0-9]+)([0-9]+)/).slice(1));for(var _=0,v=o.length;_<v;_++)if(e.push(o[_]),_!==len-1){var y=2*pos;e.push(m[y]),e.push(m[y+1])}}else e=o;for(var _=1,v=e.length;_<v;_+=3)e[_+1]=jiy[e[_]]+parseInt(e[_+1],10),e[_]="";r=(t=(t=(t=(t=e.join("")).replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/")).replace(/\.\s*$/,"")).replace(/\.(?! )/,"")).indexOf("/"),n=t.indexOf("-")}}var x,S,E="",I="",A={};if('"'===(t=t.replace(/([A-Za-z])\./g,"$1")).slice(0,1)&&'"'===t.slice(-1))return A.literal=t.slice(1,-1),A;r>-1&&n>-1?t.split("/").length>3?(x="-",S="/",e=(t=t.replace(/\_/g,"-")).split(b)):(x="/",S="-",e=(t=t.replace(/\_/g,"/")).split(g)):(x="-",S="-",e=(t=(t=t.replace(/\//g,"-")).replace(/\_/g,"-")).split(d));for(var T=[],_=0,v=e.length;_<v;_++){var O=e[_].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/);O&&T.push(O[1])}var N=T.indexOf(x),k=[],w=!1;N>-1?(k.push([0,N]),k.push([N+1,T.length]),w=!0):k.push([0,T.length]);for(var R="",_=0,v=k.length;_<v;_++){delim=k[_],date=T.slice(delim[0],delim[1]);t:for(var C=0,L=date.length;C<L;C++){var D=date[C];if(D.indexOf(S)>-1)this._parseNumericDate(A,S,R,D);else if(D.match(/[0-9]{4}/))A["year"+R]=D.replace(/^0*/,"");else{for(var P=0,j=this.monthRexes.length;P<j;P++)if(D.toLocaleLowerCase().match(this.monthRexes[P])){A["month"+R]=""+(parseInt(P,10)+1);continue t}D.match(/^[0-9]+$/)&&(E=D),D.toLocaleLowerCase().match(/^bc/)&&E?(A["year"+R]=""+-1*E,E=""):D.toLocaleLowerCase().match(/^ad/)&&E?(A["year"+R]=""+E,E=""):"~"===D||"?"===D||"c"===D||D.match(/^cir/)?A.circa="1":!D.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)||A["season"+R]||(I=D)}}E&&(A["day"+R]=E,E=""),I&&!A["season"+R]&&(A["season"+R]=I,I=""),R="_end"}if(w)for(var C=0,L=s.DATE_PARTS_ALL.length;C<L;C++){var q=s.DATE_PARTS_ALL[C];A[q]&&!A[q+"_end"]?A[q+"_end"]=A[q]:!A[q]&&A[q+"_end"]&&(A[q]=A[q+"_end"])}(!A.year||A.year&&A.day&&!A.month)&&(A={literal:i});for(var U=["year","month","day","year_end","month_end","day_end"],_=0,v=U.length;_<v;_++){var B=U[_];"string"==typeof A[B]&&A[B].match(/^[0-9]+$/)&&(A[B]=parseInt(A[B],10))}return a&&Object.keys(A).indexOf("year")>-1&&(A.year=-1*A.year),A},this.parseDateToArray=function(t){return this.convertDateObjectToArray(this.parseDateToObject(t))},this.parseDateToString=function(t){return this.convertDateObjectToString(this.parseDateToObject(t))},this.parse=function(t){return this.parseDateToObject(t)},this.setOrderMonthDay(),this.resetDateParserMonths()},s.Engine=function(t,e,i,r){var n;this.processor_version=s.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=t,t.variableWrapper&&(s.VARIABLE_WRAPPER_PREPUNCT_REX=new RegExp("^(["+[" "].concat(s.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),s.retrieveStyleModule&&(this.sys.retrieveStyleModule=s.retrieveStyleModule),s.getAbbreviation&&(this.sys.getAbbreviation=s.getAbbreviation),this.sys.stringCompare&&(s.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=s.AbbreviationSegments,this.parallel=new s.Parallel(this),this.transform=new s.Transform(this),this.setParseNames=function(t){this.opt["parse-names"]=t},this.opt=new s.Engine.Opt,this.tmp=new s.Engine.Tmp,this.build=new s.Engine.Build,this.fun=new s.Engine.Fun(this),this.configure=new s.Engine.Configure,this.citation_sort=new s.Engine.CitationSort,this.bibliography_sort=new s.Engine.BibliographySort,this.citation=new s.Engine.Citation(this),this.bibliography=new s.Engine.Bibliography,this.output=new s.Output.Queue(this),this.dateput=new s.Output.Queue(this),this.cslXml=s.setupXml(e),(this.opt.development_extensions.csl_reverse_lookup_support||this.sys.csl_reverse_lookup_support)&&(this.build.cslNodeId=0,this.setCslNodeIds=function(t,e){var i=this.cslXml.children(t);this.cslXml.setAttribute(t,"cslid",this.build.cslNodeId),this.opt.nodenames.push(e),this.build.cslNodeId+=1;for(var s=0,r=this.cslXml.numberofnodes(i);s<r;s+=1)(e=this.cslXml.nodename(i[s]))&&this.setCslNodeIds(i[s],e)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),void 0===this.cslXml.attributes(this.cslXml.dataObj)["@sort-separator"]&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt.class=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),s.setSuppressedJurisdictions&&s.setSuppressedJurisdictions(this.opt.styleID,this.opt.suppressedJurisdictions),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),"1.1m"===this.opt.version.slice(0,4)&&(this.opt.development_extensions.static_statute_locator=!0,this.opt.development_extensions.handle_parallel_articles=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.rtl_support=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0),i&&(i=i.replace("_","-"),i=s.normalizeLocaleStr(i)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=s.normalizeLocaleStr(this.opt["default-locale"][0])),i&&r&&(this.opt["default-locale"]=[i]),i&&!r&&this.opt["default-locale"][0]&&(i=this.opt["default-locale"][0]),0===this.opt["default-locale"].length&&(i||(i="en-US"),this.opt["default-locale"].push("en-US")),i||(i=this.opt["default-locale"][0]),n=s.localeResolve(i),this.opt.lang=n.best,this.opt["default-locale"][0]=n.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),"dale|".localeCompare("daleb",this.opt["default-locale-sort"])>-1?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(n),this.locale[this.opt.lang].opts["skip-words-regexp"]=function(t){var t=t.slice();return new RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+t.join("|")+")(?=[!?:]*\\s+|-|$))","g")}(this.locale[this.opt.lang].opts["skip-words"]),this.output.adjust=new s.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new s.Registry(this),this.macros={},this.build.area="citation";a=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(a,this[this.build.area].tokens),this.build.area="bibliography";var a=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(a,this[this.build.area].tokens),this.juris={},this.configureTokenLists(),this.disambiguate=new s.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=s.DateParser,this.fun.flipflopper=new s.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=s.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=s.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")},s.Engine.prototype.setCloseQuotesArray=function(){var t;(t=[]).push(this.getTerm("close-quote")),t.push(this.getTerm("close-inner-quote")),t.push('"'),t.push("'"),this.opt.close_quotes_array=t},s.makeBuilder=function(t,e){function i(i){s.XmlToToken.call(i,t,s.START,e)}function r(i){s.XmlToToken.call(i,t,s.END,e)}function n(i){s.XmlToToken.call(i,t,s.SINGLETON,e)}function a(e){var o;if(t.cslXml.numberofnodes(t.cslXml.children(e))){i(o=e);for(var l=0;l<t.cslXml.numberofnodes(t.cslXml.children(o));l+=1)e=t.cslXml.children(o)[l],null!==t.cslXml.nodename(e)&&("date"===t.cslXml.nodename(e)&&(s.Util.fixDateNode.call(t,o,l,e),e=t.cslXml.children(o)[l]),a(e,i,r,n));r(o)}else n(e)}return a},s.Engine.prototype.buildTokenLists=function(t,e){if(this.cslXml.getNodeValue(t)){s.makeBuilder(this,e)(void 0===t.length?t:t[0])}},s.Engine.prototype.setStyleAttributes=function(){var t,e,i;(t={}).name=this.cslXml.nodename(this.cslXml.dataObj),e=this.cslXml.attributes(this.cslXml.dataObj);for(i in e)e.hasOwnProperty(i)&&s.Attributes[i].call(t,this,e[i])},s.Engine.prototype.getTerm=function(t,e,i,r,n,a){t&&t.match(/[A-Z]/)&&t===t.toUpperCase()&&(s.debug("Warning: term key is in uppercase form: "+t),t=t.toLowerCase());var o;o=a?this.opt["default-locale"][0]:this.opt.lang;var l=s.Engine.getField(s.LOOSE,this.locale[o].terms,t,e,i,r);if(l||"range-delimiter"!==t||(l="–"),void 0===l){if(n===s.STRICT)throw'Error in getTerm: term "'+t+'" does not exist.';n===s.TOLERANT&&(l="")}return l&&(this.tmp.cite_renders_content=!0),l},s.Engine.prototype.getDate=function(t,e){var i;return i=e?this.opt["default-locale"]:this.opt.lang,!!this.locale[i].dates[t]&&this.locale[i].dates[t]},s.Engine.prototype.getOpt=function(t){return void 0!==this.locale[this.opt.lang].opts[t]&&this.locale[this.opt.lang].opts[t]},s.Engine.prototype.getVariable=function(t,e,i,r){return s.Engine.getField(s.LOOSE,t,e,i,r)},s.Engine.prototype.getDateNum=function(t,e){return void 0===t?0:t[e]},s.Engine.getField=function(t,e,i,r,n,a){var o,l,u,p,h,c;o="";if(void 0!==e[i]){for(c=a&&e[i][a]?e[i][a]:e[i],l=[],"symbol"===r?l=["symbol","short"]:"verb-short"===r?l=["verb-short","verb"]:"long"!==r&&(l=[r]),h=(l=l.concat(["long"])).length,p=0;p<h;p+=1)if(u=l[p],"string"==typeof c||"number"==typeof c)o=c;else if(void 0!==c[u]){o="string"==typeof c[u]||"number"==typeof c[u]?c[u]:"number"==typeof n?c[u][n]:c[u][0];break}return o}if(t===s.STRICT)throw'Error in getField: term "'+i+'" does not exist.'},s.Engine.prototype.configureTokenLists=function(){var t,e,i;for(i=s.AREAS.length,e=0;e<i;e+=1){var r=this[t=s.AREAS[e]].tokens;this.configureTokenList(r)}return this.version=s.version,this.state},s.Engine.prototype.configureTokenList=function(t){var e,i,r,n,a,o;for(e=["year","month","day"],n=t.length-1;n>-1;n+=-1){if("date"===(i=t[n]).name&&s.END===i.tokentype&&(r=[]),"date-part"===i.name&&i.strings.name)for(o=e.length,a=0;a<o;a+=1)e[a]===i.strings.name&&r.push(i.strings.name);"date"===i.name&&s.START===i.tokentype&&(r.reverse(),i.dateparts=r),i.next=n+1,i.name&&s.Node[i.name].configure&&s.Node[i.name].configure.call(i,this,n)}},s.Engine.prototype.retrieveItems=function(t){var e;e=[];for(var i=0,s=t.length;i<s;i+=1)e.push(this.retrieveItem(""+t[i]));return e},s.ITERATION=0,s.Engine.prototype.retrieveItem=function(t){var e,i;if(this.tmp.loadedItemIDs[t])return this.registry.refhash[t];if(this.tmp.loadedItemIDs[t]=!0,this.opt.development_extensions.normalize_lang_keys_to_lowercase&&"boolean"==typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase){for(var r=0,n=this.opt["default-locale"].length;r<n;r+=1)this.opt["default-locale"][r]=this.opt["default-locale"][r].toLowerCase();for(var r=0,n=this.opt["locale-translit"].length;r<n;r+=1)this.opt["locale-translit"][r]=this.opt["locale-translit"][r].toLowerCase();for(var r=0,n=this.opt["locale-translat"].length;r<n;r+=1)this.opt["locale-translat"][r]=this.opt["locale-translat"][r].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(s.ITERATION+=1,e=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+t))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(e.multi){if(e.multi._keys)for(var a in e.multi._keys)for(var o in e.multi._keys[a])o!==o.toLowerCase()&&(e.multi._keys[a][o.toLowerCase()]=e.multi._keys[a][o],delete e.multi._keys[a][o]);if(e.multi.main)for(var a in e.multi.main)e.multi.main[a]=e.multi.main[a].toLowerCase()}for(var r=0,n=s.CREATORS.length;r>n;r+=1){var l=s.CREATORS[r];if(e[l]&&e[l].multi)for(var u=0,p=e[l].length;u<p;u+=1){var h=e[l][u];if(h.multi){if(h.multi._key)for(var o in h.multi._key)o!==o.toLowerCase()&&(h.multi._key[o.toLowerCase()]=h.multi._key[o],delete h.multi._key[o]);h.multi.main&&(h.multi.main=h.multi.main.toLowerCase())}}}}if(this.sys.getLanguageName&&e.language&&e.language){e.language=e.language.toLowerCase();var c=e.language.split("<");if(c.length>0){var f=this.sys.getLanguageName(c[0]);f&&(e["language-name"]=f)}if(2===c.length){var m=this.sys.getLanguageName(c[1]);m&&(e["language-name-original"]=m)}}e.page&&(e["page-first"]=e.page,"\\"!==(i=(""+e.page).split(/\s*(?:&|, |-|\u2013)\s*/))[0].slice(-1)&&(e["page-first"]=i[0])),this.opt.development_extensions.field_hack&&e.note&&s.parseNoteFieldHacks(e,!1,this.opt.development_extensions.allow_field_hack_date_override);for(var r=1,n=s.DATE_VARIABLES.length;r<n;r+=1){var d=e[s.DATE_VARIABLES[r]];d&&(this.opt.development_extensions.raw_date_parsing&&d.raw&&(d=this.fun.dateparser.parseDateToObject(d.raw)),e[s.DATE_VARIABLES[r]]=this.dateParseArray(d))}if(this.opt.development_extensions.static_statute_locator&&e.type&&["bill","gazette","legislation","regulation","treaty"].indexOf(e.type)>-1){var g,b=["type","title","jurisdiction","genre","volume","container-title"],_=[];for(r=0,n=b.length;r<n;r+=1)e[g=b[r]]&&_.push(e[g]);for(r=0,(b=["original-date","issued"]).length;r<n;r+=1)if(g=b[r],e[g]&&e[g].year){var v=e[g].year;_.push(v);break}e.legislation_id=_.join("::")}this.opt.development_extensions.force_jurisdiction&&"string"==typeof e.authority&&(e.authority=[{literal:e.authority}]),e["title-short"]||(e["title-short"]=e.shortTitle),this.opt.development_extensions.main_title_from_short_title&&s.extractTitleAndSubtitle(e);var y=["bill","legal_case","legislation","gazette","regulation"].indexOf(e.type)>-1;if(this.opt.development_extensions.force_jurisdiction&&y&&(e.jurisdiction||(e.jurisdiction="us")),!y&&e.title&&this.sys.getAbbreviation){e.jurisdiction||!0;x=this.transform.loadAbbreviation(e.jurisdiction,"title",e.title,e.type,!0);this.transform.abbrevs[x].title&&this.transform.abbrevs[x].title[e.title]&&(e["title-short"]=this.transform.abbrevs[x].title[e.title])}if(e["container-title-short"]||(e["container-title-short"]=e.journalAbbreviation),e["container-title"]&&this.sys.getAbbreviation){var x=this.transform.loadAbbreviation(e.jurisdiction,"container-title",e["container-title"]);this.transform.abbrevs[x]["container-title"]&&this.transform.abbrevs[x]["container-title"][e["container-title"]]&&(e["container-title-short"]=this.transform.abbrevs[x]["container-title"][e["container-title"]])}return this.registry.refhash[t]=e,e},s.Engine.prototype.setOpt=function(t,e,i){"style"===t.name||"cslstyle"===t.name?(this.opt.inheritedAttributes[e]=i,this.citation.opt.inheritedAttributes[e]=i,this.bibliography.opt.inheritedAttributes[e]=i):["citation","bibliography"].indexOf(t.name)>-1?this[t.name].opt.inheritedAttributes[e]=i:t.strings[e]=i},s.Engine.prototype.inheritOpt=function(t,e,i,s){if(void 0!==t.strings[e])return t.strings[e];var r=this[this.tmp.root].opt.inheritedAttributes[i||e];return void 0!==r?r:s},s.Engine.prototype.remapSectionVariable=function(t){for(var e=0,i=t.length;e<i;e+=1){var r=t[e][0],n=t[e][1];if(["bill","gazette","legislation","regulation","treaty"].indexOf(r.type)>-1){n.locator&&(n.locator=n.locator.trim(),(o=n.locator.match(s.STATUTE_SUBDIV_PLAIN_REGEX))||(n.label?n.locator=s.STATUTE_SUBDIV_STRINGS_REVERSE[n.label]+" "+n.locator:n.locator="p. "+n.locator));var a=null;if(r.section&&(r.section=r.section.trim(),(o=r.section.match(s.STATUTE_SUBDIV_PLAIN_REGEX))?a=o[0].trim():(r.section="sec. "+r.section,a="sec.")),r.section)if(n.locator){var o=n.locator.match(/^([^ ]*)\s*(.*)/),l=" ";o?("p."===o[1]&&"p."!==a&&(n.locator=o[2]),["[","(",".",",",";",":","?"].indexOf(n.locator.slice(0,1))>-1&&(l="")):l="",n.locator=r.section+l+n.locator}else n.locator=r.section;n.label=""}}},s.Engine.prototype.setNumberLabels=function(t){if(t.number&&["bill","gazette","legislation","regulation","treaty"].indexOf(t.type)>-1&&this.opt.development_extensions.static_statute_locator&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var e=""+t.number,i=(e=e.split("\\").join("")).split(/\s+/)[0],r=s.STATUTE_SUBDIV_STRINGS[i];if(r){var n=e.match(s.STATUTE_SUBDIV_GROUPED_REGEX),a=e.split(s.STATUTE_SUBDIV_PLAIN_REGEX);if(a.length>1){for(var o=[],l=1,u=a.length;l<u;l+=1){n[l-1].replace(/^\s*/,"");o.push(a[l].replace(/\s*$/,"").replace(/^\s*/,""))}e=o.join(" ")}else e=a[0];this.tmp.shadow_numbers.number.label=r,this.tmp.shadow_numbers.number.values.push(["Blob",e,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",e,!1]),this.tmp.shadow_numbers.number.numeric=!0}},s.substituteOne=function(t){return function(e,i){return i?t.replace("%%STRING%%",i):""}},s.substituteTwo=function(t){return function(e){var i=t.replace("%%PARAM%%",e);return function(t,e){return e?i.replace("%%STRING%%",e):""}}},s.Mode=function(t){var e,i,r,n,a,o;e={},i=s.Output.Formats[t];for(r in i)if("@"===r.slice(0,1)){if(n=!1,a=i[r],o=r.split("/"),"string"==typeof a&&a.indexOf("%%STRING%%")>-1)n=a.indexOf("%%PARAM%%")>-1?s.substituteTwo(a):s.substituteOne(a);else if("boolean"!=typeof a||a){if("function"!=typeof a)throw"CSL.Compiler: Bad "+t+" config entry for "+r+": "+a;n=a}else n=s.Output.Formatters.passthrough;1===o.length?e[o[0]]=n:2===o.length&&(e[o[0]]||(e[o[0]]={}),e[o[0]][o[1]]=n)}else e[r]=i[r];return e},s.setDecorations=function(t,e){var i,r,n;i=[];for(n in s.FORMAT_KEY_SEQUENCE)e[r=s.FORMAT_KEY_SEQUENCE[n]]&&(i.push([r,e[r]]),delete e[r]);return i},s.Doppeler=function(t,e){this.split=function(t){e&&(t=e(t));var r=t.match(i);if(!r)return{tags:[],strings:[t]};var n=t.split(s);return{tags:r,strings:n,origStrings:n.slice()}},this.join=function(t){for(var e=t.strings.slice(-1),i=t.tags.length-1;i>-1;i--)e.push(t.tags[i]),e.push(t.strings[i]);return e.reverse(),e.join("")};var i=new RegExp("("+t+")","g"),s=new RegExp(t,"g")},s.Engine.prototype.normalDecorIsOrphan=function(t,e){if("normal"===e[1]){for(var i,s=!1,r=(i="citation"===this.tmp.area?[this.citation.opt.layout_decorations].concat(t.alldecor):t.alldecor).length-1;r>-1;r+=-1)for(var n=i[r].length-1;n>-1;n+=-1)i[r][n][0]===e[0]&&"normal"!==i[r][n][1]&&(s=!0);if(!s)return!0}return!1},s.getJurisdictionNameAndSuppress=function(t,e,i){var s=null;if(i||(i=t.sys.getHumanForm(e)),i){var r=e.split(":"),n=i.split("|"),a=!1;if(1===r.length&&2===n.length?a=!0:r.length>1&&n.length===r.length&&(a=!0),a){for(var o,l=0,u=0,p=r.length;u<p;u++)o=r.slice(0,u+1).join(":"),t.opt.suppressedJurisdictions[o]&&(l=u+1);s=0===l?1===r.length?n[0]:n.join("|"):1===l&&1===r.length?"":n.slice(l).join("|")}else s=n.join("|")}else s=e;return s},s.Engine.prototype.getCitationLabel=function(t){var e="",i=this.getTrigraphParams(),r=i[0],n=this.getTerm("reference","short",0);void 0===n&&(n="reference"),n=(n=n.replace(".","")).slice(0,1).toUpperCase()+n.slice(1);for(var a=0,o=s.CREATORS.length;a<o;a+=1){var l=s.CREATORS[a];if(t[l]){var u=t[l];r=u.length>i.length?i[i.length-1]:i[u.length-1];for(var p=0,h=u.length;p<h&&p!==r.authors.length;p+=1){var c=this.nameOutput.getName(u[p],"locale-translit",!0).name;c&&c.family?n=(n=c.family).replace(/^([ \'\u2019a-z]+\s+)/,""):c&&c.literal&&(n=c.literal);var f=n.toLowerCase().match(/^(a\s+|the\s+|an\s+)/);if(f&&(n=n.slice(f[1].length)),!(n=n.replace(s.ROMANESQUE_NOT_REGEXP,"")))break;(n=n.slice(0,r.authors[p])).length>1?n=n.slice(0,1).toUpperCase()+n.slice(1).toLowerCase():1===n.length&&(n=n.toUpperCase()),e+=n}break}}if(!e&&t.title){for(var m=this.locale[this.opt.lang].opts["skip-words"],d=t.title.split(/\s+/),a=d.length-1;a>-1;a--)m.indexOf(d[a])>-1&&(d=d.slice(0,a).concat(d.slice(a+1)));var g=d.join("");(g=g.slice(0,i[0].authors[0])).length>1?g=g.slice(0,1).toUpperCase()+g.slice(1).toLowerCase():1===g.length&&(g=g.toUpperCase()),e=g}var b="0000";return t.issued&&t.issued.year&&(b=""+t.issued.year),b=b.slice(-1*r.year),e+=b},s.Engine.prototype.getTrigraphParams=function(){var t=[],e=this.opt.trigraph.split(":");if(!this.opt.trigraph||"A"!==this.opt.trigraph.slice(0,1))throw"Bad trigraph definition: "+this.opt.trigraph;for(var i=0,s=e.length;i<s;i+=1){for(var r=e[i],n={authors:[],year:0},a=0,o=r.length;a<o;a+=1)switch(r.slice(a,a+1)){case"A":n.authors.push(1);break;case"a":n.authors[n.authors.length-1]+=1;break;case"0":n.year+=1;break;default:throw"Invalid character in trigraph definition: "+this.opt.trigraph}t.push(n)}return t},s.Engine.prototype.setOutputFormat=function(t){this.opt.mode=t,this.fun.decorate=s.Mode(t),this.output[t]||(this.output[t]={},this.output[t].tmp={})},s.Engine.prototype.getSortFunc=function(){return function(t,e){return t=t.split("-"),e=e.split("-"),t.length<e.length?1:t.length>e.length?-1:(t=t.slice(-1)[0],e=e.slice(-1)[0],t.length<e.length?1:t.length>e.length?-1:0)}},s.Engine.prototype.setLangTagsForCslSort=function(t){var e,i;if(t)for(this.opt["locale-sort"]=[],e=0,i=t.length;e<i;e+=1)this.opt["locale-sort"].push(t[e]);this.opt["locale-sort"].sort(this.getSortFunc())},s.Engine.prototype.setLangTagsForCslTransliteration=function(t){var e,i;if(this.opt["locale-translit"]=[],t)for(e=0,i=t.length;e<i;e+=1)this.opt["locale-translit"].push(t[e]);this.opt["locale-translit"].sort(this.getSortFunc())},s.Engine.prototype.setLangTagsForCslTranslation=function(t){var e,i;if(this.opt["locale-translat"]=[],t)for(e=0,i=t.length;e<i;e+=1)this.opt["locale-translat"].push(t[e]);this.opt["locale-translat"].sort(this.getSortFunc())},s.Engine.prototype.setLangPrefsForCites=function(t,e){var i=this.opt["cite-lang-prefs"];e||(e=function(t){return t.toLowerCase()});for(var s=["Persons","Institutions","Titles","Journals","Publishers","Places"],r=0,n=s.length;r<n;r+=1){var a=e(s[r]),o=s[r].toLowerCase();if(t[a]){for(var l=[];t[a].length>1;)l.push(t[a].pop());var u={orig:1,translit:2,translat:3};for(2===l.length&&u[l[0]]<u[l[1]]&&l.reverse();l.length;)t[a].push(l.pop());for(var p=i[o];p.length;)p.pop();for(var h=0,c=t[a].length;h<c;h+=1)p.push(t[a][h])}}},s.Engine.prototype.setLangPrefsForCiteAffixes=function(t){if(t&&48===t.length){for(var e,i=this.opt.citeAffixes,s=0,r=["persons","institutions","titles","journals","publishers","places"],n=["translit","orig","translit","translat"],a=0,o=r.length;a<o;a+=1)for(var l=0,u=n.length;l<u;l+=1)e="",s%8==4?i[r[a]]["locale-"+n[l]].prefix||i[r[a]]["locale-"+n[l]].suffix||(e=t[s]?t[s]:"",i[r[a]]["locale-"+n[l]].prefix=e,e=t[s]?t[s+1]:"",i[r[a]]["locale-"+n[l]].suffix=e):(e=t[s]?t[s]:"",i[r[a]]["locale-"+n[l]].prefix=e,e=t[s]?t[s+1]:"",i[r[a]]["locale-"+n[l]].suffix=e),s+=2;this.opt.citeAffixes=i}},s.Engine.prototype.setAutoVietnameseNamesOption=function(t){this.opt["auto-vietnamese-names"]=!!t},s.Engine.prototype.setAbbreviations=function(t){this.sys.setAbbreviations&&this.sys.setAbbreviations(t)},s.Engine.prototype.setSuppressTrailingPunctuation=function(t){this.citation.opt.suppressTrailingPunctuation=!!t},s.Output={},s.Output.Queue=function(t){this.levelname=["top"],this.state=t,this.queue=[],this.empty=new s.Token("empty");var e={};e.empty=this.empty,this.formats=new s.Stack(e),this.current=new s.Stack(this.queue)},s.Output.Queue.prototype.pop=function(){var t=this.current.value();return t.length?t.pop():t.blobs.pop()},s.Output.Queue.prototype.getToken=function(t){return this.formats.value()[t]},s.Output.Queue.prototype.mergeTokenStrings=function(t,e){var i,r,n,a;if(i=this.formats.value()[t],r=this.formats.value()[e],n=i,r){i||((i=new s.Token(t,s.SINGLETON)).decorations=[]),n=new s.Token(t,s.SINGLETON),a="";for(a in i.strings)i.strings.hasOwnProperty(a)&&(n.strings[a]=i.strings[a]);for(a in r.strings)r.strings.hasOwnProperty(a)&&(n.strings[a]=r.strings[a]);n.decorations=i.decorations.concat(r.decorations)}return n},s.Output.Queue.prototype.addToken=function(t,e,i){var r,n;if(r=new s.Token("output"),"string"==typeof i&&(i=this.formats.value()[i]),i&&i.strings){for(n in i.strings)i.strings.hasOwnProperty(n)&&(r.strings[n]=i.strings[n]);r.decorations=i.decorations}"string"==typeof e&&(r.strings.delimiter=e),this.formats.value()[t]=r},s.Output.Queue.prototype.pushFormats=function(t){t||(t={}),t.empty=this.empty,this.formats.push(t)},s.Output.Queue.prototype.popFormats=function(t){this.formats.pop()},s.Output.Queue.prototype.startTag=function(t,e){var i={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(e=this.empty,t="empty"),i[t]=e,this.pushFormats(i),this.openLevel(t)},s.Output.Queue.prototype.endTag=function(t){this.closeLevel(t),this.popFormats()},s.Output.Queue.prototype.openLevel=function(t,e){var i,r;if("object"==typeof t)i=new s.Blob(void 0,t);else if(void 0===t)i=new s.Blob(void 0,this.formats.value().empty,"empty");else{if(!this.formats.value()||!this.formats.value()[t])throw'CSL processor error: call to nonexistent format token "'+t+'"';i=new s.Blob(void 0,this.formats.value()[t],t)}r=this.current.value(),!this.state.tmp.just_looking&&this.checkNestedBrace&&(i.strings.prefix=this.checkNestedBrace.update(i.strings.prefix)),r.push(i),this.current.push(i)},s.Output.Queue.prototype.closeLevel=function(t){t&&t!==this.current.value().levelname&&s.error("Level mismatch error:  wanted "+t+" but found "+this.current.value().levelname);var e=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(e.strings.suffix=this.checkNestedBrace.update(e.strings.suffix))},s.Output.Queue.prototype.append=function(t,e,i,r,n){var a,o,l,u=!0;if(i&&(r=!0),this.state.tmp["doing-macro-with-date"]&&!i){if("macro-with-date"!==e)return!1;"macro-with-date"===e&&(e="empty")}if(void 0===t)return!1;if("number"==typeof t&&(t=""+t),!i&&this.state.tmp.element_trace&&"suppress-me"===this.state.tmp.element_trace.value())return!1;if(o=!1,e?"literal"===e?(a=!0,u=!1):a="string"==typeof e?this.formats.value()[e]:e:a=this.formats.value().empty,!a)throw"CSL processor error: unknown format token name: "+e;if(a.strings&&void 0===a.strings.delimiter&&(a.strings.delimiter=""),"string"==typeof t&&t.length&&(t=t.replace(/ ([:;?!\u00bb])/g," $1").replace(/\u00ab /g,"« "),this.last_char_rendered=t.slice(-1),t=t.replace(/\s+'/g," '"),i||(t=t.replace(/^'/g," '")),r?i&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),o=new s.Blob(t,a),void 0===(l=this.current.value())&&0===this.current.mystack.length&&(this.current.mystack.push([]),l=this.current.value()),"string"==typeof o.blobs&&(r?i&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),i||this.state.parallel.AppendBlobPointer(l),"string"==typeof t){"string"==typeof o.blobs&&[":","!","?",".",",",";"].indexOf(o.blobs.slice(0,1))>-1&&(o.strings.prefix=o.strings.prefix+o.blobs.slice(0,1),o.blobs=o.blobs.slice(1)),o.strings["text-case"]&&(o.blobs=s.Output.Formatters[o.strings["text-case"]](this.state,t)),this.state.tmp.strip_periods&&!n&&(o.blobs=o.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var p=o.decorations.length-1;p>-1;p+=-1)"@quotes"===o.decorations[p][0]&&"false"!==o.decorations[p][1]&&(o.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),o.blobs.match(s.ROMANESQUE_REGEXP)||"@font-style"===o.decorations[p][0]&&(o.decorations=o.decorations.slice(0,p).concat(o.decorations.slice(p+1)));l.push(o),this.state.fun.flipflopper.processTags(o)}else u?l.push(o):l.push(t);return!0},s.Output.Queue.prototype.string=function(t,e,i){var r,n=s.getSafeEscape(this.state),a=e.slice(),o=[];if(0===a.length)return o;var l="";i?l=i.strings.delimiter:(t.tmp.count_offset_characters=!1,t.tmp.offset_characters=0),i&&i.new_locale&&(i.old_locale=t.opt.lang,t.opt.lang=i.new_locale);var u,p,h,c;for(v=0,y=a.length;v<y;v+=1){if((u=a[v]).strings.first_blob&&(t.tmp.count_offset_characters=u.strings.first_blob),"string"==typeof u.blobs){if("number"==typeof u.num)o.push(u);else if(u.blobs){var f=(r=n(u.blobs)).length;if(!t.tmp.suppress_decorations)for(g=0,b=u.decorations.length;g<b;g+=1)"@showid"!==(c=u.decorations[g])[0]&&(t.normalDecorIsOrphan(u,c)||(r=t.fun.decorate[c[0]][c[1]].call(u,t,r,c[2])));if(r&&r.length){if(r=n(u.strings.prefix)+r+n(u.strings.suffix),(t.opt.development_extensions.csl_reverse_lookup_support||t.sys.csl_reverse_lookup_support)&&!t.tmp.suppress_decorations)for(g=0,b=u.decorations.length;g<b;g+=1)"@showid"===(c=u.decorations[g])[0]&&(r=t.fun.decorate[c[0]][c[1]].call(u,t,r,c[2]));o.push(r),t.tmp.count_offset_characters&&(t.tmp.offset_characters+=f+u.strings.suffix.length+u.strings.prefix.length)}}}else if(u.blobs.length){var m=t.output.string(t,u.blobs,u);if(i&&"string"!==m&&m.length>1&&u.strings.delimiter)for(var d=!1,g=0,b=m.length;g<b;g++)"string"!=typeof m[g]?d=!0:d&&(m[g]=u.strings.delimiter+m[g]);o=o.concat(m)}u.strings.first_blob&&(t.registry.registry[u.strings.first_blob].offset=t.tmp.offset_characters,t.tmp.count_offset_characters=!1)}for(v=0,y=o.length-1;v<y;v+=1)"number"!=typeof o[v].num||"number"!=typeof o[v+1].num||o[v+1].UGLY_DELIMITER_SUPPRESS_HACK||(o[v].strings.suffix=o[v].strings.suffix+(l||""),o[v+1].successor_prefix="",o[v+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);var _=0;for(v=0,y=o.length;v<y;v+=1)"string"==typeof o[v]&&(_=parseInt(v,10)+1,v<o.length-1&&"object"==typeof o[v+1]&&(l&&!o[v+1].UGLY_DELIMITER_SUPPRESS_HACK&&(o[v]+=n(l)),o[v+1].UGLY_DELIMITER_SUPPRESS_HACK=!0));if(i&&(i.decorations.length||i.strings.suffix))_=o.length;else if(i&&i.strings.prefix)for(var v=0,y=o.length;v<y;v++)if(void 0!==o[v].num){_=v,0===v&&(o[v].strings.prefix=i.strings.prefix+o[v].strings.prefix);break}var x=t.output.renderBlobs(o.slice(0,_),l,!1,i);if(x&&i&&(i.decorations.length||i.strings.suffix||i.strings.prefix)){if(!t.tmp.suppress_decorations)for(v=0,y=i.decorations.length;v<y;v+=1)c=i.decorations[v],["@cite","@bibliography","@display","@showid"].indexOf(c[0])>-1||t.normalDecorIsOrphan(u,c)||"string"==typeof x&&(x=t.fun.decorate[c[0]][c[1]].call(i,t,x,c[2]));if(r=x,p=i.strings.suffix,r&&r.length&&(r=n(h=i.strings.prefix)+r+n(p),t.tmp.count_offset_characters&&(t.tmp.offset_characters+=h.length+p.length)),x=r,!t.tmp.suppress_decorations)for(v=0,y=i.decorations.length;v<y;v+=1)c=i.decorations[v],-1!==["@cite","@bibliography","@display","@showid"].indexOf(c[0])&&"string"==typeof x&&(x=t.fun.decorate[c[0]][c[1]].call(i,t,x,c[2]))}var S=o.slice(_,o.length);return!S.length&&x?o=[x]:S.length&&!x?o=S:x&&S.length&&(o=[x].concat(S)),void 0===i?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),t.tmp.suppress_decorations&&(o=t.output.renderBlobs(o,void 0,!1))):"boolean"==typeof i&&(o=t.output.renderBlobs(o,void 0,!0)),i&&i.new_locale&&(t.opt.lang=i.old_locale),o},s.Output.Queue.prototype.clearlevel=function(){var t,e,i;for(i=(t=this.current.value()).blobs.length,e=0;e<i;e+=1)t.blobs.pop()},s.Output.Queue.prototype.renderBlobs=function(t,e,i,r){var n,a,o,l,u,p,h,c,f,m,d;if(d=s.getSafeEscape(this.state),e||(e=""),n=this.state,a="",[],o="",p=t.length,"citation"===this.state.tmp.area&&!this.state.tmp.just_looking&&1===p&&"object"==typeof t[0]&&r)return t[0].strings.prefix=r.strings.prefix+t[0].strings.prefix,t[0].strings.suffix=t[0].strings.suffix+r.strings.suffix,t[0].decorations=t[0].decorations.concat(r.decorations),t[0].params=r.params,t[0];var g=!0;for(u=0;u<p;u+=1)t[u].checkNext?(t[u].checkNext(t[u+1],g),g=!1):g=!t[u+1]||!t[u+1].splice_prefix;var b=!0;for(u=t.length-1;u>0;u+=-1)t[u].checkLast?b&&t[u].checkLast(t[u-1])&&(b=!1):b=!0;for(p=t.length,u=0;u<p;u+=1)if(l=t[u],a&&(o=e),"string"==typeof l)a+=d(o),a+=l,n.tmp.count_offset_characters&&(n.tmp.offset_characters+=o.length);else if(i)a=a?[a,l]:[l];else if(l.status!==s.SUPPRESS){var _=(f=l.particle?l.particle+l.num:l.formatter.format(l.num,l.gender)).replace(/<[^>]*>/g,"").length;this.append(f,"empty",!0);var v=this.pop(),y=n.tmp.count_offset_characters;if(f=this.string(n,[v],!1),n.tmp.count_offset_characters=y,l.strings["text-case"]&&(f=s.Output.Formatters[l.strings["text-case"]](this.state,f)),f&&this.state.tmp.strip_periods&&(f=f.replace(/\.([^a-z]|$)/g,"$1")),!n.tmp.suppress_decorations)for(c=l.decorations.length,h=0;h<c;h+=1)m=l.decorations[h],n.normalDecorIsOrphan(l,m)||(f=n.fun.decorate[m[0]][m[1]].call(l,n,f,m[2]));f=d(l.strings.prefix)+f+d(l.strings.suffix);var x="";l.status===s.END?x=d(l.range_prefix):l.status===s.SUCCESSOR?x=d(l.successor_prefix):l.status===s.START?x=u>0&&!l.suppress_splice_prefix?d(l.splice_prefix):"":l.status===s.SEEN&&(x=d(l.splice_prefix)),a+=x,a+=f,n.tmp.count_offset_characters&&(n.tmp.offset_characters+=x.length+l.strings.prefix.length+_+l.strings.suffix.length)}return a},s.Output.Queue.purgeEmptyBlobs=function(t){if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length)for(var e=t.blobs.length-1;e>-1;e--){s.Output.Queue.purgeEmptyBlobs(t.blobs[e]);var i=t.blobs[e];if(!i||!i.blobs||!i.blobs.length){for(var r=[];t.blobs.length-1>e;)r.push(t.blobs.pop());for(t.blobs.pop();r.length;)t.blobs.push(r.pop())}}},s.Output.Queue.adjust=function(t){function e(t){return"number"==typeof t.num||t.blobs&&1===t.blobs.length&&"number"==typeof t.blobs[0].num}function i(t){return"number"==typeof t.num||!(!t.blobs||"object"!=typeof t.blobs)&&(!!i(t.blobs[t.blobs.length-1])||void 0)}function s(t,e){var i=!1,s=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(e&&s.push("@quotes"),t.decorations)for(var r=0,n=t.decorations.length;r<n;r++)if(s.indexOf(t.decorations[r][0])>-1){i=!0;break}return i}function r(t){if(t.decorations)for(var e=0,i=t.decorations.length;e<i;e++)if("@quotes"===t.decorations[e][0]&&"false"!==t.decorations[e][1])return!0;return"object"==typeof t.blobs&&r(t.blobs[t.blobs.length-1])}function n(t,e){var i=e.strings.suffix.slice(-1);i||"string"!=typeof e.blobs||(i=e.blobs.slice(-1));var s=_[t][i];return!(!s||1!==s.length)||"object"==typeof e.blobs&&!!n(t,e.blobs[e.blobs.length-1])}function a(t,e){if(!d[e])return!1;if("string"==typeof t.blobs)return t.blobs.slice(-1)===e;var i=t.blobs[t.blobs.length-1];return!!i&&(i.strings.suffix.slice(-1)?i.strings.suffix.slice(-1)==e:a(i,e))}function o(t,e,i,s,r){function n(){SecondStrings[s]=SecondStrings[s].slice(1)}function a(){FirstStrings[e]=FirstStrings[e].slice(0,-1)}function o(t){SecondStrings[s]=t+SecondStrings[s]}function l(t){FirstStrings[e]+=t}FirstStrings="blobs"===e?t:t.strings,SecondStrings="blobs"===s?i:i.strings;var u=FirstStrings[e].slice(-1),p=SecondStrings[s].slice(0,1),h=r?a:n,f=r?function(){return c[u]}:function(){return _[p]},m=r?function(){var t=c[u][p];"string"==typeof t?(a(),n(),o(t)):(o(u),a())}:function(){var t=_[p][u];"string"==typeof t?(a(),n(),l(t)):(l(p),n())};u===p?h():f()&&m()}function l(t){var e=t.strings.suffix.slice(0,1);if("string"==typeof t.blobs)for(;f[e];)o(t,"blobs",t,"suffix"),e=t.strings.suffix.slice(0,1);else for(;f[e];)o(t.blobs[t.blobs.length-1],"suffix",t,"suffix"),e=t.strings.suffix.slice(0,1)}function u(t){if("string"==typeof t.blobs)for(e=t.blobs.slice(-1);m[e];)o(t,"blobs",t,"suffix",!0),e=t.blobs.slice(-1);else for(var e=t.blobs[t.blobs.length-1].strings.suffix.slice(-1);m[e];)o(t.blobs[t.blobs.length-1],"suffix",t,"suffix",!0),e=t.blobs[t.blobs.length-1].strings.suffix.slice(-1)}var p={";":!0,":":!0},h={".":!0,"!":!0,"?":!0};this.upward=function(t){if(t.blobs&&"string"==typeof t.blobs)d[t.strings.suffix.slice(0,1)]&&t.strings.suffix.slice(0,1)===t.blobs.slice(-1)&&(t.strings.suffix=t.strings.suffix.slice(1));else if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length)for(var e=s(t,!0),i=t.blobs.length-1;i>-1;i--){t.blobs.length,this.upward(t.blobs[i]);var r=t.strings,n=t.blobs[i].strings;if(0===i&&(" "===r.prefix.slice(-1)&&" "===n.prefix.slice(0,1)&&(n.prefix=n.prefix.slice(1)),a=n.prefix.slice(0,1),e||!g[a]||r.prefix||(r.prefix+=a,n.prefix=n.prefix.slice(1))),i===t.blobs.length-1){var a=n.suffix.slice(-1);!e&&[" "].indexOf(a)>-1&&(r.suffix.slice(0,1)!==a&&(r.suffix=a+r.suffix),n.suffix=n.suffix.slice(0,-1))}r.delimiter&&i>0&&g[r.delimiter.slice(-1)]&&r.delimiter.slice(-1)===n.prefix.slice(0,1)&&(n.prefix=n.prefix.slice(1))}},this.leftward=function(t){if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length)for(var e=t.blobs.length-1;e>-1;e--)if(this.leftward(t.blobs[e]),e<t.blobs.length-1&&!t.strings.delimiter){var i=t.blobs[e],r=i.strings.suffix.slice(-1),n=t.blobs[e+1],a=n.strings.prefix.slice(0,1),l=s(i)||s(n),u="number"==typeof r||"number"==typeof a;if(!l&&!u&&d[a]&&!u){var p=a===i.strings.suffix.slice(-1),h=!i.strings.suffix&&"string"==typeof i.blobs&&i.blobs.slice(-1)===a;p||h?n.strings.prefix=n.strings.prefix.slice(1):o(i,"suffix",n,"prefix")}}},this.downward=function(l,u){if(l.blobs&&"string"==typeof l.blobs)d[l.strings.suffix.slice(0,1)]&&l.strings.suffix.slice(0,1)===l.blobs.slice(-1)&&(l.strings.suffix=l.strings.suffix.slice(1));else if("object"==typeof l&&"object"==typeof l.blobs&&l.blobs.length){for(var p=l.strings,h=0,c=l.blobs.length;h<c&&!e(l.blobs[h]);h++);if(p.delimiter&&d[p.delimiter.slice(0,1)]){for(var f=p.delimiter.slice(0,1),h=l.blobs.length-2;h>-1;h--)(b=l.blobs[h].strings).suffix.slice(-1)!==f&&(b.suffix+=f);p.delimiter=p.delimiter.slice(1)}for(s(l,!0),e(l),h=l.blobs.length-1;h>-1;h--){var m=l.blobs[h],b=l.blobs[h].strings,_=s(m,!0),v=e(m);if(h===l.blobs.length-1){var y=p.suffix.slice(0,1),x=!1;d[y]&&!(x=n(y,m))&&t&&(x=r(m)),x&&d[y]&&(i(m)||("string"==typeof m.blobs?o(m,"blobs",l,"suffix"):o(m,"suffix",l,"suffix"),"."===p.suffix.slice(0,1)&&(b.suffix+=p.suffix.slice(0,1),p.suffix=p.suffix.slice(1))))," "===b.suffix.slice(-1)&&" "===p.suffix.slice(0,1)&&(p.suffix=p.suffix.slice(1)),g[b.suffix.slice(0,1)]&&("string"==typeof m.blobs&&m.blobs.slice(-1)===b.suffix.slice(0,1)&&(b.suffix=b.suffix.slice(1)),b.suffix.slice(-1)===p.suffix.slice(0,1)&&(p.suffix=p.suffix.slice(0,-1))),a(l,l.strings.suffix.slice(0,1))&&(l.strings.suffix=l.strings.suffix.slice(1))}else if(p.delimiter)g[p.delimiter.slice(0,1)]&&p.delimiter.slice(0,1)===b.suffix.slice(-1)&&(l.blobs[h].strings.suffix=l.blobs[h].strings.suffix.slice(0,-1));else{var S=l.blobs[h+1].strings;e(m)||_||!g[b.suffix.slice(-1)]||b.suffix.slice(-1)!==S.prefix.slice(0,1)||(S.prefix=S.prefix.slice(1))}v||_||!d[b.suffix.slice(0,1)]||"string"!=typeof m.blobs||o(m,"blobs",m,"suffix"),this.downward(l.blobs[h])}}},this.fix=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length){for(var i,s=0,r=e.blobs.length;s<r;s++){for(var n=e.blobs[s],a=!1,o=0,p=n.decorations.length;o<p;o++){var h=n.decorations[o];"@quotes"===h[0]&&"false"!==h[1]&&(a=!0)}a&&(t?l(n):u(n)),i=this.fix(e.blobs[s]),n.blobs&&"string"==typeof n.blobs&&(i=n.blobs.slice(-1))}return i}};var c={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},f={},m={},d={},g={};for(var b in c)d[b]=!0,g[b]=!0,p[b]||(f[b]=!0),h[b]||(m[b]=!0);g[" "]=!0,g[" "]=!0;var _={};for(var b in c)for(var v in c[b])_[v]||(_[v]={}),_[v][b]=c[b][v]},s.Engine.Opt=function(){this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=s.NONE,this.bib_mode=s.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_parsing_for_plurals=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.flip_parentheses_to_braces=!0,this.development_extensions.jurisdiction_subfield=!0,this.development_extensions.static_statute_locator=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.clobber_locator_if_no_statute_section=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.allow_force_lowercase=!1,this.development_extensions.handle_parallel_articles=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.rtl_support=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0},s.Engine.Tmp=function(){this.names_max=new s.Stack,this.names_base=new s.Stack,this.givens_base=new s.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new s.Stack(0,s.LITERAL),this.element_rendered_ok=!1,this.element_trace=new s.Stack("style"),this.nameset_counter=0,this.group_context=new s.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:void 0,label_form:void 0,parallel_conditions:void 0,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new s.Stack(0,s.LITERAL),this.decorations=new s.Stack,this.tokenstore_stack=new s.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new s.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new s.AmbigConfig,this.bib_sort_keys=[],this.prefix=new s.Stack("",s.LITERAL),this.suffix=new s.Stack("",s.LITERAL),this.delimiter=new s.Stack("",s.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={}},s.Engine.Fun=function(t){this.match=new s.Util.Match,this.suffixator=new s.Util.Suffixator(s.SUFFIX_CHARS),this.romanizer=new s.Util.Romanizer,this.ordinalizer=new s.Util.Ordinalizer(t),this.long_ordinalizer=new s.Util.LongOrdinalizer},s.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new s.Stack(0,s.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1},s.Engine.Configure=function(){this.fail=[],this.succeed=[]},s.Engine.Citation=function(t){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new s.Registry.Comparifier(t,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"},s.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"},s.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="bibliography"},s.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"},s.Engine.prototype.previewCitationCluster=function(t,e,i,r){var n=this.opt.mode;this.setOutputFormat(r);var a=this.processCitationCluster(t,e,i,s.PREVIEW);return this.setOutputFormat(n),a[1]},s.Engine.prototype.appendCitationCluster=function(t){for(var e=[],i=this.registry.citationreg.citationByIndex.length,s=0;s<i;s+=1){var r=this.registry.citationreg.citationByIndex[s];e.push([""+r.citationID,r.properties.noteIndex])}return this.processCitationCluster(t,e,[])[1]},s.Engine.prototype.processCitationCluster=function(t,e,i,r){var n,a,o,l,u,p,h,c,f,m,d,g,b,_,v,y;this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[];var x={bibchange:!1};this.setCitationId(t);var S,E,I;if(r===s.PREVIEW){S=this.registry.citationreg.citationByIndex.slice(),E=this.registry.reflist.slice();var A=e.concat([[""+t.citationID,t.properties.noteIndex]]).concat(i),T={},O=[];for(a=0,o=A.length;a<o;a+=1)for(l=0,u=(n=this.registry.citationreg.citationById[A[a][0]]).citationItems.length;l<u;l+=1)T[n.citationItems[l].id]=!0,O.push(""+n.citationItems[l].id);for(I={},a=0,o=E.length;a<o;a+=1)if(!T[E[a].id]){var N=this.registry.registry[E[a].id].ambig,k=this.registry.ambigcites[N];if(k)for(l=0,u=k.length;l<u;l+=1)I[k[l]]=s.cloneAmbigConfig(this.registry.registry[k[l]].disambig)}}this.tmp.taintedCitationIDs={};var w=[],R={};for(a=0,o=t.citationItems.length;a<o;a+=1){g={};for(m in t.citationItems[a])g[m]=t.citationItems[a][m];if((d=this.retrieveItem(""+g.id)).id&&this.transform.loadAbbreviation("default","hereinafter",d.id),g=s.parseLocator.call(this,g),this.opt.development_extensions.static_statute_locator&&this.remapSectionVariable([[d,g]]),this.opt.development_extensions.locator_label_parse&&g.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(d.type)&&(!g.label||"page"===g.label)&&(v=s.LOCATOR_LABELS_REGEXP.exec(g.locator))){var C=s.LOCATOR_LABELS_MAP[v[2]];this.getTerm(C)&&(g.label=C,g.locator=v[3])}var L=[d,g];w.push(L),t.citationItems[a].item=d}t.sortedItems=w;var D=[];for(a=0,o=e.length;a<o;a+=1)n=e[a],this.registry.citationreg.citationById[n[0]].properties.noteIndex=n[1],D.push(this.registry.citationreg.citationById[n[0]]);for(D.push(t),a=0,o=i.length;a<o;a+=1)n=i[a],this.registry.citationreg.citationById[n[0]].properties.noteIndex=n[1],D.push(this.registry.citationreg.citationById[n[0]]);this.registry.citationreg.citationByIndex=D,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===s.POSITION&&(_=[],b=[],y={});var P=[];for(a=0,o=D.length;a<o;a+=1){for(D[a].properties.index=a,l=0,u=D[a].sortedItems.length;l<u;l+=1)g=D[a].sortedItems[l],this.registry.citationreg.citationsByItemId[g[1].id]||(this.registry.citationreg.citationsByItemId[g[1].id]=[],P.push(""+g[1].id)),-1===this.registry.citationreg.citationsByItemId[g[1].id].indexOf(D[a])&&this.registry.citationreg.citationsByItemId[g[1].id].push(D[a]);this.opt.update_mode===s.POSITION&&(D[a].properties.noteIndex?b.push(D[a]):(D[a].properties.noteIndex=0,_.push(D[a])))}if(r!==s.ASSUME_ALL_ITEMS_REGISTERED&&this.updateItems(P,null,null,!0),!this.opt.citation_number_sort&&w&&w.length>1&&this.citation_sort.tokens.length>0){for(a=0,o=w.length;a<o;a+=1)w[a][1].sortkeys=s.getSortKeys.call(this,w[a][0],"citation_sort");if(this.opt.grouped_sort&&!t.properties.unsorted){for(a=0,o=w.length;a<o;a+=1){var j=w[a][1].sortkeys;this.tmp.authorstring_request=!0;var q=this.registry.registry[w[a][0].id].disambig;this.tmp.authorstring_request=!0,s.getAmbiguousCite.call(this,w[a][0],q);var U=this.registry.authorstrings[w[a][0].id];this.tmp.authorstring_request=!1,w[a][1].sortkeys=[U].concat(j)}w.sort(this.citation.srt.compareCompositeKeys);var B=!1,M=!1,V=!1;for(a=0,o=w.length;a<o;a+=1)w[a][1].sortkeys[0]!==B&&(V=w[a][1].sortkeys[0],M=w[a][1].sortkeys[1]),w[a][1].sortkeys[0]=""+M+a,B=V}t.properties.unsorted||w.sort(this.citation.srt.compareCompositeKeys)}var F;if(this.opt.update_mode===s.POSITION)for(a=0;a<2;a+=1){var X={},G={};for(l=0,u=(F=[_,b][a]).length;l<u;l+=1){var z=F[l];for(F[l].properties.noteIndex||(F[l].properties.noteIndex=0),F[l].properties.noteIndex=parseInt(F[l].properties.noteIndex,10),l>0&&F[l-1].properties.noteIndex>F[l].properties.noteIndex&&(y={},X={},G={}),p=0,h=z.sortedItems.length;p<h;p+=1)this.registry.registry[z.sortedItems[p][1].id].parallel||(y[z.properties.noteIndex]?y[z.properties.noteIndex]+=1:y[z.properties.noteIndex]=1);for(p=0,h=F[l].sortedItems.length;p<h;p+=1){var H=(g=F[l].sortedItems[p])[0].id,$=g[1].locator,W=g[1].label;g[0].legislation_id&&(H=g[0].legislation_id);var Y;if(p>0&&(Y=z.sortedItems[p-1][0].legislation_id?z.sortedItems[p-1][0].legislation_id:z.sortedItems[p-1][1].id),r!==s.PREVIEW||z.citationID==t.citationID){var Q={};if(Q.position=g[1].position,Q["first-reference-note-number"]=g[1]["first-reference-note-number"],Q["near-note"]=g[1]["near-note"],g[1]["first-reference-note-number"]=0,g[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[H]&&"note"===this.opt.xclass&&this.opt.has_disambiguate){var K=this.registry.registry[H]["citation-count"],J=this.registry.citationreg.citationsByItemId[H].length;if(this.registry.registry[H]["citation-count"]=this.registry.citationreg.citationsByItemId[H].length,"number"==typeof K){if(K<2!==J<2)for(var Z=0,tt=this.registry.citationreg.citationsByItemId[H].length;Z<tt;Z++)R[this.registry.registry[H].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[H][Z].citationID]=!0}else for(var Z=0,tt=this.registry.citationreg.citationsByItemId[H].length;Z<tt;Z++)R[this.registry.registry[H].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[H][Z].citationID]=!0}var et;if(void 0===X[H])X[H]=z.properties.noteIndex,this.registry.registry[H]&&(this.registry.registry[H]["first-reference-note-number"]=z.properties.noteIndex),G[H]=z.properties.noteIndex,g[1].position=s.POSITION_FIRST;else{var it=!1,st=!1;if(l>0&&(et=F[l-1].sortedItems.slice(-1)[0][1].id,F[l-1].sortedItems[0].slice(-1)[0].legislation_id&&(et=F[l-1].sortedItems[0].slice(-1)[0].legislation_id)),l>0&&0===parseInt(p,10)&&F[l-1].properties.noteIndex!==F[l].properties.noteIndex){var rt=F[l-1].sortedItems,nt=!1,at=F[l-1].sortedItems[0][0].id;for(F[l-1].sortedItems[0][0].legislation_id&&(at=F[l-1].sortedItems[0][0].legislation_id),(at==H&&F[l-1].properties.noteIndex>=F[l].properties.noteIndex-1||F[l-1].sortedItems[0][1].id==this.registry.registry[g[1].id].parallel)&&(1!==y[F[l-1].properties.noteIndex]&&0!==F[l-1].properties.noteIndex||(nt=!0)),c=0,f=rt.slice(1).length;c<f;c+=1){var ot=rt.slice(1)[c];this.registry.registry[ot[1].id].parallel&&this.registry.registry[ot[1].id].parallel!=this.registry.registry[ot[1].id]||(nt=!1)}nt?it=!0:st=!0}else p>0&&Y==H?it=!0:0===p&&F[l-1].properties.noteIndex==F[l].properties.noteIndex&&F[l-1].sortedItems.length&&et==H?it=!0:st=!0;var lt,ut,pt,ht;if(it&&((lt=p>0?z.sortedItems[p-1][1]:F[l-1].sortedItems[0][1]).locator?(pt=lt.label?lt.label:"",ut=""+lt.locator+pt):ut=lt.locator,ht=$?""+$+(W||""):$),it&&ut&&!ht&&(it=!1,st=!0),it&&(!ut&&ht?g[1].position=s.POSITION_IBID_WITH_LOCATOR:ut||ht?ut&&ht===ut?g[1].position=s.POSITION_IBID:ut&&ht&&ht!==ut?g[1].position=s.POSITION_IBID_WITH_LOCATOR:(it=!1,st=!0):g[1].position=s.POSITION_IBID),st&&(g[1].position=s.POSITION_SUBSEQUENT),(st||it)&&X[H]!=z.properties.noteIndex&&(g[1]["first-reference-note-number"]=X[H],this.registry.registry[H])){var ct=this.registry.citationreg.citationsByItemId[H][0].properties.noteIndex,ft=z.properties.noteIndex;this.registry.registry[H]["first-reference-note-number"]=ft<ct?ft:ct}}if(z.properties.noteIndex){var mt=parseInt(z.properties.noteIndex,10)-parseInt(G[H],10);g[1].position!==s.POSITION_FIRST&&mt<=this.citation.opt["near-note-distance"]&&(g[1]["near-note"]=!0),G[H]=z.properties.noteIndex}if(z.citationID!=t.citationID)for(c=0,f=s.POSITION_TEST_VARS.length;c<f;c+=1){var dt=s.POSITION_TEST_VARS[c];g[1][dt]!==Q[dt]&&(this.registry.registry[H]&&"first-reference-note-number"===dt&&(R[this.registry.registry[H].ambig]=!0,this.tmp.taintedItemIDs[H]=!0),this.tmp.taintedCitationIDs[z.citationID]=!0)}this.sys.variableWrapper&&(g[1].index=z.properties.index,g[1].noteIndex=z.properties.noteIndex)}else void 0===X[g[1].id]?(X[H]=z.properties.noteIndex,G[H]=z.properties.noteIndex):G[H]=z.properties.noteIndex}}}if(this.opt.citation_number_sort&&w&&w.length>1&&this.citation_sort.tokens.length>0&&!t.properties.unsorted){for(a=0,o=w.length;a<o;a+=1)w[a][1].sortkeys=s.getSortKeys.call(this,w[a][0],"citation_sort");w.sort(this.citation.srt.compareCompositeKeys)}for(m in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(m)&&(F=this.registry.citationreg.citationsByItemId[m]))for(a=0,o=F.length;a<o;a+=1)this.tmp.taintedCitationIDs[F[a].citationID]=!0;var gt=[];if(r===s.PREVIEW){try{gt=this.process_CitationCluster.call(this,t.sortedItems,t.citationID)}catch(t){s.error("Error running CSL processor for preview: "+t)}for(this.registry.citationreg.citationByIndex=S,this.registry.citationreg.citationById={},a=0,o=S.length;a<o;a+=1)this.registry.citationreg.citationById[S[a].citationID]=S[a];var bt=[];for(a=0,o=E.length;a<o;a+=1)bt.push(""+E[a].id);this.updateItems(bt,null,null,!0);for(m in I)I.hasOwnProperty(m)&&(this.registry.registry[m].disambig=I[m])}else{for(var _t in R)this.disambiguate.run(_t,t);var vt;for(m in this.tmp.taintedCitationIDs)if(m!=t.citationID){var yt=this.registry.citationreg.citationById[m];if(!yt.properties.unsorted){for(a=0,o=yt.sortedItems.length;a<o;a+=1)yt.sortedItems[a][1].sortkeys=s.getSortKeys.call(this,yt.sortedItems[a][0],"citation_sort");yt.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=yt.properties.index,this.tmp.citation_note_index=yt.properties.noteIndex,this.tmp.citation_id=""+yt.citationID,(vt=[]).push(yt.properties.index),vt.push(this.process_CitationCluster.call(this,yt.sortedItems,yt.citationID)),vt.push(yt.citationID),gt.push(vt)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=t.properties.index,this.tmp.citation_note_index=t.properties.noteIndex,this.tmp.citation_id=""+t.citationID,(vt=[]).push(e.length),vt.push(this.process_CitationCluster.call(this,w,t.citationID)),vt.push(t.citationID),gt.push(vt),gt.sort(function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:0})}return x.citation_errors=this.tmp.citation_errors.slice(),[x,gt]},s.Engine.prototype.process_CitationCluster=function(t,e){return this.parallel.StartCitation(t),s.getCitationCluster.call(this,t,e)},s.Engine.prototype.makeCitationCluster=function(t){var e,i,r,n,a,o;for(e=[],n=t.length,r=0;r<n;r+=1){a={};for(var l in t[r])a[l]=t[r][l];if(o=this.retrieveItem(""+a.id),this.opt.development_extensions.locator_label_parse&&a.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(o.type)&&(!a.label||"page"===a.label)){var u=s.LOCATOR_LABELS_REGEXP.exec(a.locator);if(u){var p=s.LOCATOR_LABELS_MAP[u[2]];this.getTerm(p)&&(a.label=p,a.locator=u[3])}}a.locator&&(a.locator=(""+a.locator).replace(/\s+$/,"")),i=[o,a],e.push(i)}if(this.opt.development_extensions.static_statute_locator&&this.remapSectionVariable(e),e&&e.length>1&&this.citation_sort.tokens.length>0){for(n=e.length,r=0;r<n;r+=1)e[r][1].sortkeys=s.getSortKeys.call(this,e[r][0],"citation_sort");e.sort(this.citation.srt.compareCompositeKeys)}return this.tmp.citation_errors=[],this.parallel.StartCitation(e),s.getCitationCluster.call(this,e)},s.getAmbiguousCite=function(t,e,i,r){var n,a=this.tmp.group_context.tip,o={term_intended:a.term_intended,variable_attempt:a.variable_attempt,variable_success:a.variable_success,output_tip:a.output_tip,label_form:a.label_form,parallel_conditions:a.parallel_conditions,condition:a.condition,force_suppress:a.force_suppress,done_vars:a.done_vars.slice()};this.tmp.disambig_request=e||!1;var l={position:1,"near-note":!0};r&&(l.locator=r.locator,l.label=r.label),this.registry.registry[t.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[t.id]&&this.registry.citationreg.citationsByItemId[t.id].length&&i&&"by-cite"===this.citation.opt["givenname-disambiguation-rule"]&&(l["first-reference-note-number"]=this.registry.registry[t.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation",this.parallel.use_parallels=(!0===this.parallel.use_parallels||null===this.parallel.use_parallels)&&null,this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,s.getCite.call(this,t,l,null,!1);for(var u=0,p=this.output.queue.length;u<p;u+=1)s.Output.Queue.purgeEmptyBlobs(this.output.queue[u]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var h=0,c=this.output.queue.length;h<c;h+=1)this.output.adjust.upward(this.output.queue[h]),this.output.adjust.leftward(this.output.queue[h]),this.output.adjust.downward(this.output.queue[h]),this.output.adjust.fix(this.output.queue[h]);return n=this.output.string(this,this.output.queue),this.tmp.just_looking=!1,this.tmp.suppress_decorations=!1,this.parallel.use_parallels=null===this.parallel.use_parallels,this.tmp.group_context.replace(o),n},s.getSpliceDelimiter=function(t,e){if(t&&!this.tmp.have_collapsed&&"string"==typeof this.citation.opt["after-collapse-delimiter"])this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"];else if(this.tmp.use_cite_group_delimiter)this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter;else if(this.tmp.have_collapsed&&"in-text"===this.opt.xclass&&this.opt.update_mode!==s.NUMERIC)this.tmp.splice_delimiter=", ";else if(this.tmp.cite_locales[e-1]){var i=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[e-1]];i&&i.delimiter&&(this.tmp.splice_delimiter=i.delimiter)}else this.tmp.splice_delimiter||(this.tmp.splice_delimiter="");return this.tmp.splice_delimiter},s.getCitationCluster=function(t,e){var i,r,n,a,o,l,u,p,h,c,f,m,d,g,b,_,v,y;t=t||[],this.tmp.last_primary_names_string=!1,v=s.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",i="",r=[],this.tmp.last_suffix_used="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[],this.output.checkNestedBrace=new s.checkNestedBrace(this);var x=this.output.checkNestedBrace.update(this.citation.opt.layout_prefix),S=!1;if("note"===this.opt.xclass&&this.citation.opt.suppressTrailingPunctuation&&(S=!0),e&&this.registry.citationreg.citationById[e].properties["suppress-trailing-punctuation"]&&(S=!0),"note"===this.opt.xclass){for(var E=[],I=!1,A=!1,T=[],O=0,N=t.length;O<N;O+=1){var k=t[O][0].type,w=t[O][0].title,R=t[O][1].position,C=t[O][0].id;w&&"legal_case"===k&&C!==A&&R&&(w===I&&0!==E.length||(T=[],E.push(T)),T.push(t[O][1])),I=w,R,A=C}for(O=0,N=E.length;O<N;O+=1)if(!((T=E[O]).length<2)){var L=T.slice(-1)[0].locator;if(L)for(var D=0,P=T.length-1;D<P;D+=1)T[D].locator&&(L=!1);L&&(T[0].locator=L,delete T.slice(-1)[0].locator,T[0].label=T.slice(-1)[0].label,T.slice(-1)[0].label&&delete T.slice(-1)[0].label)}}for(n=[],a=t.length,o=0;o<a;o+=1){if(m=t[o][0],l=t[o][1],l=s.parseLocator.call(this,l),u=this.tmp.have_collapsed,p={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm){var j=this.output;this.output=new s.Output.Queue(this),this.output.adjust=new s.Output.Queue.adjust,s.getAmbiguousCite.call(this,m,null,!1,l),this.output=j}if(this.tmp.in_cite_predecessor=!1,o>0?s.getCite.call(this,m,l,""+t[o-1][0].id,!0):(this.tmp.term_predecessor=!1,s.getCite.call(this,m,l,null,!0)),this.tmp.cite_renders_content||(y={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+m.id,citationItems_pos:o,error_code:s.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(y)),o===t.length-1&&this.parallel.ComposeSet(),p.splice_delimiter=s.getSpliceDelimiter.call(this,u,o),l&&l["author-only"]&&(this.tmp.suppress_decorations=!0),o>0){var q=(_=t[o-1][1]).suffix&&[".",","].indexOf(_.suffix.slice(-1))>-1,U=!_.suffix&&l.prefix&&[".",","].indexOf(l.prefix.slice(0,1))>-1;if(q||U){var B=p.splice_delimiter.indexOf(" ");p.splice_delimiter=B>-1&&!U?p.splice_delimiter.slice(B):""}}p.suppress_decorations=this.tmp.suppress_decorations,p.have_collapsed=this.tmp.have_collapsed,n.push(p)}this.tmp.has_purged_parallel=!1,this.parallel.PruneOutputQueue(this),f=this.output.queue.slice();this.citation.opt.layout_suffix,this.citation.opt.layout_delimiter;var M=this.citation.opt.layout_suffix,V=this.tmp.cite_locales[this.tmp.cite_locales.length-1];V&&this.tmp.cite_affixes[this.tmp.area][V]&&this.tmp.cite_affixes[this.tmp.area][V].suffix&&(M=this.tmp.cite_affixes[this.tmp.area][V].suffix),s.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(M.slice(0,1))>-1&&(M=M.slice(0,1));var F=this.citation.opt.layout_delimiter;F||(F=""),s.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(F.slice(0,1))>-1&&(F=F.slice(0,1)),M=this.output.checkNestedBrace.update(M);for(var O=0,N=this.output.queue.length;O<N;O+=1)s.Output.Queue.purgeEmptyBlobs(this.output.queue[O]);if(!this.tmp.suppress_decorations&&this.output.queue.length&&(this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&"citation"===this.tmp.area||(S||(this.output.queue[this.output.queue.length-1].strings.suffix=M),this.output.queue[0].strings.prefix=x)),this.opt.development_extensions.clean_up_csl_flaws)for(var D=0,P=this.output.queue.length;D<P;D+=1)this.output.adjust.upward(this.output.queue[D]),this.output.adjust.leftward(this.output.queue[D]),this.output.adjust.downward(this.output.queue[D]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[D]);for(o=0,a=f.length;o<a;o+=1){var X=[];if(this.output.queue=[f[o]],this.tmp.suppress_decorations=n[o].suppress_decorations,this.tmp.splice_delimiter=n[o].splice_delimiter,f[o].parallel_delimiter&&(this.tmp.splice_delimiter=f[o].parallel_delimiter),this.tmp.have_collapsed=n[o].have_collapsed,h=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,"string"==typeof h)return this.tmp.suppress_decorations=!1,h;if("object"==typeof h&&0===h.length&&!l["suppress-author"])if(this.tmp.has_purged_parallel)h.push("");else{var G=0===o?v(this.citation.opt.layout_prefix):"",z=o===f.length-1?v(this.citation.opt.layout_suffix):"";h.push(G+"[CSL STYLE ERROR: reference with no printed form.]"+z)}if(X.length&&"string"==typeof h[0]){h.reverse();var H=h.pop();H&&","===H.slice(0,1)?X.push(H):"string"==typeof X.slice(-1)[0]&&","===X.slice(-1)[0].slice(-1)?X.push(" "+H):H&&X.push(v(this.tmp.splice_delimiter)+H)}else h.reverse(),void 0!==(c=h.pop())&&(X.length&&"string"==typeof X[X.length-1]&&(X[X.length-1]+=c.successor_prefix),X.push(c));for(d=h.length,g=0;g<d;g+=1)"string"!=typeof(b=h[g])?void 0!==(c=h.pop())&&X.push(c):X.push(v(this.tmp.splice_delimiter)+b);0!==X.length||t[o][1]["suppress-author"]||1,X.length>1&&"string"!=typeof X[0]&&(X=[this.output.renderBlobs(X)]),X.length&&("string"==typeof X[0]?o>0&&(f.length-1>o&&n[o+1].have_collapsed&&!n[o].have_collapsed&&(this.tmp.splice_delimiter=n[o-1].splice_delimiter),X[0]=v(this.tmp.splice_delimiter)+X[0]):X[0].splice_prefix=o>0?this.tmp.splice_delimiter:""),r=r.concat(X)}if((i+=this.output.renderBlobs(r))&&!this.tmp.suppress_decorations)for(a=this.citation.opt.layout_decorations.length,o=0;o<a;o+=1)"normal"!==(p=this.citation.opt.layout_decorations[o])[1]&&(l&&l["author-only"]||(i=this.fun.decorate[p[0]][p[1]](this,i)));return this.tmp.suppress_decorations=!1,i},s.getCite=function(t,e,i,r){var n,a;for(this.tmp.cite_renders_content=!1,this.parallel.StartCite(t,e,i),s.citeStart.call(this,t,e,r),n=0,this.tmp.name_node={},this.nameOutput=new s.NameOutput(this,t,e);n<this[this.tmp.area].tokens.length;)n=s.tokenExec.call(this,this[this.tmp.area].tokens[n],t,e);return s.citeEnd.call(this,t,e),this.parallel.CloseCite(this),this.tmp.cite_renders_content||this.tmp.just_looking||"bibliography"===this.tmp.area&&(a={index:this.tmp.bibliography_pos,itemID:""+t.id,error_code:s.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(a)),""+t.id},s.citeStart=function(t,e,i){if(i||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="","citation"===this.tmp.area&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[t.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[t.id].disambig,this.tmp.disambig_settings=this.registry.registry[t.id].disambig):this.tmp.disambig_settings=new s.AmbigConfig,"citation"!==this.tmp.area)if(this.registry.registry[t.id]){if(this.tmp.disambig_restore=s.cloneAmbigConfig(this.registry.registry[t.id].disambig),"bibliography"===this.tmp.area&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[t.id].disambig.names.slice(),this.tmp.disambig_request.names=this.registry.registry[t.id].disambig.names.slice()),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[t.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[t.id].disambig.givens.slice();for(var r=0,n=this.tmp.disambig_settings.givens.length;r<n;r+=1)this.tmp.disambig_settings.givens[r]=this.registry.registry[t.id].disambig.givens[r].slice();for(var r=0,n=this.tmp.disambig_request.givens.length;r<n;r+=1)this.tmp.disambig_request.givens[r]=this.registry.registry[t.id].disambig.givens[r].slice()}}else this.tmp.disambig_restore=new s.AmbigConfig;this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&e&&!e.position&&this.registry.registry[t.id]&&(this.tmp.disambig_restore=s.cloneAmbigConfig(this.registry.registry[t.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0},s.citeEnd=function(t,e){if(this.tmp.disambig_restore){this.registry.registry[t.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[t.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var i=0,s=this.registry.registry[t.id].disambig.givens.length;i<s;i+=1)this.registry.registry[t.id].disambig.givens[i]=this.tmp.disambig_restore.givens[i].slice()}if(this.tmp.disambig_restore=!1,e&&e.suffix?this.tmp.last_suffix_used=e.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){for(var r=[],i=this.tmp.issued_date.list.length-1;i>this.tmp.issued_date.pos;i+=-1)r.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),i=r.length-1;i>-1;i+=-1)this.tmp.issued_date.list.push(r.pop());this.parallel.use_parallels&&(this.parallel.cite.issued=!1)}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1},s.Engine.prototype.makeBibliography=function(t){var e,i,r,n,a,o,l;if(!1,!this.bibliography.tokens.length)return!1;"string"==typeof t&&(this.opt.citation_number_slug=t,t=!1),o=(e=s.getBibliographyEntries.call(this,t))[0],l=e[1];var u=e[2];for(i={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:o,bibliography_errors:this.tmp.bibliography_errors.slice(),done:u},this.bibliography.opt["second-field-align"]&&(i["second-field-align"]=this.bibliography.opt["second-field-align"]),0,n=this.registry.reflist.length,a=0;a<n;a+=1)(r=this.registry.reflist[a]).offset>i.maxoffset&&(i.maxoffset=r.offset);return this.bibliography.opt.hangingindent&&(i.hangingindent=this.bibliography.opt.hangingindent),i.bibstart=this.fun.decorate.bibstart,i.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[i,l]},s.getBibliographyEntries=function(t){function e(t,e){return t===e}function i(t,i){for(m=i.length,d=0;d<m;d+=1)if(e(t,i[d]))return!0;return!1}function r(t,s){return!("none"!==t&&t||s)||("string"==typeof s?e(t,s):!!s&&i(t,s))}var n,a,o,l,u,p,h,c,f,m,d,g,b,_,v,y,x,S,E,I;n=[],I=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,a=t&&t.page_start&&t.page_length?this.registry.getSortedIds():this.retrieveItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0,x={};var A;if(t&&t.page_start&&t.page_length&&(A=0,!0!==t.page_start))for(v=0,y=a.length;v<y&&(x[a[v]]=!0,t.page_start!=a[v]);v+=1);var T=[];for(v=0,y=a.length;v<y;v+=1){if(t&&t.page_start&&t.page_length){if(x[a[v]])continue;if(c=this.retrieveItem(a[v]),A===t.page_length)break}else if(c=a[v],x[c.id])continue;if(t){if(o=!0,t.include){for(o=!1,N=0,k=t.include.length;N<k;N+=1)if(f=t.include[N],r(f.value,c[f.field])){o=!0;break}}else if(t.exclude){for(l=!1,N=0,k=t.exclude.length;N<k;N+=1)if(f=t.exclude[N],r(f.value,c[f.field])){l=!0;break}l&&(o=!1)}else if(t.select){for(o=!1,u=!0,N=0,k=t.select.length;N<k;N+=1)r((f=t.select[N]).value,c[f.field])||(u=!1);u&&(o=!0)}if(t.quash){for(u=!0,N=0,k=t.quash.length;N<k;N+=1)r((f=t.quash[N]).value,c[f.field])||(u=!1);u&&(o=!1)}if(!o)continue}if(p=new s.Token("group",s.START),p.decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",p),c.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=c.system_id:this.output.current.value().system_id=c.id,S=[[{id:""+c.id},c]],b=[],!this.registry.registry[c.id].master||t&&t.page_start&&t.page_length)this.registry.registry[c.id].siblings||(this.parallel.StartCitation(S),this.tmp.term_predecessor=!1,b.push(""+s.getCite.call(this,c)),t&&t.page_start&&t.page_length&&(A+=1));else{for(_=!0,this.parallel.StartCitation(S),this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,b.push(""+s.getCite.call(this,c)),x[c.id]=!0,N=0,k=this.registry.registry[c.id].siblings.length;N<k;N+=1){var O=this.registry.registry[c.id].siblings[N];E=this.retrieveItem(O),b.push(""+s.getCite.call(this,E)),x[E.id]=!0}this.parallel.ComposeSet(),this.parallel.PruneOutputQueue()}I.push(""),this.tmp.bibliography_pos+=1,T.push(b),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&(_||!this.output.queue[0].blobs[0].blobs[0].strings?(g=this.output.queue[0].blobs,_=!1):g=this.output.queue[0].blobs[0].blobs,g[0].strings.prefix=this.bibliography.opt.layout_prefix+g[0].strings.prefix);for(var N=0,k=this.output.queue.length;N<k;N+=1)s.Output.Queue.purgeEmptyBlobs(this.output.queue[N]);for(var N=0,k=this.output.queue.length;N<k;N+=1)this.output.adjust.upward(this.output.queue[N]),this.output.adjust.leftward(this.output.queue[N]),this.output.adjust.downward(this.output.queue[N],!0),this.output.adjust.fix(this.output.queue[N]);if(!(h=this.output.string(this,this.output.queue)[0])&&this.opt.update_mode===s.NUMERIC){var w=n.length+1+". [CSL STYLE ERROR: reference with no printed form.]";h=s.Output.Formats[this.opt.mode]["@bibliography/entry"](this,w)}h&&n.push(h)}var R=!1;if(t&&t.page_start&&t.page_length){var C=a.slice(-1)[0],L=T.slice(-1)[0];C&&L&&C!=L||(R=!0)}return this.tmp.disambig_override=!1,[T,n,R]},s.Engine.prototype.setCitationId=function(t,e){var i,s,r;if(i=!1,!t.citationID||e){for(s=Math.floor(1e14*Math.random());;){if(r=0,!this.registry.citationreg.citationById[s]){t.citationID="a"+s.toString(32);break}s+=1===(r=!r&&s<5e13?1:-1)?1:-1}i=""+s}return this.registry.citationreg.citationById[t.citationID]=t,i},s.Engine.prototype.rebuildProcessorState=function(t,e,i){t||(t=[]),e||(e="html");for(var r={},n=[],a=0,o=t.length;a<o;a+=1)for(var l=0,u=t[a].citationItems.length;l<u;l+=1){var p=""+t[a].citationItems[l].id;r[p]||n.push(p),r[p]=!0}this.updateItems(n);var h=[],c=[],f=[],m=this.opt.mode;this.setOutputFormat(e);for(var a=0,o=t.length;a<o;a+=1){var d=this.processCitationCluster(t[a],h,c,s.ASSUME_ALL_ITEMS_REGISTERED);h.push([t[a].citationID,t[a].properties.noteIndex]);for(var l=0,u=d[1].length;l<u;l+=1){var g=d[1][l][0];f[g]=[h[g][0],h[g][1],d[1][l][1]]}}return this.updateUncitedItems(i),this.setOutputFormat(m),f},s.Engine.prototype.restoreProcessorState=function(t){var e,i,r,n,a,o,l,u,p,h;u=[],p=[],t||(t=[]);var c=[],f={};for(e=0,i=t.length;e<i;e+=1)f[t[e].citationID]&&this.setCitationId(t[e],!0),f[t[e].citationID]=!0,c.push(t[e].properties.index);var m=t.slice();for(m.sort(function(t,e){return t.properties.index<e.properties.index?-1:t.properties.index>e.properties.index?1:0}),e=0,i=m.length;e<i;e+=1)m[e].properties.index=e;for(e=0,i=m.length;e<i;e+=1){for(h=[],r=0,n=m[e].citationItems.length;r<n;r+=1)void 0===(a=m[e].citationItems[r]).sortkeys&&(a.sortkeys=[]),l=[o=this.retrieveItem(""+a.id),a],h.push(l),m[e].citationItems[r].item=o,p.push(""+a.id);m[e].properties.unsorted||h.sort(this.citation.srt.compareCompositeKeys),m[e].sortedItems=h,this.registry.citationreg.citationById[m[e].citationID]=m[e]}for(this.updateItems(p),e=0,i=t.length;e<i;e+=1)u.push([""+t[e].citationID,t[e].properties.noteIndex]);var d=[];return t&&t.length?d=this.processCitationCluster(t[0],[],u.slice(1)):(this.registry=new s.Registry(this),this.tmp=new s.Engine.Tmp,this.disambiguate=new s.Disambiguation(this)),d},s.Engine.prototype.updateItems=function(t,e,i,s){var r=this.tmp.area,n=this.tmp.root,a=this.tmp.extension;if(this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",s||(this.tmp.loadedItemIDs={}),this.registry.init(t),i)for(var o in this.registry.ambigcites)this.registry.ambigsTouched[o]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(),this.registry.setsortkeys(),this.registry.setdisambigs(),e||this.registry.sorttokens(),this.registry.renumber(),this.tmp.extension=a,this.tmp.area=r,this.tmp.root=n,this.registry.getSortedIds()},s.Engine.prototype.updateUncitedItems=function(t,e){var i=this.tmp.area,s=this.tmp.root,r=this.tmp.extension;if(this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},t||(t=[]),"object"==typeof t)if(void 0===t.length){a=t;t=[];for(var n in a)t.push(n)}else if("number"==typeof t.length)for(var a={},o=0,l=t.length;o<l;o+=1)a[t[o]]=!0;return this.registry.init(t,!0),this.registry.dopurge(a),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(),this.registry.setsortkeys(),this.registry.setdisambigs(),e||this.registry.sorttokens(),this.registry.renumber(),this.tmp.extension=r,this.tmp.area=i,this.tmp.root=s,this.registry.getSortedIds()},s.localeResolve=function(t,e){var i,r;return e||(e="en-US"),t||(t=e),i={},r=t.split(/[\-_]/),i.base=s.LANG_BASES[r[0]],void 0===i.base?{base:e,best:t,bare:r[0]}:(1===r.length&&(i.generic=!0),1===r.length||"x"===r[1]?i.best=i.base.replace("_","-"):i.best=r.slice(0,2).join("-"),i.base=i.base.replace("_","-"),i.bare=r[0],i)},s.Engine.prototype.localeConfigure=function(t,e){var i;if((!e||!this.locale[t.best])&&(i=s.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(i,"en-US",t.best),"en-US"!==t.best&&(t.base!==t.best&&(i=s.setupXml(this.sys.retrieveLocale(t.base)),this.localeSet(i,t.base,t.best)),i=s.setupXml(this.sys.retrieveLocale(t.best)),this.localeSet(i,t.best,t.best)),this.localeSet(this.cslXml,"",t.best),this.localeSet(this.cslXml,t.bare,t.best),t.base!==t.best&&this.localeSet(this.cslXml,t.base,t.best),this.localeSet(this.cslXml,t.best,t.best),void 0===this.locale[t.best].terms["page-range-delimiter"]&&(["fr","pt"].indexOf(t.best.slice(0,2).toLowerCase())>-1?this.locale[t.best].terms["page-range-delimiter"]="-":this.locale[t.best].terms["page-range-delimiter"]="–"),void 0===this.locale[t.best].terms["year-range-delimiter"]&&(this.locale[t.best].terms["year-range-delimiter"]="–"),void 0===this.locale[t.best].terms["citation-range-delimiter"]&&(this.locale[t.best].terms["citation-range-delimiter"]="–"),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var r=["default-locale","locale-sort","locale-translit","locale-translat"],n=0,a=r.length;n<a;n+=1)for(var o=0,l=this.opt[r[n]].length;o<l;o+=1)this.opt[r[n]][o]=this.opt[r[n]][o].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}},s.Engine.prototype.localeSet=function(t,e,i){var r,n,a,o,l,u,p,h,c,f,m,d,g,b;if(e=e.replace("_","-"),i=i.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(e=e.toLowerCase(),i=i.toLowerCase()),this.locale[i]||(this.locale[i]={},this.locale[i].terms={},this.locale[i].opts={},this.locale[i].opts["skip-words"]=s.SKIP_WORDS,this.locale[i].opts["leading-noise-words"]||(this.locale[i].opts["leading-noise-words"]=[]),this.locale[i].dates={},this.locale[i].ord={"1.0.1":!1,keys:{}},this.locale[i]["noun-genders"]={}),n=t.makeXml(),t.nodeNameIs(t.dataObj,"locale"))n=t.dataObj;else for(a=t.getNodesByName(t.dataObj,"locale"),l=0,d=t.numberofnodes(a);l<d;l+=1)if(r=a[l],t.getAttributeValue(r,"lang","xml")===e){n=r;break}for(a=t.getNodesByName(n,"type"),D=0,P=t.numberofnodes(a);D<P;D+=1){var _=a[D],v=t.getAttributeValue(_,"name"),y=t.getAttributeValue(_,"gender");this.opt.gender[v]=y}if(t.getNodesByName(n,"term","ordinal").length){for(var x in this.locale[i].ord.keys)delete this.locale[i].terms[x];this.locale[i].ord={"1.0.1":!1,keys:{}}}a=t.getNodesByName(n,"term");var S={"last-digit":{},"last-two-digits":{},"whole-number":{}},E=!1,I={};for(l=0,d=t.numberofnodes(a);l<d;l+=1){if(u=a[l],"sub verbo"===(h=t.getAttributeValue(u,"name"))&&(h="sub-verbo"),"ordinal"===h.slice(0,7)){t.getNodeValue(u);if("ordinal"===h)E=!0;else{var A=t.getAttributeValue(u,"match"),T=h.slice(8);(g=t.getAttributeValue(u,"gender-form"))||(g="neuter"),A||(A="last-two-digits","0"===T.slice(0,1)&&(A="last-digit")),"0"===T.slice(0,1)&&(T=T.slice(1)),S[A][T]||(S[A][T]={}),S[A][T][g]=h}this.locale[i].ord.keys[h]=!0}void 0===this.locale[i].terms[h]&&(this.locale[i].terms[h]={}),p="long",g=!1,t.getAttributeValue(u,"form")&&(p=t.getAttributeValue(u,"form")),t.getAttributeValue(u,"gender-form")&&(g=t.getAttributeValue(u,"gender-form")),t.getAttributeValue(u,"gender")&&(this.locale[i]["noun-genders"][h]=t.getAttributeValue(u,"gender")),g?(this.locale[i].terms[h][g]={},this.locale[i].terms[h][g][p]=[],b=this.locale[i].terms[h][g],I[h]=!0):(this.locale[i].terms[h][p]=[],b=this.locale[i].terms[h]),t.numberofnodes(t.getNodesByName(u,"multiple"))?(b[p][0]=t.getNodeValue(u,"single"),b[p][0].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0),b[p][1]=t.getNodeValue(u,"multiple"),b[p][1].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0)):(b[p]=t.getNodeValue(u),b[p].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0))}if(E){for(var O in I){var N={},k=0;for(var w in this.locale[i].terms[O])["masculine","feminine"].indexOf(w)>-1?N[w]=this.locale[i].terms[O][w]:k+=1;if(!k)if(N.feminine)for(var w in N.feminine)this.locale[i].terms[O][w]=N.feminine[w];else if(N.masculine)for(var w in N.masculine)this.locale[i].terms[O][w]=N.masculine[w]}this.locale[i].ord["1.0.1"]=S}for(h in this.locale[i].terms)for(D=0,P=2;D<P;D+=1)if(g=s.GENDERS[D],this.locale[i].terms[h][g])for(p in this.locale[i].terms[h])this.locale[i].terms[h][g][p]||(this.locale[i].terms[h][g][p]=this.locale[i].terms[h][p]);for(a=t.getNodesByName(n,"style-options"),l=0,d=t.numberofnodes(a);l<d;l+=1){c=a[l],o=t.attributes(c);for(m in o)if(o.hasOwnProperty(m))if("@punctuation-in-quote"===m||"@limit-day-ordinals-to-day-1"===m)"true"===o[m]?this.locale[i].opts[m.slice(1)]=!0:this.locale[i].opts[m.slice(1)]=!1;else if("@jurisdiction-preference"===m){var R=o[m].split(/\s*,\s*/);this.locale[i].opts[m.slice(1)]=R}else if("@skip-words"===m){var C=o[m].split(/\s*,\s*/);this.locale[i].opts[m.slice(1)]=C}else if("@leading-noise-words"===m){var L=o[m].split(/\s*,\s*/);this.locale[i].opts["leading-noise-words"]=L}else if("@name-as-sort-order"===m){this.locale[i].opts["name-as-sort-order"]={};for(var D=0,P=(j=o[m].split(/\s+/)).length;D<P;D+=1)this.locale[i].opts["name-as-sort-order"][j[D]]=!0}else if("@name-as-reverse-order"===m){this.locale[i].opts["name-as-reverse-order"]={};for(var D=0,P=(j=o[m].split(/\s+/)).length;D<P;D+=1)this.locale[i].opts["name-as-reverse-order"][j[D]]=!0}else if("@name-never-short"===m){this.locale[i].opts["name-never-short"]={};for(var j=o[m].split(/\s+/),D=0,P=j.length;D<P;D+=1)this.locale[i].opts["name-never-short"][j[D]]=!0}}for(a=t.getNodesByName(n,"date"),l=0,d=t.numberofnodes(a);l<d;l+=1)f=a[l],this.locale[i].dates[t.getAttributeValue(f,"form")]=f},s.getLocaleNames=function(t,e){function i(t,e){var i=["base","best"];if(e){normalizedLocale=s.localeResolve(e);for(var r=0,n=i.length;r<n;r++)normalizedLocale[i[r]]&&-1===t.indexOf(normalizedLocale[i[r]])&&t.push(normalizedLocale[i[r]])}}var r=s.setupXml(t),n=["en-US"];i(n,e);var a=r.getNodesByName(r.dataObj,"style")[0],o=r.getAttributeValue(a,"default-locale");i(n,o);for(var l=["layout","if","else-if","condition"],u=0,p=l.length;u<p;u++)!function(t){for(var e=r.getNodesByName(r.dataObj,t),i=0,s=e.length;i<s;i++){var a=r.getAttributeValue(e[i],"locale");if(a)for(var o=0,l=(a=a.split(/ +/)).length;o<l;o++)this.extendLocaleList(n,a[o])}}(r);return n},s.Node={},s.Node.bibliography={build:function(t,e){if(this.tokentype===s.START){t.build.area="bibliography",t.build.root="bibliography",t.build.extension="";var i=function(t,e){t.tmp.area="bibliography",t.tmp.root="bibliography",t.tmp.extension=""};this.execs.push(i)}e.push(this)}},s.Node.choose={build:function(t,e){var i;this.tokentype===s.START&&(i=function(t,e){t.tmp.jump.push(void 0,s.LITERAL)}),this.tokentype===s.END&&(i=function(t,e){t.tmp.jump.pop()}),this.execs.push(i),e.push(this)},configure:function(t,e){this.tokentype===s.END?(t.configure.fail.push(e),t.configure.succeed.push(e)):(t.configure.fail.pop(),t.configure.succeed.pop())}},s.Node.citation={build:function(t,e){if(this.tokentype===s.START){t.build.area="citation",t.build.root="citation",t.build.extension="";var i=function(t,e){t.tmp.area="citation",t.tmp.root="citation",t.tmp.extension=""};this.execs.push(i)}if(this.tokentype===s.END){if(t.opt.grouped_sort="in-text"===t.opt.xclass&&t.citation.opt.collapse&&t.citation.opt.collapse.length||t.citation.opt.cite_group_delimiter&&t.citation.opt.cite_group_delimiter.length&&t.opt.update_mode!==s.POSITION&&t.opt.update_mode!==s.NUMERIC,t.opt.grouped_sort&&t.citation_sort.opt.sort_directions.length){var r=t.citation_sort.opt.sort_directions[0].slice();t.citation_sort.opt.sort_directions=[r].concat(t.citation_sort.opt.sort_directions)}t.citation.srt=new s.Registry.Comparifier(t,"citation_sort")}e.push(this)}},s.Node["#comment"]={build:function(t,e){}},s.Node.date={build:function(t,e){var i,r,n,a,o,l,u,p,h,c;this.tokentype!==s.START&&this.tokentype!==s.SINGLETON||(t.build.date_parts=[],t.build.date_variables=this.variables,t.build.extension||s.Util.substituteStart.call(this,t,e),i=t.build.extension?s.dateMacroAsSortKey:function(t,e,i){var s;if(t.tmp.element_rendered_ok=!1,t.tmp.donesies=[],t.tmp.dateparts=[],s=[],!this.variables.length||t.tmp.just_looking&&"accessed"===this.variables[0])t.tmp.date_object=!1;else{for(void 0===(r=e[this.variables[0]])&&(r={"date-parts":[[0]]},t.opt.development_extensions.locator_date_and_revision&&i&&"locator-date"===this.variables[0]&&i["locator-date"]&&(r=i["locator-date"])),t.tmp.date_object=r,n=this.dateparts.length,a=0;a<n;a+=1)o=this.dateparts[a],void 0!==t.tmp.date_object[o+"_end"]?s.push(o):"month"===o&&void 0!==t.tmp.date_object.season_end&&s.push(o);for(l=[],n=(u=["year","month","day"]).length,a=0;a<n;a+=1)s.indexOf(u[a])>-1&&l.push(u[a]);for(s=l.slice(),p=2,n=s.length,a=0;a<n;a+=1)if(o=s[a],h=t.tmp.date_object[o],c=t.tmp.date_object[o+"_end"],h!==c){p=a;break}t.tmp.date_collapse_at=s.slice(p)}},this.execs.push(i),i=function(t,e){if(e[this.variables[0]]&&(t.parallel.StartVariable(this.variables[0]),t.output.startTag("date",this),"issued"===this.variables[0]&&"legal_case"===e.type&&!t.tmp.extension&&""+e["collection-number"]==""+t.tmp.date_object.year&&1===this.dateparts.length&&"year"===this.dateparts[0]))for(var i in t.tmp.date_object)if(t.tmp.date_object.hasOwnProperty(i)&&"year"===i.slice(0,4)){t.tmp.issued_date={};var s=t.output.current.mystack.slice(-2)[0].blobs;t.tmp.issued_date.list=s,t.tmp.issued_date.pos=s.length-1}},this.execs.push(i)),t.build.extension||this.tokentype!==s.END&&this.tokentype!==s.SINGLETON||(i=function(t,e){e[this.variables[0]]&&(t.output.endTag(),t.parallel.CloseVariable(this.variables[0]))},this.execs.push(i)),e.push(this),this.tokentype!==s.END&&this.tokentype!==s.SINGLETON||t.build.extension||s.Util.substituteEnd.call(this,t,e)}},s.Node["date-part"]={build:function(t,e){var i,r,n,a,o,l,u,p,h,c,f,m,d,g,b,_,v,y,x,S,E,I,A,T;this.strings.form||(this.strings.form="long"),t.build.date_parts.push(this.strings.name);var O=t.build.date_variables[0];i=function(t,e){if(t.tmp.date_object){if(a=!0,o="",l="",t.tmp.donesies.push(this.strings.name),t.tmp.date_object.literal&&"year"===this.strings.name&&(t.parallel.AppendToVariable(t.tmp.date_object.literal),t.output.append(t.tmp.date_object.literal,this)),t.tmp.date_object&&(o=t.tmp.date_object[this.strings.name],l=t.tmp.date_object[this.strings.name+"_end"]),"year"!==this.strings.name||0!==o||t.tmp.suppress_decorations||(o=!1),u=!t.tmp.suppress_decorations,p=t.tmp.have_collapsed,h="year-suffix"===t[t.tmp.area].opt.collapse||"year-suffix-ranged"===t[t.tmp.area].opt.collapse,c=t.opt["disambiguate-add-year-suffix"],u&&c&&h&&(t.tmp.years_used.push(o),(f=t.tmp.last_years_used.length>=t.tmp.years_used.length)&&p&&t.tmp.last_years_used[t.tmp.years_used.length-1]===o&&(o=!1)),void 0!==o){m=!1,d=!1,g=!1,b=!1,"year"===this.strings.name&&(parseInt(o,10)<500&&parseInt(o,10)>0&&(d=t.getTerm("ad")),parseInt(o,10)<0&&(m=t.getTerm("bc"),o=-1*parseInt(o,10)),l&&(parseInt(l,10)<500&&parseInt(l,10)>0&&(b=t.getTerm("ad")),parseInt(l,10)<0&&(g=t.getTerm("bc"),l=-1*parseInt(l,10)))),t.parallel.AppendToVariable(o);for(var i=""+t.tmp.date_object.month;i.length<2;)i="0"+i;i="month-"+i;var N=t.locale[t.opt.lang]["noun-genders"][i];if(this.strings.form){var k=this.strings.form;if("day"===this.strings.name&&"ordinal"===k&&t.locale[t.opt.lang].opts["limit-day-ordinals-to-day-1"]&&""+o!="1"&&(k="numeric"),o=s.Util.Dates[this.strings.name][k](t,o,N,this.default_locale),"month"===this.strings.name)if(t.tmp.strip_periods)o=o.replace(/\./g,"");else for(A=0,T=this.decorations.length;A<T;A+=1)if("@strip-periods"===this.decorations[A][0]&&"true"===this.decorations[A][1]){o=o.replace(/\./g,"");break}if(l)if(l=s.Util.Dates[this.strings.name][k](t,l,N,"accessed"===O,"_end"),t.tmp.strip_periods)l=l.replace(/\./g,"");else for(A=0,T=this.decorations.length;A<T;A+=1)if("@strip-periods"===this.decorations[A][0]&&"true"===this.decorations[A][1]){l=l.replace(/\./g,"");break}}if(t.output.openLevel("empty"),t.tmp.date_collapse_at.length){for(_=!0,n=t.tmp.date_collapse_at.length,r=0;r<n;r+=1)if(I=t.tmp.date_collapse_at[r],-1===t.tmp.donesies.indexOf(I)){_=!1;break}if(_){if(""+l!="0"){if(0===t.dateput.queue.length&&(a=!0),t.opt["year-range-format"]&&"expanded"!==t.opt["year-range-format"]&&!t.tmp.date_object.day&&!t.tmp.date_object.month&&!t.tmp.date_object.season&&"year"===this.strings.name&&o&&l){l=t.fun.year_mangler(o+"-"+l,!0);var w=t.getTerm("year-range-delimiter");l=l.slice(l.indexOf(w)+1)}t.dateput.append(l,this),a&&(t.dateput.current.value()[0].strings.prefix="")}t.output.append(o,this),(v=t.output.current.value()).blobs[v.blobs.length-1].strings.suffix="",t.output.append(t.getTerm("year-range-delimiter"),"empty"),y=t.dateput.current.value(),v.blobs=v.blobs.concat(y),t.dateput.string(t,t.dateput.queue),t.tmp.date_collapse_at=[]}else t.output.append(o,this),t.tmp.date_collapse_at.indexOf(this.strings.name)>-1&&""+l!="0"&&(0===t.dateput.queue.length&&(a=!0),t.dateput.openLevel("empty"),t.dateput.append(l,this),a&&(t.dateput.current.value().blobs[0].strings.prefix=""),m&&t.dateput.append(m),d&&t.dateput.append(d),t.dateput.closeLevel())}else t.output.append(o,this);m&&t.output.append(m),d&&t.output.append(d),t.output.closeLevel()}else"month"===this.strings.name&&t.tmp.date_object.season&&((o=""+t.tmp.date_object.season)&&o.match(/^[1-4]$/)?(t.tmp.group_context.tip.variable_success=!0,t.output.append(t.getTerm("season-0"+o),this)):o&&t.output.append(o,this));t.tmp.value=[],!e[O]||!o&&!t.tmp.have_collapsed||t.opt.has_year_suffix||"year"!==this.strings.name||t.tmp.just_looking||t.registry.registry[e.id]&&!1!==t.registry.registry[e.id].disambig.year_suffix&&!t.tmp.has_done_year_suffix&&(t.tmp.has_done_year_suffix=!0,S=parseInt(t.registry.registry[e.id].disambig.year_suffix,10),x=new s.NumericBlob(!1,S,this,e.id),this.successor_prefix=t[t.build.area].opt.layout_delimiter,this.splice_prefix=t[t.build.area].opt.layout_delimiter,E=new s.Util.Suffixator(s.SUFFIX_CHARS),x.setFormatter(E),"year-suffix-ranged"===t[t.tmp.area].opt.collapse&&(x.range_prefix=t.getTerm("citation-range-delimiter")),t[t.tmp.area].opt.cite_group_delimiter?x.successor_prefix=t[t.tmp.area].opt.cite_group_delimiter:t[t.tmp.area].opt["year-suffix-delimiter"]?x.successor_prefix=t[t.tmp.area].opt["year-suffix-delimiter"]:x.successor_prefix=t[t.tmp.area].opt.layout_delimiter,x.UGLY_DELIMITER_SUPPRESS_HACK=!0,t.output.append(x,"literal"))}},this.execs.push(i),e.push(this)}},s.Node["else-if"]={build:function(t,e){s.Conditions.TopNode.call(this,t,e),e.push(this)},configure:function(t,e){s.Conditions.Configure.call(this,t,e)}},s.Node.else={build:function(t,e){e.push(this)},configure:function(t,e){this.tokentype===s.START&&(t.configure.fail[t.configure.fail.length-1]=e)}},s.Node["et-al"]={build:function(t,e){if("citation"===t.build.area||"bibliography"===t.build.area){var i=function(t,e,i){t.tmp.etal_node=this,"string"==typeof this.strings.term&&(t.tmp.etal_term=this.strings.term)};this.execs.push(i)}e.push(this)}},s.Node.group={build:function(t,e,i){var r,n;if(this.realGroup=i,this.tokentype===s.START&&(s.Util.substituteStart.call(this,t,e),t.build.substitute_level.value()&&t.build.substitute_level.replace(t.build.substitute_level.value()+1),this.juris||e.push(this),r=function(t,e){if(t.output.startTag("group",this),this.strings.label_form_override&&(t.tmp.group_context.tip.label_form||(t.tmp.group_context.tip.label_form=this.strings.label_form_override)),this.realGroup){var i=!1,s=!1;t.tmp.group_context.mystack.length&&(t.output.current.value().parent=t.tmp.group_context.tip.output_tip);var r=t.tmp.group_context.tip.label_form;r||(r=this.strings.label_form_override),t.tmp.group_context.tip.condition?(i=t.tmp.group_context.tip.condition,s=t.tmp.group_context.tip.force_suppress):this.strings.reject?(i={test:this.strings.reject,not:!0},s=!0,done_vars=[]):this.strings.require&&(i={test:this.strings.require,not:!1},done_vars=[]),t.tmp.group_context.push({term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:t.tmp.group_context.tip.variable_success,output_tip:t.output.current.tip,label_form:r,parallel_conditions:this.strings.set_parallel_condition,condition:i,force_suppress:s,done_vars:t.tmp.group_context.tip.done_vars.slice()})}},(n=[]).push(r),this.execs=n.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(t.build["publisher-special"]=!0,r=function(t,e){if(this.strings["subgroup-delimiter"]&&e.publisher&&e["publisher-place"]){var i=e.publisher.split(/;\s*/),r=e["publisher-place"].split(/;\s*/);i.length>1&&i.length===r.length&&(t.publisherOutput=new s.PublisherOutput(t,this),t.publisherOutput["publisher-list"]=i,t.publisherOutput["publisher-place-list"]=r)}},this.execs.push(r)),this.juris)){for(var a=0,o=e.length;a<o;a++)e[a];var l=new s.Token("choose",s.START);s.Node.choose.build.call(l,t,e);var u=new s.Token("if",s.START);r=function(e){return function(i){if(!t.sys.retrieveStyleModule||!s.MODULE_MACROS[e]||!i.jurisdiction)return!1;var r=t.getJurisdictionList(i.jurisdiction);if(!t.opt.jurisdictions_seen[r[0]]){var n=t.retrieveAllStyleModules(r);for(var a in n){t.juris[a]={};for(var o=s.setupXml(n[a]),l=o.getNodesByName(o.dataObj,"law-module"),u=0,p=l.length;u<p;u++){var h=o.getAttributeValue(l[u],"types");if(h){t.juris[a].types={};for(var c=0,f=(h=h.split(/\s+/)).length;c<f;c++)t.juris[a].types[h[c]]=!0}}t.juris[a].types||(t.juris[a].types=s.MODULE_TYPES);for(var u=0,p=(l=o.getNodesByName(o.dataObj,"macro")).length;u<p;u++){var m=o.getAttributeValue(l[u],"name");s.MODULE_MACROS[m]?(0,t.juris[a][m]=[],t.buildTokenLists(l[u],t.juris[a][m]),t.configureTokenList(t.juris[a][m])):s.debug('CSL: skipping non-modular macro name "'+m+'" in module context')}}}for(var u=0,p=r.length;u<p;u++){a=r[u];if(t.juris[a]&&t.juris[a].types[i.type])return i["best-jurisdiction"]=a,!0}return!1}}(this.juris),u.tests.push(r),u.test=t.fun.match.any(u,t,u.tests),e.push(u);var p=new s.Token("text",s.SINGLETON);r=function(t,e,i){var r=0;if(t.juris[e["best-jurisdiction"]][this.juris])for(;r<t.juris[e["best-jurisdiction"]][this.juris].length;)r=s.tokenExec.call(t,t.juris[e["best-jurisdiction"]][this.juris][r],e,i)},p.juris=this.juris,p.execs.push(r),e.push(p);var h=new s.Token("if",s.END);s.Node.if.build.call(h,t,e);var c=new s.Token("else",s.START);s.Node.else.build.call(c,t,e)}if(this.tokentype===s.END&&(t.build["publisher-special"]&&(t.build["publisher-special"]=!1,"string"==typeof t[t.build.root].opt["name-delimiter"]&&(r=function(t,e){t.publisherOutput&&(t.publisherOutput.render(),t.publisherOutput=!1)},this.execs.push(r))),r=function(t,e){if(t.output.endTag(),this.realGroup){var i=t.tmp.group_context.pop();if(t.tmp.group_context.tip.condition&&(t.tmp.group_context.tip.force_suppress=i.force_suppress),!i.force_suppress&&(i.variable_success||i.term_intended&&!i.variable_attempt)){this.isJurisLocatorLabel||(t.tmp.group_context.tip.variable_success=!0);var s=t.output.current.value().blobs,r=t.output.current.value().blobs.length-1;if(!t.tmp.just_looking&&void 0!==i.parallel_conditions){var n={blobs:s,conditions:i.parallel_conditions,id:e.id,pos:r};t.parallel.parallel_conditional_blobs_list.push(n)}}else{if(t.tmp.group_context.tip.variable_attempt=i.variable_attempt,i.force_suppress&&!t.tmp.group_context.tip.condition){t.tmp.group_context.tip.variable_attempt=!0,t.tmp.group_context.tip.variable_success=i.variable_success_parent;for(var a=0,o=i.done_vars.length;a<o;a++)t.tmp.done_vars.indexOf(i.done_vars[a])>-1&&(t.tmp.done_vars=t.tmp.done_vars.slice(0,a).concat(t.tmp.done_vars.slice(a+1)))}t.output.current.value().blobs&&t.output.current.value().blobs.pop()}}},this.execs.push(r),this.juris)){var f=new s.Token("else",s.END);s.Node.else.build.call(f,t,e);var m=new s.Token("choose",s.END);s.Node.choose.build.call(m,t,e)}this.tokentype===s.END&&(this.juris||e.push(this),t.build.substitute_level.value()&&t.build.substitute_level.replace(t.build.substitute_level.value()-1),s.Util.substituteEnd.call(this,t,e))}},s.Node.if={build:function(t,e){s.Conditions.TopNode.call(this,t,e),e.push(this)},configure:function(t,e){s.Conditions.Configure.call(this,t,e)}},s.Node.conditions={build:function(t,e){this.tokentype===s.START&&t.tmp.conditions.addMatch(this.match),this.tokentype===s.END&&t.tmp.conditions.matchCombine()}},s.Node.condition={build:function(t,e){if(this.tokentype===s.SINGLETON){var i=t.fun.match[this.match](this,t,this.tests);t.tmp.conditions.addTest(i)}}},s.Conditions={},s.Conditions.TopNode=function(t,e){var i;this.tokentype!==s.START&&this.tokentype!==s.SINGLETON||(this.locale&&(t.opt.lang=this.locale),this.tests&&this.tests.length?this.test=t.fun.match[this.match](this,t,this.tests):t.tmp.conditions=new s.Conditions.Engine(t,this)),this.tokentype!==s.END&&this.tokentype!==s.SINGLETON||(i=function(t,e){return this.locale_default&&(t.output.current.value().old_locale=this.locale_default,t.output.closeLevel("empty"),t.opt.lang=this.locale_default),this[t.tmp.jump.value()]},this.execs.push(i),this.locale_default&&(t.opt.lang=this.locale_default))},s.Conditions.Configure=function(t,e){this.tokentype===s.START?(this.fail=t.configure.fail.slice(-1)[0],this.succeed=this.next,t.configure.fail[t.configure.fail.length-1]=e):this.tokentype===s.SINGLETON?(this.fail=this.next,this.succeed=t.configure.succeed.slice(-1)[0],t.configure.fail[t.configure.fail.length-1]=e):(this.succeed=t.configure.succeed.slice(-1)[0],this.fail=this.next)},s.Conditions.Engine=function(t,e){this.token=e,this.state=t},s.Conditions.Engine.prototype.addTest=function(t){this.token.tests.push(t)},s.Conditions.Engine.prototype.addMatch=function(t){this.token.match=t},s.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)},s.Node.info={build:function(t,e){this.tokentype===s.START?t.build.skip="info":t.build.skip=!1}},s.Node.institution={build:function(t,e){if([s.SINGLETON,s.START].indexOf(this.tokentype)>-1){var i=function(t,e){"string"==typeof this.strings.delimiter?t.tmp.institution_delimiter=this.strings.delimiter:t.tmp.institution_delimiter=t.tmp.name_delimiter;"text"===t.inheritOpt(this,"and")?this.and_term=t.getTerm("and","long",0):"symbol"===t.inheritOpt(this,"and")?t.opt.development_extensions.expect_and_symbol_form?this.and_term=t.getTerm("and","symbol",0):this.and_term="&":"none"===t.inheritOpt(this,"and")&&(this.and_term=t.tmp.institution_delimiter),void 0===this.and_term&&t.tmp.and_term&&(this.and_term=t.getTerm("and","long",0)),s.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof t.tmp.institution_delimiter&&(this.and_prefix_multiple=t.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===t.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=t.tmp.institution_delimiter:"never"===t.inheritOpt(this,"delimiter-precedes-last")&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},void 0!==this.and_term?(t.output.append(this.and_term,"empty",!0),this.and.single=t.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,t.output.append(this.and_term,"empty",!0),this.and.multiple=t.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):"undefined"!==this.strings.delimiter&&(this.and.single=new s.Blob(t.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new s.Blob(t.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),t.nameOutput.institution=this};this.execs.push(i)}e.push(this)},configure:function(t,e){[s.SINGLETON,s.START].indexOf(this.tokentype)>-1&&(t.build.has_institution=!0)}},s.Node["institution-part"]={build:function(t,e){var i;"long"===this.strings.name?i=this.strings["if-short"]?function(t,e){t.nameOutput.institutionpart["long-with-short"]=this}:function(t,e){t.nameOutput.institutionpart.long=this}:"short"===this.strings.name&&(i=function(t,e){t.nameOutput.institutionpart.short=this}),this.execs.push(i),e.push(this)}},s.Node.key={build:function(t,e){e=t[t.build.root+"_sort"].tokens;var i,r=new s.Token("key",s.START);t.tmp.root=t.build.root,r.strings["et-al-min"]=t.inheritOpt(this,"et-al-min"),r.strings["et-al-use-first"]=t.inheritOpt(this,"et-al-use-first"),r.strings["et-al-use-last"]=t.inheritOpt(this,"et-al-use-last"),i=function(t,e){t.tmp.done_vars=[]},r.execs.push(i),t.opt.citation_number_sort_direction=this.strings.sort_direction,i=function(t,e){t.output.openLevel("empty")},r.execs.push(i);var n=[];if(this.strings.sort_direction===s.DESCENDING?(n.push(1),n.push(-1)):(n.push(-1),n.push(1)),t[t.build.area].opt.sort_directions.push(n),s.DATE_VARIABLES.indexOf(this.variables[0])>-1&&(t.build.date_key=!0),i=function(t,e){t.tmp.sort_key_flag=!0,t.inheritOpt(this,"et-al-min")&&(t.tmp["et-al-min"]=t.inheritOpt(this,"et-al-min")),t.inheritOpt(this,"et-al-use-first")&&(t.tmp["et-al-use-first"]=t.inheritOpt(this,"et-al-use-first")),"boolean"==typeof t.inheritOpt(this,"et-al-use-last")&&(t.tmp["et-al-use-last"]=t.inheritOpt(this,"et-al-use-last"))},r.execs.push(i),e.push(r),this.variables.length){var a=this.variables[0];if("citation-number"===a&&("citation"===t.build.area&&"_sort"===t.build.extension&&(t.opt.citation_number_sort=!1),"bibliography"===t.build.root&&"_sort"===t.build.extension&&(t.opt.citation_number_sort_used=!1)),s.CREATORS.indexOf(a)>-1){var o=new s.Token("names",s.START);o.tokentype=s.START,o.variables=this.variables,s.Node.names.build.call(o,t,e);var l=new s.Token("name",s.SINGLETON);l.tokentype=s.SINGLETON,l.strings["name-as-sort-order"]="all",l.strings["sort-separator"]=" ",l.strings["et-al-use-last"]=t.inheritOpt(this,"et-al-use-last"),l.strings["et-al-min"]=t.inheritOpt(this,"et-al-min"),l.strings["et-al-use-first"]=t.inheritOpt(this,"et-al-use-first"),s.Node.name.build.call(l,t,e);var u=new s.Token("institution",s.SINGLETON);u.tokentype=s.SINGLETON,s.Node.institution.build.call(u,t,e);var p=new s.Token("names",s.END);p.tokentype=s.END,s.Node.names.build.call(p,t,e)}else{var h=new s.Token("text",s.SINGLETON);if(h.dateparts=this.dateparts,s.NUMERIC_VARIABLES.indexOf(a)>-1)i=function(t,e){var i;i=!1,(i="citation-number"===a?t.registry.registry[e.id].seq.toString():e[a])&&(i=s.Util.padding(i)),t.output.append(i,this)};else if("citation-label"===a)i=function(t,e){var i=t.getCitationLabel(e);t.output.append(i,this)};else if(s.DATE_VARIABLES.indexOf(a)>-1)i=s.dateAsSortKey,h.variables=this.variables;else if("title"===a){i=t.transform.getOutputFunction(this.variables,"title",!1,!1,!0)}else i=function(t,e){var i=e[a];t.output.append(i,"empty")};h.execs.push(i),e.push(h)}}else{var c=new s.Token("text",s.SINGLETON);c.postponed_macro=this.postponed_macro,s.expandMacro.call(t,c,e)}var f=new s.Token("key",s.END);i=function(t,e){var i=t.output.string(t,t.output.queue);t.sys.normalizeUnicode&&(i=t.sys.normalizeUnicode(i)),""===(i=i?i.split(" ").join(t.opt.sort_sep)+t.opt.sort_sep:"")&&(i=void 0),("string"!=typeof i||t.tmp.empty_date)&&(i=void 0,t.tmp.empty_date=!1),t[t[t.tmp.area].root+"_sort"].keys.push(i),t.tmp.value=[]},f.execs.push(i),t.build.date_key&&("citation"===t.build.area&&"_sort"===t.build.extension&&(t[t.build.area].opt.sort_directions.push([-1,1]),i=function(t,e){var i=t.registry.registry[e.id].disambig.year_suffix;i||(i=0);var r=s.Util.padding(""+i);t[t.tmp.area].keys.push(r)},f.execs.push(i)),t.build.date_key=!1),i=function(t,e){t.tmp["et-al-min"]=void 0,t.tmp["et-al-use-first"]=void 0,t.tmp["et-al-use-last"]=void 0,t.tmp.sort_key_flag=!1},f.execs.push(i),e.push(f)}},s.Node.label={build:function(t,e){if(this.strings.term){this.strings.form;var i=function(t,e,i){var r=s.evaluateLabel(this,t,e,i);i&&"locator"===this.strings.term&&(t.parallel.StartVariable("label"),t.parallel.AppendToVariable(i.label),i.section_form_override=this.strings.form),r&&(t.tmp.group_context.tip.term_intended=!0),s.UPDATE_GROUP_CONTEXT_CONDITION(t,r),-1===r.indexOf("%s")&&t.output.append(r,this),i&&"locator"===this.strings.term&&t.parallel.CloseVariable()};this.execs.push(i)}else{var r=t.build.names_variables.slice(-1)[0];t.build.name_label||(t.build.name_label={});for(var n=0,a=r.length;n<a;n+=1)t.build.name_label[r[n]]||(t.build.name_label[r[n]]={});if(t.build.name_flag)for(var n=0,a=r.length;n<a;n+=1)t.build.name_label[r[n]].after=this;else for(var n=0,a=r.length;n<a;n+=1)t.build.name_label[r[n]].before=this}e.push(this)}},s.Node.layout={build:function(t,e){function i(){"bibliography"===t.build.area&&(a=new s.Token("text",s.SINGLETON),r=function(t,e,i){var s;t.tmp.cite_locales[t.tmp.cite_locales.length-1];s=t.tmp.cite_affixes[t.tmp.area][t.tmp.last_cite_locale]?t.tmp.cite_affixes[t.tmp.area][t.tmp.last_cite_locale].suffix:t.bibliography.opt.layout_suffix;var r=t.output.current.value();t.opt.using_display?r.blobs[r.blobs.length-1].strings.suffix=s:r.strings.suffix=s,t.bibliography.opt["second-field-align"]&&t.output.endTag("bib_other")},a.execs.push(r),e.push(a))}var r,n,a,o;this.tokentype===s.START&&(this.locale_raw?t.build.current_default_locale=this.locale_raw:t.build.current_default_locale=t.opt["default-locale"],r=function(t,e,i){t.opt.development_extensions.apply_citation_wrapper&&t.sys.wrapCitationEntry&&!t.tmp.just_looking&&e.system_id&&"citation"===t.tmp.area&&(cite_entry=new s.Token("group",s.START),cite_entry.decorations=[["@cite","entry"]],t.output.startTag("cite_entry",cite_entry),t.output.current.value().item_id=e.system_id,i&&(t.output.current.value().locator_txt=i.locator_txt,t.output.current.value().suffix_txt=i.suffix_txt))},this.execs.push(r)),this.tokentype!==s.START||t.tmp.cite_affixes[t.build.area]||(r=function(t,e){t.tmp.done_vars=[],!t.tmp.just_looking&&t.registry.registry[e.id].parallel&&t.tmp.done_vars.push("first-reference-note-number"),t.tmp.rendered_name=!1},this.execs.push(r),r=function(t,e){t.tmp.sort_key_flag=!1},this.execs.push(r),r=function(t,e){t.tmp.nameset_counter=0},this.execs.push(r),r=function(t,e){var i=new s.Token;t.opt.development_extensions.rtl_support&&["ar","he","fa","ur","yi","ps","syr"].indexOf(e.language)>-1&&((i=new s.Token).strings.prefix="‫",i.strings.suffix="‬"),t.output.openLevel(i)},this.execs.push(r),e.push(this),t.opt.development_extensions.rtl_support,"citation"===t.build.area&&(n=new s.Token("text",s.SINGLETON),r=function(t,e,i){var r;if(i&&i.prefix){r="";var n=i.prefix.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),a=n.slice(-1);n.match(s.ENDSWITH_ROMANESQUE_REGEXP)?r=" ":s.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(a)>-1?r=" ":a.match(/[\)\],0-9]/)&&(r=" ");var o=!1;s.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(a)>-1&&i.prefix.trim().indexOf(" ")>-1&&(t.tmp.term_predecessor=!1,o=!0),prefix=(i.prefix+r).replace(/\s+/g," "),t.tmp.just_looking||(prefix=t.output.checkNestedBrace.update(prefix)),t.output.append(prefix,this,!1,o)}},n.execs.push(r),e.push(n)));var l;if(this.locale_raw&&((l=new s.Token("dummy",s.START)).locale=this.locale_raw,l.strings.delimiter=this.strings.delimiter,l.strings.suffix=this.strings.suffix,t.tmp.cite_affixes[t.build.area]||(t.tmp.cite_affixes[t.build.area]={})),this.tokentype===s.START&&(t.build.layout_flag=!0,this.locale_raw||(t[t.tmp.area].opt.topdecor=[this.decorations],t[t.tmp.area+"_sort"].opt.topdecor=[this.decorations],t[t.build.area].opt.layout_prefix=this.strings.prefix,t[t.build.area].opt.layout_suffix=this.strings.suffix,t[t.build.area].opt.layout_delimiter=this.strings.delimiter,t[t.build.area].opt.layout_decorations=this.decorations,t.tmp.cite_affixes[t.build.area]&&(o=new s.Token("else",s.START),s.Node.else.build.call(o,t,e))),this.locale_raw)){if(t.build.layout_locale_flag)l.name="else-if",s.Attributes["@locale-internal"].call(l,t,this.locale_raw),s.Node["else-if"].build.call(l,t,e);else{var u=new s.Token("choose",s.START);s.Node.choose.build.call(u,t,e),l.name="if",s.Attributes["@locale-internal"].call(l,t,this.locale_raw),s.Node.if.build.call(l,t,e)}t.tmp.cite_affixes[t.build.area][l.locale]={},t.tmp.cite_affixes[t.build.area][l.locale].delimiter=this.strings.delimiter,t.tmp.cite_affixes[t.build.area][l.locale].suffix=this.strings.suffix}this.tokentype===s.END&&(this.locale_raw&&(i(),t.build.layout_locale_flag?(l.name="else-if",l.tokentype=s.END,s.Attributes["@locale-internal"].call(l,t,this.locale_raw),s.Node["else-if"].build.call(l,t,e)):(l.name="if",l.tokentype=s.END,s.Attributes["@locale-internal"].call(l,t,this.locale_raw),s.Node.if.build.call(l,t,e),t.build.layout_locale_flag=!0)),this.locale_raw||(i(),t.tmp.cite_affixes[t.build.area]&&t.build.layout_locale_flag&&(o=new s.Token("else",s.END),s.Node.else.build.call(o,t,e),o=new s.Token("choose",s.END),s.Node.choose.build.call(o,t,e)),t.build_layout_locale_flag=!0,"citation"===t.build.area&&(a=new s.Token("text",s.SINGLETON),r=function(t,e,i){var r;if(i&&i.suffix){r="",(i.suffix.match(s.STARTSWITH_ROMANESQUE_REGEXP)||["[","("].indexOf(i.suffix.slice(0,1))>-1)&&(r=" ");var n=i.suffix;t.tmp.just_looking||(n=t.output.checkNestedBrace.update(n)),t.output.append(r+n,this)}},a.execs.push(r),e.push(a)),r=function(t,e){t.output.closeLevel()},this.execs.push(r),r=function(t,e){t.opt.development_extensions.apply_citation_wrapper&&t.sys.wrapCitationEntry&&!t.tmp.just_looking&&e.system_id&&"citation"===t.tmp.area&&t.output.endTag()},this.execs.push(r),e.push(this),t.build.layout_flag=!1,t.build.layout_locale_flag=!1))}},s.Node.macro={build:function(t,e){}},s.NameOutput=function(t,e,i,s){this.debug=!1,this.state=t,this.Item=e,this.item=i,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1},s.NameOutput.prototype.init=function(t){this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=t,this.variables=t.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var e=0,i=this.variables.length;e<i;e+=1)this.Item[this.variables[e]]&&this.Item[this.variables[e]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[e]]));this["et-al"]=void 0,this.with=void 0,this.name=void 0,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],this.state.tmp.value.length},s.NameOutput.prototype.reinit=function(t,e){if(this.labelVariable=e,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=t.variables;var i=this.state.tmp.value.slice();this.state.tmp.value=[];for(var r=0,n=this.variables.length;r<n;r+=1)this.Item[this.variables[r]]&&this.Item[this.variables[r]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[r]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,s.LITERAL),this.state.tmp.value=i}},s.NameOutput.prototype.outputNames=function(){var t=this.variables;if(this.institution.and&&(this.institution.and.single.blobs&&this.institution.and.single.blobs.length||(this.institution.and.single.blobs=this.name.and.single.blobs),this.institution.and.multiple.blobs&&this.institution.and.multiple.blobs.length||(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(this.family_decor=s.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",m=0,d=this.family.execs.length;m<d;m+=1)this.family.execs[m].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(this.given_decor=s.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",m=0,d=this.given.execs.length;m<d;m+=1)this.given.execs[m].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.getEtAlConfig(),this.divideAndTransliterateNames(),this.truncatePersonalNameLists(),this.disambigNames(),this.constrainNames(),"count"!==this.name.strings.form){this.setEtAlParameters(),this.setCommonTerm(),this.state.tmp.name_node={},this.state.tmp.name_node.children=[],this.renderAllNames();var e=[];for(m=0,d=t.length;m<d;m+=1){var i=t[m],r=[],n=!1,a=null;if(this.state.opt.development_extensions.spoof_institutional_affiliations){for(var o=0,l=this.institutions[i].length;o<l;o+=1)r.push(this.joinPersonsAndInstitutions([this.persons[i][o],this.institutions[i][o]]));if(this.institutions[i].length){var u=this.nameset_base+this.variable_offset[i];this.freeters[i].length&&(u+=1),n=this.joinInstitutionSets(r,u)}a=this.joinFreetersAndInstitutionSets([this.freeters[i],n])}else a=this._join([this.freeters[i]],"");if(a&&(this.state.tmp.extension||(a=this._applyLabels(a,i)),e.push(a)),this.common_term)break}for(this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),m=0,d=e.length;m<d;m+=1)this.state.output.append(e[m],"literal",!0);this.state.output.closeLevel("empty");var p=this.state.output.pop(),h=s.Util.cloneToken(this.names);if(this.state.output.append(p,h),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.state.tmp.name_node.top=this.state.output.current.value(),"authority"!==t[0]){var c=[],f=this.Item[t[0]];if(f)for(var m=0,d=f.length;m<d;m+=1)substring=s.Util.Names.getRawName(f[m]),substring&&c.push(substring);(c=c.join(", "))&&(this.state.tmp.name_node.string=c)}if(this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),"classic"===this.Item.type){var g=[];this.state.tmp.first_name_string&&g.push(this.state.tmp.first_name_string),this.Item.title&&g.push(this.Item.title),(g=g.join(", "))&&this.state.sys.getAbbreviation&&(this.state.transform.loadAbbreviation("default","classic",g),this.state.transform.abbrevs.default.classic[g]&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs.default.classic[g],"empty",!0),p=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(p)))}this._collapseAuthor(),this.variables=[]}else(this.state.tmp.extension||0!=this.names_count)&&(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0)},s.NameOutput.prototype._applyLabels=function(t,e){var i;if(!this.label||!this.label[this.labelVariable])return t;var s=0,r=this.freeters_count[e]+this.institutions_count[e];if(r>1)s=1;else{for(var n=0,a=this.persons[e].length;n<a;n+=1)r+=this.persons_count[e][n];r>1&&(s=1)}return this.label[this.labelVariable].before?("number"==typeof this.label[this.labelVariable].before.strings.plural&&(s=this.label[this.labelVariable].before.strings.plural),i=this._buildLabel(e,s,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(i,this.label[this.labelVariable].before,!0),this.state.output.append(t,"literal",!0),this.state.output.closeLevel("empty"),t=this.state.output.pop()):this.label[this.labelVariable].after&&("number"==typeof this.label[this.labelVariable].after.strings.plural&&(s=this.label[this.labelVariable].after.strings.plural),i=this._buildLabel(e,s,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(t,"literal",!0),this.state.output.append(i,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),t=this.state.output.pop()),t},s.NameOutput.prototype._buildLabel=function(t,e,i,r){this.common_term&&(t=this.common_term);var n=!1,a=this.label[r][i];return a&&(n=s.castLabel(this.state,a,t,e,s.TOLERANT)),n},s.NameOutput.prototype._collapseAuthor=function(){var t,e,i;0===this.nameset_base&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),(this.item&&this.item["suppress-author"]&&this._first_creator_variable==this.variables[0]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(e="",t=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,i=this.state.tmp.offset_characters,t&&(e=this.state.output.string(this.state,t,!1)),this.state.tmp.offset_characters=i,this.state.registry.authorstrings[this.Item.id]=e):this.state.tmp.just_looking||this.state.tmp.suppress_decorations||!(this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)||(e="",t=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,i=this.state.tmp.offset_characters,t&&(e=this.state.output.string(this.state,t,!1)),e===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=i),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=e,this.variables.indexOf(this._first_creator_variable)>-1&&this.item&&this.item["suppress-author"]&&"legal_case"!==this.Item.type&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=i,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1))))},s.NameOutput.prototype.isPerson=function(t){return!(t.literal||!t.given&&t.family&&t.isInstitution)},s.NameOutput.prototype.truncatePersonalNameLists=function(){var t,e,i,s;this.freeters_count={},this.persons_count={},this.institutions_count={};for(t in this.freeters)this.freeters.hasOwnProperty(t)&&(this.freeters_count[t]=this.freeters[t].length,this.freeters[t]=this._truncateNameList(this.freeters,t));for(t in this.persons)if(this.persons.hasOwnProperty(t))for(this.institutions_count[t]=this.institutions[t].length,this._truncateNameList(this.institutions,t),this.persons[t]=this.persons[t].slice(0,this.institutions[t].length),this.persons_count[t]=[],r=0,n=this.persons[t].length;r<n;r+=1)this.persons_count[t][r]=this.persons[t][r].length,this.persons[t][r]=this._truncateNameList(this.persons,t,r);if((s=1===this.etal_min&&1===this.etal_use_first&&!this.state.tmp.extension&&!this.state.tmp.just_looking&&t)||this._please_chop)for(e=0,i=this.variables.length;e<i;e+=1){t=this.variables[e],this.freeters[t].length&&(this._please_chop===t?(this.freeters[t]=this.freeters[t].slice(1),this.freeters_count[t]+=-1,this._please_chop=!1):s&&!this._please_chop&&(this.freeters[t]=this.freeters[t].slice(0,1),this.freeters_count[t]=1,this.institutions[t]=[],this.persons[t]=[],this._please_chop=s));for(var r=0,n=this.persons[t].length;r<n;r++)if(this.persons[t][r].length){if(this._please_chop===t){this.persons[t][r]=this.persons[t][r].slice(1),this.persons_count[t][r]+=-1,this._please_chop=!1;break}if(s&&!this._please_chop){this.freeters[t]=this.persons[t][r].slice(0,1),this.freeters_count[t]=1,this.institutions[t]=[],this.persons[t]=[],[],this._please_chop=s;break}}this.institutions[t].length&&(this._please_chop===t?(this.institutions[t]=this.institutions[t].slice(1),this.institutions_count[t]+=-1,this._please_chop=!1):s&&!this._please_chop&&(this.institutions[t]=this.institutions[t].slice(0,1),this.institutions_count[t]=1,[],this._please_chop=s))}for(e=0,i=this.variables.length;e<i;e+=1){this.institutions[t].length&&(this.nameset_offset+=1);for(var r=0,n=this.persons[t].length;r<n;r++)this.persons[t][r].length&&(this.nameset_offset+=1)}},s.NameOutput.prototype._truncateNameList=function(t,e,i){var s;if(s=void 0===i?t[e]:t[e][i],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&s.length>50&&s.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2){var r=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;s=s.slice(0,r+1).concat(s.slice(-1))}return s},s.NameOutput.prototype.divideAndTransliterateNames=function(){var t,e,i,s,r=this.Item,n=this.variables;for(this.varnames=n.slice(),this.freeters={},this.persons={},this.institutions={},t=0,e=n.length;t<e;t+=1){var a=n[t];this.variable_offset[a]=this.nameset_offset;var o=this._normalizeVariableValue(r,a);if(this.name.strings["suppress-min"]&&o.length>=this.name.strings["suppress-min"]&&(o=[]),this.name.strings["suppress-max"]&&o.length<=this.name.strings["suppress-max"]&&(o=[]),this._getFreeters(a,o),this._getPersonsAndInstitutions(a,o),this.state.opt.development_extensions.spoof_institutional_affiliations)if(0===this.name.strings["suppress-min"])for(this.freeters[a]=[],i=0,s=this.persons[a].length;i<s;i+=1)this.persons[a][i]=[];else if(0===this.institution.strings["suppress-min"]){for(this.institutions[a]=[],this.freeters[a]=this.freeters[a].concat(this.persons[a]),i=0,s=this.persons[a].length;i<s;i+=1)for(var l=0,u=this.persons[a][i].length;l<u;l+=1)this.freeters[a].push(this.persons[a][i][l]);this.persons[a]=[]}}},s.NameOutput.prototype._normalizeVariableValue=function(t,e){var i;return"string"==typeof t[e]||"number"==typeof t[e]?(s.debug('name variable "'+e+'" is string or number, not array. Attempting to fix.'),i=[{literal:t[e]+""}]):t[e]?"number"!=typeof t[e].length?(s.debug('name variable "'+e+'" is object, not array. Attempting to fix.'),t[e]=[t[e]],i=t[e].slice()):i=t[e].slice():i=[],i},s.NameOutput.prototype._getFreeters=function(t,e){if(this.freeters[t]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(i=e.length-1;i>-1&&this.isPerson(e[i]);i--)(s=this._checkNickname(e.pop()))&&this.freeters[t].push(s);else for(var i=e.length-1;i>-1;i--){s=e.pop();if(this.isPerson(s))var s=this._checkNickname(s);this.freeters[t].push(s)}this.freeters[t].reverse(),this.freeters[t].length&&(this.nameset_offset+=1)},s.NameOutput.prototype._getPersonsAndInstitutions=function(t,e){if(this.persons[t]=[],this.institutions[t]=[],this.state.opt.development_extensions.spoof_institutional_affiliations){for(var i=[],s=!1,r=!0,n=e.length-1;n>-1;n+=-1)if(this.isPerson(e[n])){var a=this._checkNickname(e[n]);a&&i.push(a)}else s=!0,this.institutions[t].push(e[n]),r||(i.reverse(),this.persons[t].push(i),i=[]),r=!1;s&&(i.reverse(),this.persons[t].push(i),this.persons[t].reverse(),this.institutions[t].reverse())}},s.NameOutput.prototype._clearValues=function(t){for(var e=t.length-1;e>-1;e+=-1)t.pop()},s.NameOutput.prototype._checkNickname=function(t){if(["interview","personal_communication"].indexOf(this.Item.type)>-1){var e="";if((e=s.Util.Names.getRawName(t))&&this.state.sys.getAbbreviation&&(!this.item||!this.item["suppress-author"])){this.state.transform.loadAbbreviation("default","nickname",e);var i=this.state.transform.abbrevs.default.nickname[e];i&&(t="!here>>>"!==i&&{family:i,given:""})}}return t},s.NameOutput.prototype.joinPersons=function(t,e,i,s){return s||(s="name"),void 0===i?1===this.etal_spec[e].freeters?this._joinEtAl(t,s):2===this.etal_spec[e].freeters?this._joinEllipsis(t,s):this.state.tmp.sort_key_flag?this._join(t," "):this._joinAnd(t,s):1===this.etal_spec[e].persons[i]?this._joinEtAl(t,s):2===this.etal_spec[e].persons[i]?this._joinEllipsis(t,s):this.state.tmp.sort_key_flag?this._join(t," "):this._joinAnd(t,s)},s.NameOutput.prototype.joinInstitutionSets=function(t,e){return 1===this.etal_spec[e].institutions?this._joinEtAl(t,"institution"):2===this.etal_spec[e].institutions?this._joinEllipsis(t,"institution"):this._joinAnd(t,"institution")},s.NameOutput.prototype.joinPersonsAndInstitutions=function(t){return this._join(t,this.state.tmp.name_delimiter)},s.NameOutput.prototype.joinFreetersAndInstitutionSets=function(t){return this._join(t,"[never here]",this.with.single,this.with.multiple)},s.NameOutput.prototype._joinEtAl=function(t,e){var i=this._join(t,this.state.tmp.name_delimiter);return this.state.output.openLevel(this._getToken(e)),this.state.output.current.value().strings.delimiter="",this.state.output.append(i,"literal",!0),t.length>1?this.state.output.append(this["et-al"].multiple,"literal",!0):1===t.length&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()},s.NameOutput.prototype._joinEllipsis=function(t,e){return this._join(t,this.state.tmp.name_delimiter,this.name.ellipsis.single,this.name.ellipsis.multiple,e)},s.NameOutput.prototype._joinAnd=function(t,e){return this._join(t,this.state.inheritOpt(this[e],"delimiter",e+"-delimiter",", "),this[e].and.single,this[e].and.multiple,e)},s.NameOutput.prototype._join=function(t,e,i,r,n){var a,o;if(!t)return!1;for(a=t.length-1;a>-1;a+=-1)t[a]&&0!==t[a].length&&t[a].blobs.length||(t=t.slice(0,a).concat(t.slice(a+1)));if(!t.length)return!1;if(i&&2===t.length)i&&(i=new s.Blob(i.blobs,i)),t=[t[0],i,t[1]];else{var l;for(l=r?2:1,a=0,o=t.length-l;a<o;a+=1)t[a].strings.suffix+=e;if(t.length>1){var u=t.pop();r?(r=new s.Blob(r.blobs,r),t.push(r)):(i&&(i=new s.Blob(i.blobs,i)),t.push(i)),t.push(u)}}for(this.state.output.openLevel(),i&&r&&(this.state.output.current.value().strings.delimiter=""),a=0,o=t.length;a<o;a+=1)this.state.output.append(t[a],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()},s.NameOutput.prototype._getToken=function(t){var e=this[t];return"institution"===t?new s.Token:e},s.NameOutput.prototype.setCommonTerm=function(){var t=this.variables.slice();if(t.sort(),this.common_term=t.join(""),!this.common_term)return!1;var e=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?e=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(e=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!e||this.variables.length<2)this.common_term=!1;else for(var i=0,s=this.variables.length-1;i<s;i+=1){var r=this.variables[i],n=this.variables[i+1];if(this.freeters[r].length||this.freeters[n].length){if(this.etal_spec[r].freeters!==this.etal_spec[n].freeters||!this._compareNamesets(this.freeters[r],this.freeters[n]))return void(this.common_term=!1);1}if(this.persons[r].length!==this.persons[n].length)return void(this.common_term=!1);for(var a=0,o=this.persons[r].length;a<o;a+=1)if(this.etal_spec[r].persons[a]!==this.etal_spec[n].persons[a]||!this._compareNamesets(this.persons[r][a],this.persons[n][a]))return void(this.common_term=!1)}},s.NameOutput.prototype._compareNamesets=function(t,e){if(t.length!==e.length)return!1;for(var i=0,r=e.length;i<r;i+=1){e[i];for(var n=0,a=s.NAME_PARTS.length;n<a;n+=1){var o=s.NAME_PARTS[n];if(!t[i]||t[i][o]!=e[i][o])return!1}}return!0},s.NameOutput.prototype.constrainNames=function(){this.names_count=0;for(var t,e=0,i=this.variables.length;e<i;e+=1){var s=this.variables[e];t=this.nameset_base+e,this.freeters[s].length&&(this.state.tmp.names_max.push(this.freeters[s].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,s,t),this.names_count+=this.freeters[s].length),this.institutions[s].length&&(this.state.tmp.names_max.push(this.institutions[s].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,s,t),this.persons[s]=this.persons[s].slice(0,this.institutions[s].length),this.names_count+=this.institutions[s].length);for(var r=0,n=this.persons[s].length;r<n;r+=1)this.persons[s][r].length&&(this.state.tmp.names_max.push(this.persons[s][r].length,"literal"),this._imposeNameConstraints(this.persons[s],this.persons_count[s],r,t),this.names_count+=this.persons[s][r].length)}},s.NameOutput.prototype._imposeNameConstraints=function(t,e,i,s){var r=t[i],n=this.state.tmp["et-al-min"];this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[s]?n=this.state.tmp.disambig_request.names[s]:e[i]>=this.etal_min&&(n=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[s]>this.etal_use_first?n=e[i]<this.etal_min?e[i]:this.state.tmp.disambig_request.names[s]:e[i]>=this.etal_min&&(n=this.etal_use_first),this.etal_use_last&&n>this.etal_min-2&&(n=this.etal_min-2));var a=this.etal_min>=this.etal_use_first,o=e[i]>n;n>e[i]&&(n=r.length),a&&o&&(this.etal_use_last?t[i]=r.slice(0,n).concat(r.slice(-1)):t[i]=r.slice(0,n)),this.state.tmp.disambig_settings.names[s]=t[i].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)},s.NameOutput.prototype.disambigNames=function(){for(var t,e=0,i=this.variables.length;e<i;e+=1){var s=this.variables[e];if(t=this.nameset_base+e,this.freeters[s].length&&this._runDisambigNames(this.freeters[s],t),this.institutions[s].length){void 0===this.state.tmp.disambig_settings.givens[t]&&(this.state.tmp.disambig_settings.givens[t]=[]);for(var r=0,n=this.institutions[s].length;r<n;r+=1)void 0===this.state.tmp.disambig_settings.givens[t][r]&&this.state.tmp.disambig_settings.givens[t].push(2)}for(var r=0,n=this.persons[s].length;r<n;r+=1)this.persons[s][r].length&&this._runDisambigNames(this.persons[s][r],t)}},s.NameOutput.prototype._runDisambigNames=function(t,e){var i,r,n,a,o,l;for(a=0,o=t.length;a<o;a+=1)if(t[a].given||t[a].family){if(r=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,t[a],a),void 0===this.state.tmp.disambig_settings.givens[e])for(var u=0,p=e+1;u<p;u+=1)this.state.tmp.disambig_settings.givens[u]||(this.state.tmp.disambig_settings.givens[u]=[]);if(void 0===this.state.tmp.disambig_settings.givens[e][a]&&(i=this.state.inheritOpt(this.name,"form","name-form"),n=this.state.registry.namereg.evalname(""+this.Item.id,t[a],a,0,i,r),this.state.tmp.disambig_settings.givens[e].push(n)),i=this.state.inheritOpt(this.name,"form","name-form"),l=this.state.registry.namereg.evalname(""+this.Item.id,t[a],a,0,i,r),this.state.tmp.disambig_request){var h=this.state.tmp.disambig_settings.givens[e][a];1!==h||"by-cite"!==this.state.citation.opt["givenname-disambiguation-rule"]||void 0!==this.state.inheritOpt(this.name,"initialize-with")&&void 0!==t[a].given||(h=2),n=h,this.state.opt["disambiguate-add-givenname"]&&t[a].given&&(n=this.state.registry.namereg.evalname(""+this.Item.id,t[a],a,n,this.state.inheritOpt(this.name,"form","name-form"),this.state.inheritOpt(this.name,"initialize-with")))}else n=l;!this.state.tmp.just_looking&&this.item&&this.item.position===s.POSITION_FIRST&&l>n&&(n=l),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[e][a]=n,"string"!=typeof r||void 0!==this.name.strings.initialize&&!0!==this.name.strings.initialize||(this.state.tmp.disambig_settings.use_initials=!0))}},s.NameOutput.prototype.getEtAlConfig=function(){var t=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,void 0===t&&(t={}),t.position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),"boolean"==typeof this.state.tmp["et-al-use-last"]?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)},s.NameOutput.prototype.setEtAlParameters=function(){var t,e,i,s;for(t=0,e=this.variables.length;t<e;t+=1){var r=this.variables[t];for(void 0===this.etal_spec[r]&&(this.etal_spec[r]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+t]=this.etal_spec[r],this.freeters[r].length&&this._setEtAlParameter("freeters",r),i=0,s=this.persons[r].length;i<s;i+=1)void 0===this.etal_spec[r][i]&&(this.etal_spec[r].persons[i]=0),this._setEtAlParameter("persons",r,i);this.institutions[r].length&&this._setEtAlParameter("institutions",r)}},s.NameOutput.prototype._setEtAlParameter=function(t,e,i){var s,r;"persons"===t?(s=this.persons[e][i],r=this.persons_count[e][i]):(s=this[t][e],r=this[t+"_count"][e]),s.length<r&&!this.state.tmp.sort_key_flag?this.etal_use_last?"persons"===t?this.etal_spec[e].persons[i]=2:this.etal_spec[e][t]=2:"persons"===t?this.etal_spec[e].persons[i]=1:this.etal_spec[e][t]=1:"persons"===t?this.etal_spec[e].persons[i]=0:this.etal_spec[e][t]=0},s.NameOutput.prototype.renderAllNames=function(){for(var t,e=0,i=this.variables.length;e<i;e+=1){var s=this.variables[e];(this.freeters[s].length||this.institutions[s].length)&&(this.state.tmp.group_context.tip.condition||(this.state.tmp.just_did_number=!1)),t=this.nameset_base+e,this.freeters[s].length&&(this.freeters[s]=this._renderNames(s,this.freeters[s],t));for(var r=0,n=this.institutions[s].length;r<n;r+=1)this.persons[s][r]=this._renderNames(s,this.persons[s][r],t,r)}this.renderInstitutionNames()},s.NameOutput.prototype.renderInstitutionNames=function(){for(var t=0,e=this.variables.length;t<e;t+=1)for(var i=this.variables[t],s=0,r=this.institutions[i].length;s<r;s+=1){var n,a=this.institutions[i][s];if(n=this.state.tmp.extension?["sort"]:a.isInstitution||a.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons,slot={primary:"locale-orig",secondary:!1,tertiary:!1},n)for(var o=["primary","secondary","tertiary"],l=0,u=o.length;l<u&&!(n.length-1<l);l+=1)n[l]&&(slot[o[l]]="locale-"+n[l]);else slot.primary="locale-translat";"bibliography"===this.state.tmp.area||"citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position||(slot.secondary=!1,slot.tertiary=!1);this.setRenderedName(a);var p=this._renderInstitutionName(i,a,slot,s);this.institutions[i][s]=p}},s.NameOutput.prototype._renderInstitutionName=function(t,e,i,s){res=this.getName(e,i.primary,!0);var r=res.name,n=res.usedOrig;r&&(r=this.fixupInstitution(r,t,s)),secondary=!1,i.secondary&&(res=this.getName(e,i.secondary,!1,n),secondary=res.name,n=res.usedOrig,secondary&&(secondary=this.fixupInstitution(secondary,t,s))),tertiary=!1,i.tertiary&&(res=this.getName(e,i.tertiary,!1,n),tertiary=res.name,tertiary&&(tertiary=this.fixupInstitution(tertiary,t,s)));var a={l:{pri:!1,sec:!1,ter:!1},s:{pri:!1,sec:!1,ter:!1}};switch(r&&(a.l.pri=r.long,a.s.pri=r.short.length?r.short:r.long),secondary&&(a.l.sec=secondary.long,a.s.sec=secondary.short.length?secondary.short:secondary.long),tertiary&&(a.l.ter=tertiary.long,a.s.ter=tertiary.short.length?tertiary.short:tertiary.long),this.institution.strings["institution-parts"]){case"short":r.short.length?(short_style=this._getShortStyle(),institution=[this._composeOneInstitutionPart([a.s.pri,a.s.sec,a.s.ter],i,short_style,t)]):(long_style=this._getLongStyle(r,t,s),institution=[this._composeOneInstitutionPart([a.l.pri,a.l.sec,a.l.ter],i,long_style,t)]);break;case"short-long":long_style=this._getLongStyle(r,t,s),short_style=this._getShortStyle(),institution_short=this._renderOneInstitutionPart(r.short,short_style),institution_long=this._composeOneInstitutionPart([a.l.pri,a.l.sec,a.l.ter],i,long_style,t),institution=[institution_short,institution_long];break;case"long-short":long_style=this._getLongStyle(r,t,s),short_style=this._getShortStyle(),institution_short=this._renderOneInstitutionPart(r.short,short_style),institution_long=this._composeOneInstitutionPart([a.l.pri,a.l.sec,a.l.ter],i,long_style,t),institution=[institution_long,institution_short];break;default:long_style=this._getLongStyle(r,t,s),institution=[this._composeOneInstitutionPart([a.l.pri,a.l.sec,a.l.ter],i,long_style,t)]}var o=this._join(institution," ");return this.state.tmp.name_node.children.push(o),o},s.NameOutput.prototype._composeOneInstitutionPart=function(t,e,i,r){var n,a,o,l=!1,u=!1,p=!1;if(t[0]){if(n=s.Util.cloneToken(i),this.state.opt.citeAffixes[e.primary]&&"<i>"===this.state.opt.citeAffixes.institutions[e.primary].prefix){for(var h=!1,c=0,f=n.decorations.length;c<f;c+=1)"@font-style"===i.decorations[c][0]&&"italic"===n.decorations[c][1]&&(h=!0);h||n.decorations.push(["@font-style","italic"])}l=this._renderOneInstitutionPart(t[0],n)}t[1]&&(u=this._renderOneInstitutionPart(t[1],i)),t[2]&&(p=this._renderOneInstitutionPart(t[2],i));var m;if(u||p){this.state.output.openLevel("empty"),this.state.output.append(l),a=s.Util.cloneToken(i),e.secondary&&(a.strings.prefix=this.state.opt.citeAffixes.institutions[e.secondary].prefix,a.strings.suffix=this.state.opt.citeAffixes.institutions[e.secondary].suffix,a.strings.prefix||(a.strings.prefix=" "));var d=new s.Token;d.decorations.push(["@font-style","normal"]),d.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(d),this.state.output.append(u,a),this.state.output.closeLevel(),o=s.Util.cloneToken(i),e.tertiary&&(o.strings.prefix=this.state.opt.citeAffixes.institutions[e.tertiary].prefix,o.strings.suffix=this.state.opt.citeAffixes.institutions[e.tertiary].suffix,o.strings.prefix||(o.strings.prefix=" "));var g=new s.Token;g.decorations.push(["@font-style","normal"]),g.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(g),this.state.output.append(p,o),this.state.output.closeLevel(),this.state.output.closeLevel(),m=this.state.output.pop()}else m=l;return m},s.NameOutput.prototype._renderOneInstitutionPart=function(t,e){for(var i=0,r=t.length;i<r;i+=1)if(t[i]){var n=t[i];if(this.state.tmp.strip_periods)n=n.replace(/\./g,"");else for(var a=0,o=e.decorations.length;a<o;a+=1)if("@strip-periods"===e.decorations[a][0]&&"true"===e.decorations[a][1]){n=n.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,s.LITERAL),"!here>>>"===n?t[i]=!1:(this.state.output.append(n,e,!0),t[i]=this.state.output.pop())}return void 0===this.institution.strings["part-separator"]&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(t,this.institution.strings["part-separator"])},s.NameOutput.prototype._renderNames=function(t,e,i,r){l=!1;if(e.length){for(var n=[],a=0,o=e.length;a<o;a+=1){var l,u,p=e[a];if(u=this.state.tmp.extension?["sort"]:p.isInstitution||p.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons,slot={primary:"locale-orig",secondary:!1,tertiary:!1},u)for(var h=["primary","secondary","tertiary"],c=0,f=h.length;c<f&&!(u.length-1<c);c+=1)slot[h[c]]="locale-"+u[c];else slot.primary="locale-translat";if((this.state.tmp.sort_key_flag||"bibliography"!==this.state.tmp.area&&("citation"!==this.state.tmp.area||"note"!==this.state.opt.xclass||!this.item||this.item.position))&&(slot.secondary=!1,slot.tertiary=!1),this.setRenderedName(p),p.literal||p.isInstitution)n.push(this._renderInstitutionName(t,p,slot,r));else{var m=this._renderPersonalName(t,p,slot,i,a,r),d=s.Util.cloneToken(this.name);this.state.output.append(m,d,!0),n.push(this.state.output.pop())}}l=this.joinPersons(n,i,r)}return l},s.NameOutput.prototype._renderPersonalName=function(t,e,i,r,n,a){var o=this.getName(e,i.primary,!0),l=this._renderOnePersonalName(o.name,r,n,a);secondary=!1,i.secondary&&(o=this.getName(e,i.secondary,!1,o.usedOrig)).name&&(secondary=this._renderOnePersonalName(o.name,r,n,a)),tertiary=!1,i.tertiary&&(o=this.getName(e,i.tertiary,!1,o.usedOrig)).name&&(tertiary=this._renderOnePersonalName(o.name,r,n,a));var u;return secondary||tertiary?(this.state.output.openLevel("empty"),this.state.output.append(l),secondary_tok=new s.Token,i.secondary&&(secondary_tok.strings.prefix=this.state.opt.citeAffixes.persons[i.secondary].prefix,secondary_tok.strings.suffix=this.state.opt.citeAffixes.persons[i.secondary].suffix,secondary_tok.strings.prefix||(secondary_tok.strings.prefix=" ")),this.state.output.append(secondary,secondary_tok),tertiary_tok=new s.Token,i.tertiary&&(tertiary_tok.strings.prefix=this.state.opt.citeAffixes.persons[i.tertiary].prefix,tertiary_tok.strings.suffix=this.state.opt.citeAffixes.persons[i.tertiary].suffix,tertiary_tok.strings.prefix||(tertiary_tok.strings.prefix=" ")),this.state.output.append(tertiary,tertiary_tok),this.state.output.closeLevel(),u=this.state.output.pop()):u=l,u},s.NameOutput.prototype._isRomanesque=function(t){var e=2;if(t.family.replace(/\"/g,"").match(s.ROMANESQUE_REGEXP)||(e=0),!e&&t.given&&t.given.match(s.STARTSWITH_ROMANESQUE_REGEXP)&&(e=1),2==e){if(t.multi&&t.multi.main)var i=t.multi.main.slice(0,2);else this.Item.language&&(i=this.Item.language.slice(0,2));["ja","zh"].indexOf(i)>-1&&(e=1)}return e},s.NameOutput.prototype._renderOnePersonalName=function(t,e,i,r){function n(t){return!!t&&("string"==typeof t.blobs?["’","'","-"," "].indexOf(t.blobs.slice(-1))>-1:n(t.blobs[t.blobs.length-1]))}var a=t,o=this._droppingParticle(a,e,r),l=this._familyName(a),u=this._nonDroppingParticle(a),p=this._givenName(a,e,i),h=this._nameSuffix(a);this._isShort(e,i)&&!a["full-form-always"]&&(o=!1,p=!1,h=!1);var c=this.state.inheritOpt(this.name,"sort-separator");c||(c="");var f;f=a["comma-suffix"]?", ":" ";var m,d,g,b,_=this._isRomanesque(a),v=n(u);if(0===_)m=this._join([u,l,p],"");else if(1===_||a["static-ordering"])m=this._join([u,l,p]," ");else if(a["reverse-ordering"])m=this._join([p,u,l]," ");else if(this.state.tmp.sort_key_flag)"never"===this.state.opt["demote-non-dropping-particle"]?(g=this._join([u,l,o]," "),d=this._join([g,p],this.state.opt.sort_sep),m=this._join([d,h]," ")):(b=this._join([p,o,u]," "),d=this._join([l,b],this.state.opt.sort_sep),m=this._join([d,h]," "));else if("all"===this.state.inheritOpt(this.name,"name-as-sort-order")||"first"===this.state.inheritOpt(this.name,"name-as-sort-order")&&0===i&&(0===r||void 0===r))["Lord","Lady"].indexOf(a.given)>-1&&(c=", "),["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])>-1?(b=this._join([p,o],a["comma-dropping-particle"]+" "),(b=this._join([b,u]," "))&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),l&&this.family&&(l.strings.prefix=this.family.strings.prefix,l.strings.suffix=this.family.strings.suffix),d=this._join([l,b],c),m=this._join([d,h],c)):((g=v?this._join([u,l],""):this._join([u,l]," "))&&this.family&&(g.strings.prefix=this.family.strings.prefix,g.strings.suffix=this.family.strings.suffix),(b=this._join([p,o],a["comma-dropping-particle"]+" "))&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),d=this._join([g,b],c),m=this._join([d,h],c));else{a["dropping-particle"]&&a.family&&!a["non-dropping-particle"]&&["'","ʼ","’","-"].indexOf(a["dropping-particle"].slice(-1))>-1&&(l=this._join([o,l],""),o=!1),this.state.tmp.term_predecessor;var y=" ";this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))>-1&&(y=" "),v?(b=this._join([u,l],""),b=this._join([o,b],y)):b=this._join([o,u,l],y),(b=this._join([b,h],f))&&this.family&&(b.strings.prefix=this.family.strings.prefix,b.strings.suffix=this.family.strings.suffix),p&&this.given&&(p.strings.prefix=this.given.strings.prefix,p.strings.suffix=this.given.strings.suffix),b.strings.prefix&&(a["comma-dropping-particle"]=""),m=this._join([p,b],a["comma-dropping-particle"]+y)}return this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,s.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(m),m},s.NameOutput.prototype._isShort=function(t,e){return 0===this.state.tmp.disambig_settings.givens[t][e]},s.NameOutput.prototype._normalizeNameInput=function(t){var e={literal:t.literal,family:t.family,isInstitution:t.isInstitution,given:t.given,suffix:t.suffix,"comma-suffix":t["comma-suffix"],"non-dropping-particle":t["non-dropping-particle"],"dropping-particle":t["dropping-particle"],"static-ordering":t["static-ordering"],"static-particles":t["static-particles"],"reverse-ordering":t["reverse-ordering"],"full-form-always":t["full-form-always"],"parse-names":t["parse-names"],"comma-dropping-particle":"",block_initialize:t.block_initialize,multi:t.multi};return this._parseName(e),e},s.NameOutput.prototype._stripPeriods=function(t,e){var i=this[t+"_decor"];if(e)if(this.state.tmp.strip_periods)e=e.replace(/\./g,"");else if(i)for(var s=0,r=i.decorations.length;s<r;s+=1)if("@strip-periods"===i.decorations[s][0]&&"true"===i.decorations[s][1]){e=e.replace(/\./g,"");break}return e},s.NameOutput.prototype._nonDroppingParticle=function(t){var e=t["non-dropping-particle"];e&&this.state.tmp.sort_key_flag&&(e=e.replace(/[\'\u2019]/,""));var i=this._stripPeriods("family",e);return!!this.state.output.append(i,this.family_decor,!0)&&this.state.output.pop()},s.NameOutput.prototype._droppingParticle=function(t,e,i){var s=t["dropping-particle"];s&&this.state.tmp.sort_key_flag&&(s=s.replace(/[\'\u2019]/,""));var r=this._stripPeriods("given",s);if(t["dropping-particle"]&&t["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?void 0===i?this.etal_spec[e].freeters=2:this.etal_spec[e].persons=2:void 0===i?this.etal_spec[e].freeters=1:this.etal_spec[e].persons=1,t["comma-dropping-particle"]="";else if(this.state.output.append(r,this.given_decor,!0))return this.state.output.pop();return!1},s.NameOutput.prototype._familyName=function(t){var e=this._stripPeriods("family",t.family);return!!this.state.output.append(e,this.family_decor,!0)&&this.state.output.pop()},s.NameOutput.prototype._givenName=function(t,e,i){if(!1===this.state.inheritOpt(this.name,"initialize"))t.family&&t.given&&!1===this.state.inheritOpt(this.name,"initialize")&&(t.given=s.Util.Names.initializeWith(this.state,t.given,this.state.inheritOpt(this.name,"initialize-with"),!0)),t.given=s.Util.Names.unInitialize(this.state,t.given);else if(t.family&&1===this.state.tmp.disambig_settings.givens[e][i]&&!t.block_initialize){var r=this.state.inheritOpt(this.name,"initialize-with");t.given=s.Util.Names.initializeWith(this.state,t.given,r)}else t.given=s.Util.Names.unInitialize(this.state,t.given);var n=this._stripPeriods("given",t.given);return!!this.state.output.append(n,this.given_decor,!0)&&(ret=this.state.output.pop(),ret)},s.NameOutput.prototype._nameSuffix=function(t){var e=t.suffix;"string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&(e=s.Util.Names.initializeWith(this.state,t.suffix,this.state.inheritOpt(this.name,"initialize-with"),!0));var i="";return(e=this._stripPeriods("family",e))&&"."===e.slice(-1)&&(e=e.slice(0,-1),i="."),!!this.state.output.append(e,"empty",!0)&&(ret=this.state.output.pop(),ret.strings.suffix=i+ret.strings.suffix,ret)},s.NameOutput.prototype._getLongStyle=function(t,e,i){var r;return(r=t.short.length&&this.institutionpart["long-with-short"]?this.institutionpart["long-with-short"]:this.institutionpart.long)||(r=new s.Token),r},s.NameOutput.prototype._getShortStyle=function(){return this.institutionpart.short?this.institutionpart.short:new s.Token},s.NameOutput.prototype._parseName=function(t){if(!t["parse-names"]&&void 0!==t["parse-names"])return t;t.family&&!t.given&&t.isInstitution&&(t.literal=t.family,t.family=void 0,t.isInstitution=void 0);var e;t.family&&'"'===t.family.slice(0,1)&&'"'===t.family.slice(-1)||!t["parse-names"]&&void 0!==t["parse-names"]?(t.family=t.family.slice(1,-1),e=!0,t["parse-names"]=0):e=!1,this.state.opt.development_extensions.parse_names&&!t["non-dropping-particle"]&&t.family&&!e&&t.given&&(t["static-particles"]||s.parseParticles(t,!0))},s.NameOutput.prototype.getName=function(t,e,s,r){if(r&&"locale-orig"===e)return{name:!1,usedOrig:r};t.family||(t.family=""),t.given||(t.given="");var n={};n["static-ordering"]=this.getStaticOrder(t);var a=!0;if("locale-orig"!==e&&(a=!1,t.multi)){var o=this.state.opt[e];for(i=0,ilen=o.length;i<ilen;i+=1)if(u=o[i],t.multi._key[u]){a=!0;var l=t.isInstitution;(t=t.multi._key[u]).isInstitution=l,(n=this.getNameParams(u)).transliterated=!0;break}}if(!a){var u=!1;t.multi&&t.multi.main?u=t.multi.main:this.Item.language&&(u=this.Item.language),u&&(n=this.getNameParams(u))}if(!s&&!a)return{name:!1,usedOrig:r};t.family||(t.family=""),t.given||(t.given=""),!(t={family:t.family,given:t.given,"non-dropping-particle":t["non-dropping-particle"],"dropping-particle":t["dropping-particle"],suffix:t.suffix,"static-ordering":n["static-ordering"],"static-particles":t["static-particles"],"reverse-ordering":n["reverse-ordering"],"full-form-always":n["full-form-always"],"parse-names":t["parse-names"],"comma-suffix":t["comma-suffix"],"comma-dropping-particle":t["comma-dropping-particle"],transliterated:n.transliterated,block_initialize:n["block-initialize"],literal:t.literal,isInstitution:t.isInstitution,multi:t.multi}).literal&&!t.given&&t.family&&t.isInstitution&&(t.literal=t.family),t.literal&&(delete t.family,delete t.given),t=this._normalizeNameInput(t);var p;return p=r||!a,{name:t,usedOrig:p}},s.NameOutput.prototype.getNameParams=function(t){var e={},i=s.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),r=this.state.locale[i.best]?i.best:this.state.opt["default-locale"][0],n=this.state.locale[r].opts["name-as-sort-order"],a=this.state.locale[r].opts["name-as-reverse-order"],o=this.state.locale[r].opts["name-never-short"],l=t.split("-")[0];return n&&n[l]&&(e["static-ordering"]=!0,e["reverse-ordering"]=!1),a&&a[l]&&(e["reverse-ordering"]=!0,e["static-ordering"]=!1),o&&o[l]&&(e["full-form-always"]=!0),e["static-ordering"]&&(e["block-initialize"]=!0),e},s.NameOutput.prototype.setRenderedName=function(t){if("bibliography"===this.state.tmp.area){for(var e="",i=0,r=s.NAME_PARTS.length;i<r;i+=1)t[s.NAME_PARTS[i]]&&(e+=t[s.NAME_PARTS[i]]);this.state.tmp.rendered_name.push(e)}},s.NameOutput.prototype.fixupInstitution=function(t,e,i){this.state.sys.getHumanForm&&"legal_case"===this.Item.type&&"authority"===e&&(t.literal=this.state.sys.getHumanForm(this.Item.jurisdiction,t.literal)),t=this._splitInstitution(t,e,i),this.institution.strings["reverse-order"]&&t.long.reverse();var s=t.long,r=t.long.slice(),n=!1;if(this.state.sys.getAbbreviation)for(var a=this.Item.jurisdiction,o=0,l=s.length;o<l;o+=1)a=this.state.transform.loadAbbreviation(a,"institution-part",s[o]),this.state.transform.abbrevs[a]["institution-part"][s[o]]&&(r[o]=this.state.transform.abbrevs[a]["institution-part"][s[o]],n=!0);return t.short=n?r:[],t},s.NameOutput.prototype.getStaticOrder=function(t,e){var i=!1;return!e&&t["static-ordering"]?i=!0:0===this._isRomanesque(t)?i=!0:(!t.multi||!t.multi.main)&&this.Item.language&&["vi","hu"].indexOf(this.Item.language)>-1?i=!0:t.multi&&t.multi.main&&["vi","hu"].indexOf(t.multi.main.slice(0,2))>-1?i=!0:this.state.opt["auto-vietnamese-names"]&&s.VIETNAMESE_NAMES.exec(t.family+" "+t.given)&&s.VIETNAMESE_SPECIALS.exec(t.family+t.given)&&(i=!0),i},s.NameOutput.prototype._splitInstitution=function(t,e,i){var s={};!t.literal&&t.family&&(t.literal=t.family,delete t.family);var r=t.literal.replace(/\s*\|\s*/g,"|");if(r=r.split("|"),"short"===this.institution.strings.form&&this.state.sys.getAbbreviation)for(var n=this.Item.jurisdiction,a=r.length;a>0;a+=-1){var o=r.slice(0,a).join("|");if(n=this.state.transform.loadAbbreviation(n,"institution-entire",o),this.state.transform.abbrevs[n]["institution-entire"][o]){var l=this.state.transform.abbrevs[n]["institution-entire"][o],u=(l=this.state.transform.quashCheck(l)).split(/>>[0-9]{4}>>/),p=l.match(/>>([0-9]{4})>>/);if(l=u.pop(),u.length>0&&this.Item["original-date"]&&this.Item["original-date"].year)for(var h=p.length-1;h>0&&!(parseInt(this.Item["original-date"].year,10)>=parseInt(p[h],10));h+=-1)l=u.pop();r=[l=l.replace(/\s*\|\s*/g,"|")];break}}return r.reverse(),s.long=this._trimInstitution(r,e,i),s},s.NameOutput.prototype._trimInstitution=function(t,e,i){var s=!1,r=!1,n=t.slice(),a=!1;return this.institution&&(void 0!==this.institution.strings["use-first"]&&(s=this.institution.strings["use-first"]),void 0!==this.institution.strings["stop-last"]?a=this.institution.strings["stop-last"]:"authority"===e&&this.state.tmp.authority_stop_last&&(a=this.state.tmp.authority_stop_last),a&&(n=n.slice(0,a),t=t.slice(0,a)),void 0!==this.institution.strings["use-last"]&&(r=this.institution.strings["use-last"]),"authority"===e&&(a&&(this.state.tmp.authority_stop_last=a),r&&(this.state.tmp.authority_stop_last+=-1*r))),!1===s&&(0===this.persons[e].length&&(s=this.institution.strings["substitute-use-first"]),s||(s=0)),!1===r&&(r=s?0:t.length),s>t.length-r&&(s=t.length-r),t=t.slice(0,s),n=n.slice(s),r&&(r>n.length&&(r=n.length),r&&(t=t.concat(n.slice(n.length-r)))),t},s.PublisherOutput=function(t,e){this.state=t,this.group_tok=e,this.varlist=[]},s.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()},s.PublisherOutput.prototype.composeAndBlob=function(){this.and_blob={};var t=!1;"text"===this.group_tok.strings.and?t=this.state.getTerm("and"):"symbol"===this.group_tok.strings.and&&(t="&");var e=new s.Token;e.strings.suffix=" ",e.strings.prefix=" ",this.state.output.append(t,e,!0);var i=this.state.output.pop();e.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(t,e,!0);var r=this.state.output.pop();this.and_blob.single=!1,this.and_blob.multiple=!1,t&&("always"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?this.and_blob.single=r:"never"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?(this.and_blob.single=i,this.and_blob.multiple=i):(this.and_blob.single=i,this.and_blob.multiple=r))},s.PublisherOutput.prototype.composeElements=function(){for(var t=0;t<2;t+=1)for(var e=["publisher","publisher-place"][t],i=0,s=this["publisher-list"].length;i<s;i+=1){var r=this[e+"-list"][i],n=this[e+"-token"];this.state.output.append(r,n,!0),this[e+"-list"][i]=this.state.output.pop()}},s.PublisherOutput.prototype.composePublishers=function(){for(var t,e=0,i=this["publisher-list"].length;e<i;e+=1){t=[this[this.varlist[0]+"-list"][e],this[this.varlist[1]+"-list"][e]],this["publisher-list"][e]=this._join(t,this.group_tok.strings.delimiter)}},s.PublisherOutput.prototype.joinPublishers=function(){var t=this["publisher-list"],e=(this.name_delimiter,this._join(t,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok));this.state.output.append(e,"literal")},s.PublisherOutput.prototype._join=s.NameOutput.prototype._join,s.PublisherOutput.prototype._getToken=s.NameOutput.prototype._getToken,s.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1},s.evaluateLabel=function(t,e,i,r){var n;"locator"===t.strings.term?(r&&r.label&&(n="sub verbo"===r.label?"sub-verbo":r.label),n||(n="page")):n=t.strings.term;var a=t.strings.plural;if("number"!=typeof a){var o="locator"===t.strings.term?r:i;e.processNumber(!1,o,t.strings.term,i.type),a=e.tmp.shadow_numbers[t.strings.term].plural,e.tmp.shadow_numbers[t.strings.term].labelForm||e.tmp.shadow_numbers[t.strings.term].labelDecorations||(e.tmp.shadow_numbers[t.strings.term].labelForm=t.strings.form,e.tmp.shadow_numbers[t.strings.term].labelDecorations=t.decorations.slice()),["locator","number","page"].indexOf(t.strings.term)>-1&&e.tmp.shadow_numbers[t.strings.term].label&&(n=e.tmp.shadow_numbers[t.strings.term].label),t.decorations&&(e.opt.development_extensions.csl_reverse_lookup_support||e.sys.csl_reverse_lookup_support)&&(t.decorations.reverse(),t.decorations.push(["@showid","true",t.cslid]),t.decorations.reverse())}return s.castLabel(e,t,n,a,s.TOLERANT)},s.castLabel=function(t,e,i,s,r){var n=e.strings.form;t.tmp.group_context.tip.label_form&&"static"!==n&&(n=t.tmp.group_context.tip.label_form);var a=t.getTerm(i,n,s,!1,r,e.default_locale);if(t.tmp.strip_periods)a=a.replace(/\./g,"");else for(var o=0,l=e.decorations.length;o<l;o+=1)if("@strip-periods"===e.decorations[o][0]&&"true"===e.decorations[o][1]){a=a.replace(/\./g,"");break}return a},s.Node.name={build:function(t,e){var i;if([s.SINGLETON,s.START].indexOf(this.tokentype)>-1){if(void 0===t.tmp.root){r=void 0;t.tmp.root="citation"}else var r=t.tmp.root;t.inheritOpt(this,"et-al-subsequent-min")&&t.inheritOpt(this,"et-al-subsequent-min")!==t.inheritOpt(this,"et-al-min")&&(t.opt.update_mode=s.POSITION),t.inheritOpt(this,"et-al-subsequent-use-first")&&t.inheritOpt(this,"et-al-subsequent-use-first")!==t.inheritOpt(this,"et-al-use-first")&&(t.opt.update_mode=s.POSITION),t.tmp.root=r,i=function(t,e){t.tmp.etal_term="et-al",t.tmp.name_delimiter=t.inheritOpt(this,"delimiter","name-delimiter",", "),t.tmp["delimiter-precedes-et-al"]=t.inheritOpt(this,"delimiter-precedes-et-al"),"text"===t.inheritOpt(this,"and")?this.and_term=t.getTerm("and","long",0):"symbol"===t.inheritOpt(this,"and")&&(t.opt.development_extensions.expect_and_symbol_form?this.and_term=t.getTerm("and","symbol",0):this.and_term="&"),t.tmp.and_term=this.and_term,s.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof t.tmp.name_delimiter&&(this.and_prefix_multiple=t.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===t.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=t.tmp.name_delimiter:"never"===t.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):"after-inverted-name"===t.inheritOpt(this,"delimiter-precedes-last")&&(this.and_prefix_single&&(this.and_prefix_single=t.tmp.name_delimiter),this.and_prefix_multiple&&(this.and_prefix_multiple=" ")),this.and={},t.inheritOpt(this,"and")?(t.output.append(this.and_term,"empty",!0),this.and.single=t.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,t.output.append(this.and_term,"empty",!0),this.and.multiple=t.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):t.tmp.name_delimiter&&(this.and.single=new s.Blob(t.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new s.Blob(t.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},t.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="…",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=t.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new s.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new s.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),void 0===t.tmp["et-al-min"]&&(t.tmp["et-al-min"]=t.inheritOpt(this,"et-al-min")),void 0===t.tmp["et-al-use-first"]&&(t.tmp["et-al-use-first"]=t.inheritOpt(this,"et-al-use-first")),void 0===t.tmp["et-al-use-last"]&&(t.tmp["et-al-use-last"]=t.inheritOpt(this,"et-al-use-last")),t.nameOutput.name=this},t.build.name_flag=!0,this.execs.push(i)}e.push(this)}},s.Node["name-part"]={build:function(t,e){t.build[this.strings.name]=this}},s.Node.names={build:function(t,e){var i;if(this.tokentype!==s.START&&this.tokentype!==s.SINGLETON||(s.Util.substituteStart.call(this,t,e),t.build.substitute_level.push(1)),this.tokentype===s.SINGLETON&&(t.build.names_variables.push(this.variables),i=function(t,e,i){var s=t.nameOutput.labelVariable;t.nameOutput.reinit(this,s)},this.execs.push(i)),this.tokentype===s.START&&(t.build.names_flag=!0,t.build.names_level+=1,1===t.build.names_level&&(t.build.names_variables=[],t.build.name_label={}),t.build.names_variables.push(this.variables),i=function(t,e,i){t.tmp.can_substitute.push(!0),t.parallel.StartVariable("names",this.variables[0]),t.nameOutput.init(this)},this.execs.push(i)),this.tokentype===s.END){for(var r=0;r<3;r+=1){var n=["family","given","et-al"][r];this[n]=t.build[n],1===t.build.names_level&&(t.build[n]=void 0)}this.label=t.build.name_label,1===t.build.names_level&&(t.build.name_label={}),t.build.names_level+=-1,t.build.names_variables.pop(),i=function(t,e,i){t.tmp.etal_node?this.etal_style=t.tmp.etal_node:this.etal_style="empty",this.etal_term=t.getTerm(t.tmp.etal_term,"long",0),s.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)?(this.etal_prefix_single=" ",this.etal_prefix_multiple=t.tmp.name_delimiter,"always"===t.tmp["delimiter-precedes-et-al"]?this.etal_prefix_single=t.tmp.name_delimiter:"never"===t.tmp["delimiter-precedes-et-al"]?this.etal_prefix_multiple=" ":"after-inverted-name"===t.tmp["delimiter-precedes-et-al"]&&(this.etal_prefix_single=t.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix=""):(this.etal_prefix_single="",this.etal_prefix_multiple="",this.etal_suffix="");for(var r=0;r<3;r+=1){var n=["family","given"][r];t.nameOutput[n]=this[n]}t.nameOutput.with=this.with;var a="",o="";s.STARTSWITH_ROMANESQUE_REGEXP.test("with")&&(a=" ",o=" ");var l={};l.single=new s.Blob("with"),l.single.strings.suffix=o,l.multiple=new s.Blob("with"),l.multiple.strings.suffix=o,"always"===t.inheritOpt(t.nameOutput.name,"delimiter-precedes-last")?(l.single.strings.prefix=t.inheritOpt(this,"delimiter","names-delimiter"),l.multiple.strings.prefix=t.inheritOpt(this,"delimiter","names-delimiter")):"contextual"===t.inheritOpt(t.nameOutput.name,"delimiter-precedes-last")?(l.single.strings.prefix=a,l.multiple.strings.prefix=t.inheritOpt(this,"delimiter","names-delimiter")):"after-inverted-name"===t.inheritOpt(t.nameOutput.name,"delimiter-precedes-last")?(l.single.strings.prefix=t.inheritOpt(this,"delimiter","names-delimiter"),l.multiple.strings.prefix=a):(l.single.strings.prefix=a,l.multiple.strings.prefix=a),t.nameOutput.with=l,t.nameOutput.label=this.label,t.nameOutput.etal_style=this.etal_style,t.nameOutput.etal_term=this.etal_term,t.nameOutput.etal_prefix_single=this.etal_prefix_single,t.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,t.nameOutput.etal_suffix=this.etal_suffix,t.nameOutput.outputNames(),t.tmp["et-al-use-first"]=void 0,t.tmp["et-al-min"]=void 0,t.tmp["et-al-use-last"]=void 0},this.execs.push(i),i=function(t,e){t.tmp.can_substitute.pop()||t.tmp.can_substitute.replace(!1,s.LITERAL),t.parallel.CloseVariable("names"),1===t.tmp.can_substitute.mystack.length&&(t.tmp.can_block_substitute=!1)},this.execs.push(i),t.build.name_flag=!1}e.push(this),this.tokentype!==s.END&&this.tokentype!==s.SINGLETON||(t.build.substitute_level.pop(),s.Util.substituteEnd.call(this,t,e))}},s.Node.number={build:function(t,e){var i;s.Util.substituteStart.call(this,t,e),"roman"===this.strings.form?this.formatter=t.fun.romanizer:"ordinal"===this.strings.form?this.formatter=t.fun.ordinalizer:"long-ordinal"===this.strings.form&&(this.formatter=t.fun.long_ordinalizer),void 0===this.successor_prefix&&(this.successor_prefix=t[t.build.area].opt.layout_delimiter),void 0===this.splice_prefix&&(this.splice_prefix=t[t.build.area].opt.layout_delimiter),i=function(t,e,i){if(0!==this.variables.length){if(void 0===i)var i={};var r;if("locator"!==(r=this.variables[0])||!t.tmp.just_looking){t.parallel.StartVariable(this.variables[0]),"locator"===this.variables[0]?t.parallel.AppendToVariable(e.section):t.parallel.AppendToVariable(e[this.variables[0]]);new RegExp("(?:&|, | and |"+t.getTerm("page-range-delimiter")+")");"collection-number"===r&&"legal_case"===e.type&&(t.tmp.renders_collection_number=!0);e[this.variables[0]];this.strings.label_form_override&&this.strings.label_form_override;var n=this;if(t.tmp.group_context.tip.force_suppress)return!1;"locator"===r?t.processNumber(n,i,r,e.type):(!t.tmp.group_context.tip.condition&&e[r]&&(t.tmp.just_did_number=!0),t.processNumber(n,e,r,e.type)),s.Util.outputNumericField(t,r,e.id),t.parallel.CloseVariable("number"),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!t.tmp.just_looking&&(t.tmp.done_vars.push(this.variables_real[0]),t.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}}},this.execs.push(i),e.push(this),s.Util.substituteEnd.call(this,t,e)}},s.Node.sort={build:function(t,e){if(e=t[t.build.root+"_sort"].tokens,this.tokentype===s.START){"citation"===t.build.area&&(t.parallel.use_parallels=!1,t.opt.sort_citations=!0),t.build.area=t.build.root+"_sort",t.build.extension="_sort";i=function(t,e){if(t.opt.has_layout_locale){for(var i,r=s.localeResolve(e.language,t.opt["default-locale"][0]),n=t[t.tmp.area.slice(0,-5)].opt.sort_locales,a=0,o=n.length;a<o&&((i=n[a][r.bare])||(i=n[a][r.best]),!i);a+=1);i||(i=t.opt["default-locale"][0]),t.tmp.lang_sort_hold=t.opt.lang,t.opt.lang=i}};this.execs.push(i)}if(this.tokentype===s.END){t.build.area=t.build.root,t.build.extension="";var i=function(t,e){t.opt.has_layout_locale&&(t.opt.lang=t.tmp.lang_sort_hold,delete t.tmp.lang_sort_hold)};this.execs.push(i)}e.push(this)}},s.Node.substitute={build:function(t,e){var i;this.tokentype===s.START&&(i=function(t,e){t.tmp.can_block_substitute=!0,t.tmp.value.length&&t.tmp.can_substitute.replace(!1,s.LITERAL)},this.execs.push(i)),e.push(this)}},s.Node.text={build:function(t,e){var i,r,n,a,o,l,u,p,h,c,f,m;if(this.postponed_macro){var d=s.Util.cloneToken(this);d.name="group",d.tokentype=s.START,s.Node.group.build.call(d,t,e),s.expandMacro.call(t,this,e);var g=s.Util.cloneToken(this);g.name="group",g.tokentype=s.END,"juris-locator-label"===this.postponed_macro&&(g.isJurisLocatorLabel=!0),s.Node.group.build.call(g,t,e)}else{if(s.Util.substituteStart.call(this,t,e),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),r="long",n=0,this.strings.form&&(r=this.strings.form),this.strings.plural&&(n=this.strings.plural),"citation-number"===this.variables_real[0]||"year-suffix"===this.variables_real[0]||"citation-label"===this.variables_real[0])"citation-number"===this.variables_real[0]?("citation"===t.build.root&&(t.opt.update_mode=s.NUMERIC),"bibliography"===t.build.root&&(t.opt.bib_mode=s.NUMERIC),"bibliography_sort"===t.build.area&&(t.opt.citation_number_sort_used=!0),"citation-number"===t[t.tmp.area].opt.collapse&&(this.range_prefix=t.getTerm("citation-range-delimiter")),this.successor_prefix=t[t.build.area].opt.layout_delimiter,this.splice_prefix=t[t.build.area].opt.layout_delimiter,i=function(t,e,i){if(a=""+e.id,!t.tmp.just_looking){if(i&&i["author-only"]){t.tmp.element_trace.replace("do-not-suppress-me");var r=t.getTerm("reference","long","singular");void 0===r&&(r="reference"),m=s.Output.Formatters["capitalize-first"](t,r),t.output.append(m+" "),t.tmp.last_element_trace=!0}i&&i["suppress-author"]&&(t.tmp.last_element_trace&&t.tmp.element_trace.replace("suppress-me"),t.tmp.last_element_trace=!1),o=t.registry.registry[a].seq,t.opt.citation_number_slug?t.output.append(t.opt.citation_number_slug,this):(l=new s.NumericBlob(!1,o,this,e.id),t.tmp.in_cite_predecessor&&(t.tmp.just_looking,l.suppress_splice_prefix=!0),t.output.append(l,"literal"))}},this.execs.push(i)):"year-suffix"===this.variables_real[0]?(t.opt.has_year_suffix=!0,"year-suffix-ranged"===t[t.tmp.area].opt.collapse&&(this.range_prefix=t.getTerm("citation-range-delimiter")),this.successor_prefix=t[t.build.area].opt.layout_delimiter,t[t.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=t[t.build.area].opt["year-suffix-delimiter"]),i=function(t,e){if(t.registry.registry[e.id]&&!1!==t.registry.registry[e.id].disambig.year_suffix&&!t.tmp.just_looking){o=parseInt(t.registry.registry[e.id].disambig.year_suffix,10),t[t.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=t[t.tmp.area].opt.cite_group_delimiter),l=new s.NumericBlob(!1,o,this,e.id),u=new s.Util.Suffixator(s.SUFFIX_CHARS),l.setFormatter(u),t.output.append(l,"literal"),p=!1;for(var i=0,r=t.tmp.group_context.mystack.length;i<r;i++)if(flags=t.tmp.group_context.mystack[i],!flags.variable_success&&(flags.variable_attempt||!flags.variable_attempt&&!flags.term_intended)){p=!0;break}h=t[t.tmp.area].opt["year-suffix-delimiter"],p&&h&&!t.tmp.sort_key_flag&&(t.tmp.splice_delimiter=t[t.tmp.area].opt["year-suffix-delimiter"])}},this.execs.push(i)):"citation-label"===this.variables_real[0]&&(t.opt.has_year_suffix=!0,i=function(t,e){(c=e["citation-label"])||(c=t.getCitationLabel(e)),t.tmp.just_looking||(f="",t.registry.registry[e.id]&&!1!==t.registry.registry[e.id].disambig.year_suffix&&(o=parseInt(t.registry.registry[e.id].disambig.year_suffix,10),f=t.fun.suffixator.format(o)),c+=f),t.output.append(c,this)},this.execs.push(i));else if(this.strings.term)i=function(t,e,i){var a,o=t.opt.gender[e.type],l=this.strings.term;if(""!==(l=t.getTerm(l,r,n,o,s.TOLERANT,this.default_locale))&&(t.tmp.group_context.tip.term_intended=!0),s.UPDATE_GROUP_CONTEXT_CONDITION(t,l),a=t.tmp.term_predecessor||"in-text"===t.opt.class&&"citation"===t.tmp.area?l:s.Output.Formatters["capitalize-first"](t,l),t.tmp.strip_periods)a=a.replace(/\./g,"");else for(var u=0,p=this.decorations.length;u<p;u+=1)if("@strip-periods"===this.decorations[u][0]&&"true"===this.decorations[u][1]){a=a.replace(/\./g,"");break}t.output.append(a,this)},this.execs.push(i),t.build.term=!1,t.build.form=!1,t.build.plural=!1;else if(this.variables_real.length){if(i=function(t,e,i){"locator"!==this.variables_real[0]&&(t.tmp.have_collapsed=!1);var s=this.variables[0];"title"!==s||"short"!==r&&!e["title-short"]||(s="title-short"),t.parallel.StartVariable(s),t.parallel.AppendToVariable(e[s],s),!t.tmp.group_context.tip.condition&&e[this.variables[0]]&&(t.tmp.just_did_number=!1)},this.execs.push(i),s.MULTI_FIELDS.indexOf(this.variables_real[0])>-1||["language-name","language-name-original"].indexOf(this.variables_real[0])>-1){var b=this.variables[0],_=!1,v=!1,y=!1;"short"===r?"container-title"===this.variables_real[0]?v="journalAbbreviation":"title"===this.variables_real[0]&&(v="title-short"):b=!1,t.build.extension?y=!0:(y=!0,_=!0),i=t.transform.getOutputFunction(this.variables,b,_,v,y)}else i=s.CITE_FIELDS.indexOf(this.variables_real[0])>-1?function(t,e,i){i&&i[this.variables[0]]&&(t.processNumber(this,i,this.variables[0],e.type),s.Util.outputNumericField(t,this.variables[0],e.id),t.output.append(void 0,this,!1,!1,!0),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!t.tmp.just_looking&&t.tmp.done_vars.push(this.variables_real[0]))}:["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])>-1?function(t,e){t.processNumber(this,e,this.variables[0],e.type),s.Util.outputNumericField(t,this.variables[0],e.id)}:["URL","DOI"].indexOf(this.variables_real[0])>-1?function(t,e){var i;this.variables[0]&&(i=t.getVariable(e,this.variables[0],r))&&(t.opt.development_extensions.wrap_url_and_doi?this.decorations.length&&this.decorations[0][0]==="@"+this.variables[0]||(this.decorations=[["@"+this.variables[0],"true"]].concat(this.decorations)):this.decorations.length&&this.decorations[0][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(1)),t.output.append(i,this,!1,!1,!0))}:"section"===this.variables_real[0]?function(t,e){var i;(i=t.getVariable(e,this.variables[0],r))&&t.output.append(i,this)}:"hereinafter"===this.variables_real[0]?function(t,e){var i=t.transform.abbrevs.default.hereinafter[e.id];i&&(t.output.append(i,this),t.tmp.group_context.tip.variable_success=!0)}:function(t,e){var i;this.variables[0]&&(i=t.getVariable(e,this.variables[0],r))&&(i=(i=""+i).split("\\").join(""),t.output.append(i,this))};this.execs.push(i),i=function(t,e){t.parallel.CloseVariable("text")},this.execs.push(i)}else this.strings.value&&(i=function(t,e){t.tmp.group_context.tip.term_intended=!0,s.UPDATE_GROUP_CONTEXT_CONDITION(t,this.strings.value,!0),t.output.append(this.strings.value,this)},this.execs.push(i));e.push(this),s.Util.substituteEnd.call(this,t,e)}}},s.Attributes={},s.Attributes["@genre"]=function(t,e){e=e.replace("-"," ");this.tests.push(function(t,i){return e===t.genre})},s.Attributes["@disambiguate"]=function(t,e){if("true"===e){t.opt.has_disambiguate=!0;i=function(e,i){return t.tmp.disambiguate_maxMax+=1,!!(t.tmp.disambig_settings.disambiguate&&t.tmp.disambiguate_count<t.tmp.disambig_settings.disambiguate)&&(t.tmp.disambiguate_count+=1,!0)};this.tests.push(i)}else if("check-ambiguity-and-backreference"===e){var i=function(e,i){return!!(t.registry.registry[e.id].disambig.disambiguate&&t.registry.registry[e.id]["citation-count"]>1)};this.tests.push(i)}},s.Attributes["@is-numeric"]=function(t,e,i){for(var r=e.split(/\s+/),n=0;n<r.length;n+=1)this.tests.push(function(e){return function(i,r){var n=i;if(["locator","locator-extra"].indexOf(e)>-1&&(n=r),void 0===n)return!1;if(s.NUMERIC_VARIABLES.indexOf(e)>-1){if(t.tmp.shadow_numbers[e]||t.processNumber(!1,n,e,i.type),n[e]&&t.tmp.shadow_numbers[e].numeric)return!0}else if(["title","locator-extra","version"].indexOf(e)>-1&&n[e]&&n[e].slice(-1)===""+parseInt(n[e].slice(-1),10))return!0;return!1}}(r[n]))},s.Attributes["@is-uncertain-date"]=function(t,e){for(var i=e.split(/\s+/),s=0,r=i.length;s<r;s+=1)this.tests.push(function(t){return function(e,i){return!(!e[t]||!e[t].circa)}}(i[s]))},s.Attributes["@locator"]=function(t,e){for(var i=e.replace("sub verbo","sub-verbo"),s=0,r=(i=i.split(/\s+/)).length;s<r;s+=1)this.tests.push(function(e){return function(i,s){var r;return t.processNumber(!1,s,"locator"),r=t.tmp.shadow_numbers.locator.label,e===r}}(i[s]))},s.Attributes["@position"]=function(t,e){var i;t.opt.update_mode=s.POSITION,t.parallel.use_parallels=null;for(var r=e.split(/\s+/),n=0,a=r.length;n<a;n+=1)"first"===(i=r[n])?i=s.POSITION_FIRST:"subsequent"===i?i=s.POSITION_SUBSEQUENT:"ibid"===i?i=s.POSITION_IBID:"ibid-with-locator"===i&&(i=s.POSITION_IBID_WITH_LOCATOR),"near-note"===i?this.tests.push(function(t,e){return!!(e&&e.position>=s.POSITION_SUBSEQUENT&&e["near-note"])}):"far-note"===i?this.tests.push(function(t,e){return!(!e||e.position!=s.POSITION_SUBSEQUENT||e["near-note"])}):this.tests.push(function(e){return function(i,s){if("bibliography"===t.tmp.area)return!1;if(s&&void 0===s.position&&(s.position=0),s&&"number"==typeof s.position){if(0===s.position&&0===e)return!0;if(e>0&&s.position>=e)return!0}else if(0===e)return!0;return!1}}(i))},s.Attributes["@type"]=function(t,e){for(var i=e.split(/\s+/),s=[],r=0,n=i.length;r<n;r+=1)s.push(function(t){return function(e,i){return!(e.type!==t)}}(i[r]));this.tests.push(t.fun.match.any(this,t,s))},s.Attributes["@variable"]=function(t,e){var i;if(this.variables=e.split(/\s+/),this.variables_real=this.variables.slice(),"label"===this.name&&this.variables[0])this.strings.term=this.variables[0];else if(["names","date","text","number"].indexOf(this.name)>-1)i=function(t,e,i){for(s=this.variables.length-1;s>-1;s+=-1)this.variables.pop();for(var s=0,r=this.variables_real.length;s<r;s++)-1!==t.tmp.done_vars.indexOf(this.variables_real[s])||i&&"legal_case"===e.type&&i["suppress-author"]&&"title"===this.variables_real[s]||this.variables.push(this.variables_real[s]),t.tmp.can_block_substitute&&t.tmp.done_vars.push(this.variables_real[s])},this.execs.push(i),i=function(t,e,i){output=!1;for(var r=0,n=this.variables.length;r<n;r++){var a=this.variables[r];if(["authority","committee"].indexOf(a)>-1&&"string"==typeof e[a]&&"names"===this.name){var o=!0,l=e[a].split(/\s*;\s*/),u={};if(e.multi&&e.multi._keys[a])for(var p in e.multi._keys[a])if(u[p]=e.multi._keys[a][p].split(/\s*;\s*/),u[p].length!==l.length){o=!1;break}o||(l=[e[a]],u=e.multi._keys[a]);for(var h=0,c=l.length;h<c;h++){var f={literal:l[h],multi:{_key:{}}};for(var p in u){var m={literal:u[p][h]};f.multi._key[p]=m}l[h]=f}e[a]=l}if("short"!==this.strings.form||e[a]||("title"===a?a="title-short":"container-title"===a&&(a="journalAbbreviation")),"year-suffix"===a){output=!0;break}if(s.DATE_VARIABLES.indexOf(a)>-1){if(t.opt.development_extensions.locator_date_and_revision&&"locator-date"===a){output=!0;break}if(e[a]){for(var d in e[a])if((-1!==this.dateparts.indexOf(d)||"literal"===d)&&e[a][d]){output=!0;break}if(output)break}}else{if("locator"===a){i&&i.locator&&(output=!0);break}if("locator-extra"===a){i&&i["locator-extra"]&&(output=!0);break}if(["citation-number","citation-label"].indexOf(a)>-1){output=!0;break}if("first-reference-note-number"===a){i&&i["first-reference-note-number"]&&(output=!0);break}if("hereinafter"===a){t.transform.abbrevs.default.hereinafter[e.id]&&t.sys.getAbbreviation&&e.id&&(output=!0);break}if("object"==typeof e[a]){e[a].length;break}if("string"==typeof e[a]&&e[a]){output=!0;break}if("number"==typeof e[a]){output=!0;break}}if(output)break}if(output){for(var r=0,n=this.variables_real.length;r<n;r++)"citation-number"===(a=this.variables_real[r])&&"bibliography"===t.tmp.area||(t.tmp.cite_renders_content=!0),t.tmp.group_context.tip.variable_success=!0,t.tmp.can_substitute.value()&&"bibliography"===t.tmp.area&&"string"==typeof e[a]&&(t.tmp.name_node.top=t.output.current.value(),t.tmp.rendered_name.push(e[a]));t.tmp.can_substitute.replace(!1,s.LITERAL)}else t.tmp.group_context.tip.variable_attempt=!0},this.execs.push(i);else if(["if","else-if","condition"].indexOf(this.name)>-1)for(var r=function(e){return function(i,s){var r=i;if(s&&["locator","locator-extra","first-reference-note-number","locator-date"].indexOf(e)>-1&&(r=s),"hereinafter"===e&&t.sys.getAbbreviation&&r.id){if(t.transform.abbrevs.default.hereinafter[r.id])return!0}else if(r[e]){if("number"==typeof r[e]||"string"==typeof r[e])return!0;if("object"==typeof r[e])for(key in r[e])if(r[e][key])return!0}return!1}},n=0,a=this.variables.length;n<a;n+=1)this.tests.push(r(this.variables[n]))},s.Attributes["@page"]=function(t,e){for(var i=e.replace("sub verbo","sub-verbo"),s=0,r=(i=i.split(/\s+/)).length;s<r;s+=1)this.tests.push(function(e){return function(i,s){var r;return t.processNumber(!1,i,"page",i.type),r=t.tmp.shadow_numbers.page.label?"sub verbo"===t.tmp.shadow_numbers.page.label?"sub-verbo":t.tmp.shadow_numbers.page.label:"page",e===r}}(i[s]))},s.Attributes["@number"]=function(t,e){for(var i=e.replace("sub verbo","sub-verbo"),s=0,r=(i=i.split(/\s+/)).length;s<r;s+=1)this.tests.push(function(e){return function(i,s){var r;return t.processNumber(!1,i,"number",i.type),r=t.tmp.shadow_numbers.number.label?"sub verbo"===t.tmp.shadow_numbers.number.label?"sub-verbo":t.tmp.shadow_numbers.number.label:"number",e===r}}(i[s]))},s.Attributes["@jurisdiction"]=function(t,e){for(var i=e.split(/\s+/),s=0,r=i.length;s<r;s+=1)i[s]=i[s].split(":");for(var s=0,r=i.length;s<r;s+=1){var n=i[s].slice();this.tests.push(function(t){return function(e,i){if(!e.jurisdiction)return!1;for(var s=e.jurisdiction.split(":"),r=0,n=s.length;r<n;r+=1)s[r]=s[r].split(":");for(r=t.length;r>0;r+=-1)if(t.slice(0,r).join(":")!==s.slice(0,r).join(":"))return!1;return!0}}(n))}},s.Attributes["@context"]=function(t,e){this.tests.push(function(i,s){return t.tmp.area.slice(0,e.length)===e})},s.Attributes["@has-year-only"]=function(t,e){for(var i=e.split(/\s+/),s=0,r=i.length;s<r;s+=1)this.tests.push(function(t){return function(e,i){var s=e[t];return!(!s||s.month||s.season)}}(i[s]))},s.Attributes["@has-to-month-or-season"]=function(t,e){for(var i=e.split(/\s+/),s=0,r=i.length;s<r;s+=1)this.tests.push(function(t){return function(e,i){var s=e[t];return!(!s||!s.month&&!s.season||s.day)}}(i[s]))},s.Attributes["@has-day"]=function(t,e){for(var i=e.split(/\s+/),s=0,r=i.length;s<r;s+=1)this.tests.push(function(t){return function(e,i){var s=e[t];return!(!s||!s.day)}}(i[s]))},s.Attributes["@subjurisdictions"]=function(t,e){var i=parseInt(e,10);this.tests.push(function(t,e){var s=0;return t.jurisdiction&&(s=t.jurisdiction.split(":").length),s&&(s+=-1),s>=i})},s.Attributes["@is-plural"]=function(t,e){this.tests.push(function(i,s){var r=i[e];if(r&&r.length){for(var n=0,a=0,o=!1,l=0,u=r.length;l<u;l+=1)t.opt.development_extensions.spoof_institutional_affiliations&&(r[l].literal||r[l].isInstitution&&r[l].family&&!r[l].given)?(a+=1,o=!1):(n+=1,o=!0);if(n>1)return!0;if(a>1)return!0;if(a&&o)return!0}return!1})},s.Attributes["@locale"]=function(t,e){var i,r,n,a,o=t.opt["default-locale"][0];if("layout"===this.name){if(this.locale_raw=e,this.tokentype===s.START){var l=e.split(/\s+/),u={},p=s.localeResolve(l[0],o);p.generic?u[p.generic]=p.best:u[p.best]=p.best;for(var h=1,c=l.length;h<c;h+=1){var f=s.localeResolve(l[h],o);f.generic?u[f.generic]=p.best:u[f.best]=p.best}t[t.build.area].opt.sort_locales.push(u)}t.opt.has_layout_locale=!0}else{a=e.split(/\s+/);var m=[];for(h=0,c=a.length;h<c;h+=1)n=a[h],r=s.localeResolve(n,o),2===a[h].length&&m.push(r.bare),t.localeConfigure(r,!0),a[h]=r;var d=a.slice(),g=function(t,e,r){return function(n,a){var o;i=[],o=!1;var l,u=!1;for(l=n.language?n.language:e,u=s.localeResolve(l,e),h=0,c=t.length;h<c;h+=1)if(u.best===t[h].best){o=!0;break}return!o&&r.indexOf(u.bare)>-1&&(o=!0),o}};this.tests.push(g(d,o,m))}},s.Attributes["@authority-residue"]=function(t,e){this.tests.push(function(){var i="true"===e;return function(e,s){return e.authority&&e.authority[0]&&e.authority[0].family&&e.authority[0].family.split("|").length+t.tmp.authority_stop_last>0?i:!i}}())},s.Attributes["@locale-internal"]=function(t,e){var i,r,n,a,o,l;for(a=e.split(/\s+/),this.locale_bares=[],o=0,l=a.length;o<l;o+=1)n=a[o],r=s.localeResolve(n,t.opt["default-locale"][0]),2===a[o].length&&this.locale_bares.push(r.bare),t.localeConfigure(r),a[o]=r;this.locale_default=t.opt["default-locale"][0],this.locale=a[0].best,this.locale_list=a.slice();var u=this;this.tests.push(function(e){return function(r,a){var u;i=[],u=!1;var p=!1;if(r.language&&(n=r.language,(p=s.localeResolve(n,t.opt["default-locale"][0])).best===t.opt["default-locale"][0]&&(p=!1)),p){for(o=0,l=e.locale_list.length;o<l;o+=1)if(p.best===e.locale_list[o].best){t.opt.lang=e.locale,t.tmp.last_cite_locale=e.locale,t.output.openLevel("empty"),t.output.current.value().new_locale=e.locale,u=!0;break}!u&&e.locale_bares.indexOf(p.bare)>-1&&(t.opt.lang=e.locale,t.tmp.last_cite_locale=e.locale,t.output.openLevel("empty"),t.output.current.value().new_locale=e.locale,u=!0)}return u}}(u))},s.Attributes["@is-parallel"]=function(t,e){for(var i=e.split(" "),s=0,r=i.length;s<r;s+=1)"true"===i[s]?i[s]=!0:"false"===i[s]&&(i[s]=!1);this.strings.set_parallel_condition=i},s.Attributes["@require"]=function(t,e){this.strings.require=e},s.Attributes["@reject"]=function(t,e){this.strings.reject=e},s.Attributes["@gender"]=function(t,e){this.gender=e},s.Attributes["@cslid"]=function(t,e){this.cslid=parseInt(e,10)},s.Attributes["@label-form"]=function(t,e){this.strings.label_form_override=e},s.Attributes["@part-separator"]=function(t,e){this.strings["part-separator"]=e},s.Attributes["@leading-noise-words"]=function(t,e){this["leading-noise-words"]=e},s.Attributes["@name-never-short"]=function(t,e){this["name-never-short"]=e},s.Attributes["@class"]=function(t,e){t.opt.class=e},s.Attributes["@version"]=function(t,e){t.opt.version=e},s.Attributes["@value"]=function(t,e){this.strings.value=e},s.Attributes["@name"]=function(t,e){this.strings.name=e},s.Attributes["@form"]=function(t,e){this.strings.form=e},s.Attributes["@date-parts"]=function(t,e){this.strings["date-parts"]=e},s.Attributes["@range-delimiter"]=function(t,e){this.strings["range-delimiter"]=e},s.Attributes["@macro"]=function(t,e){this.postponed_macro=e},s.Attributes["@term"]=function(t,e){this.strings.term="sub verbo"===e?"sub-verbo":e},s.Attributes["@xmlns"]=function(t,e){},s.Attributes["@lang"]=function(t,e){e&&(t.build.lang=e)},s.Attributes["@lingo"]=function(t,e){},s.Attributes["@macro-has-date"]=function(t,e){this["macro-has-date"]=!0},s.Attributes["@suffix"]=function(t,e){this.strings.suffix=e},s.Attributes["@prefix"]=function(t,e){this.strings.prefix=e},s.Attributes["@delimiter"]=function(t,e){this.strings.delimiter=e},s.Attributes["@match"]=function(t,e){this.match=e},s.Attributes["@names-min"]=function(t,e){var i=parseInt(e,10);t[t.build.area].opt.max_number_of_names<i&&(t[t.build.area].opt.max_number_of_names=i),this.strings["et-al-min"]=i},s.Attributes["@names-use-first"]=function(t,e){this.strings["et-al-use-first"]=parseInt(e,10)},s.Attributes["@names-use-last"]=function(t,e){this.strings["et-al-use-last"]="true"===e},s.Attributes["@sort"]=function(t,e){"descending"===e&&(this.strings.sort_direction=s.DESCENDING)},s.Attributes["@plural"]=function(t,e){"always"===e||"true"===e?this.strings.plural=1:"never"===e||"false"===e?this.strings.plural=0:"contextual"===e&&(this.strings.plural=!1)},s.Attributes["@has-publisher-and-publisher-place"]=function(t,e){this.strings["has-publisher-and-publisher-place"]=!0},s.Attributes["@publisher-delimiter-precedes-last"]=function(t,e){this.strings["publisher-delimiter-precedes-last"]=e},s.Attributes["@publisher-delimiter"]=function(t,e){this.strings["publisher-delimiter"]=e},s.Attributes["@publisher-and"]=function(t,e){this.strings["publisher-and"]=e},s.Attributes["@newdate"]=function(t,e){},s.Attributes["@givenname-disambiguation-rule"]=function(t,e){s.GIVENNAME_DISAMBIGUATION_RULES.indexOf(e)>-1&&(t.citation.opt["givenname-disambiguation-rule"]=e)},s.Attributes["@collapse"]=function(t,e){e&&(t[this.name].opt.collapse=e)},s.Attributes["@cite-group-delimiter"]=function(t,e){e&&(t[t.tmp.area].opt.cite_group_delimiter=e)},s.Attributes["@names-delimiter"]=function(t,e){t.setOpt(this,"names-delimiter",e)},s.Attributes["@name-form"]=function(t,e){t.setOpt(this,"name-form",e)},s.Attributes["@subgroup-delimiter"]=function(t,e){this.strings["subgroup-delimiter"]=e},s.Attributes["@subgroup-delimiter-precedes-last"]=function(t,e){this.strings["subgroup-delimiter-precedes-last"]=e},s.Attributes["@name-delimiter"]=function(t,e){t.setOpt(this,"name-delimiter",e)},s.Attributes["@et-al-min"]=function(t,e){var i=parseInt(e,10);t[t.build.area].opt.max_number_of_names<i&&(t[t.build.area].opt.max_number_of_names=i),t.setOpt(this,"et-al-min",i)},s.Attributes["@et-al-use-first"]=function(t,e){t.setOpt(this,"et-al-use-first",parseInt(e,10))},s.Attributes["@et-al-use-last"]=function(t,e){"true"===e?t.setOpt(this,"et-al-use-last",!0):t.setOpt(this,"et-al-use-last",!1)},s.Attributes["@et-al-subsequent-min"]=function(t,e){var i=parseInt(e,10);t[t.build.area].opt.max_number_of_names<i&&(t[t.build.area].opt.max_number_of_names=i),t.setOpt(this,"et-al-subsequent-min",i)},s.Attributes["@et-al-subsequent-use-first"]=function(t,e){t.setOpt(this,"et-al-subsequent-use-first",parseInt(e,10))},s.Attributes["@suppress-min"]=function(t,e){this.strings["suppress-min"]=parseInt(e,10)},s.Attributes["@suppress-max"]=function(t,e){this.strings["suppress-max"]=parseInt(e,10)},s.Attributes["@and"]=function(t,e){t.setOpt(this,"and",e)},s.Attributes["@delimiter-precedes-last"]=function(t,e){t.setOpt(this,"delimiter-precedes-last",e)},s.Attributes["@delimiter-precedes-et-al"]=function(t,e){t.setOpt(this,"delimiter-precedes-et-al",e)},s.Attributes["@initialize-with"]=function(t,e){t.setOpt(this,"initialize-with",e)},s.Attributes["@initialize"]=function(t,e){"false"===e&&t.setOpt(this,"initialize",!1)},s.Attributes["@name-as-reverse-order"]=function(t,e){this["name-as-reverse-order"]=e},s.Attributes["@name-as-sort-order"]=function(t,e){"style-options"===this.name?this["name-as-sort-order"]=e:t.setOpt(this,"name-as-sort-order",e)},s.Attributes["@sort-separator"]=function(t,e){t.setOpt(this,"sort-separator",e)},s.Attributes["@year-suffix-delimiter"]=function(t,e){t[this.name].opt["year-suffix-delimiter"]=e},s.Attributes["@after-collapse-delimiter"]=function(t,e){t[this.name].opt["after-collapse-delimiter"]=e},s.Attributes["@subsequent-author-substitute"]=function(t,e){t[this.name].opt["subsequent-author-substitute"]=e},s.Attributes["@subsequent-author-substitute-rule"]=function(t,e){t[this.name].opt["subsequent-author-substitute-rule"]=e},s.Attributes["@disambiguate-add-names"]=function(t,e){"true"===e&&(t.opt["disambiguate-add-names"]=!0)},s.Attributes["@disambiguate-add-givenname"]=function(t,e){"true"===e&&(t.opt["disambiguate-add-givenname"]=!0)},s.Attributes["@disambiguate-add-year-suffix"]=function(t,e){"true"===e&&"numeric"!==t.opt.xclass&&(t.opt["disambiguate-add-year-suffix"]=!0)},s.Attributes["@second-field-align"]=function(t,e){"flush"!==e&&"margin"!==e||(t[this.name].opt["second-field-align"]=e)},s.Attributes["@hanging-indent"]=function(t,e){"true"===e&&(t[this.name].opt.hangingindent=!0)},s.Attributes["@line-spacing"]=function(t,e){e&&e.match(/^[.0-9]+$/)&&(t[this.name].opt["line-spacing"]=parseFloat(e,10))},s.Attributes["@entry-spacing"]=function(t,e){e&&e.match(/^[.0-9]+$/)&&(t[this.name].opt["entry-spacing"]=parseFloat(e,10))},s.Attributes["@near-note-distance"]=function(t,e){t[this.name].opt["near-note-distance"]=parseInt(e,10)},s.Attributes["@text-case"]=function(t,e){this.execs.push(function(t,i){"normal"===e?this.text_case_normal=!0:(this.strings["text-case"]=e,"title"===e&&(t.opt["default-locale"][0].slice(0,2),i.jurisdiction&&(this.strings["text-case"]="passthrough")))})},s.Attributes["@page-range-format"]=function(t,e){t.opt["page-range-format"]=e},s.Attributes["@year-range-format"]=function(t,e){t.opt["year-range-format"]=e},s.Attributes["@default-locale"]=function(t,e){if("style"===this.name){var i,s,r,n,a;if(n=e.match(/-x-(sort|translit|translat)-/g))for(r=0,s=n.length;r<s;r+=1)n[r]=n[r].replace(/^-x-/,"").replace(/-$/,"");for(a=[(i=e.split(/-x-(?:sort|translit|translat)-/))[0]],r=1,s=i.length;r<s;r+=1)a.push(n[r-1]),a.push(i[r]);for(s=(i=a.slice()).length,r=1;r<s;r+=2)t.opt["locale-"+i[r]].push(i[r+1].replace(/^\s*/g,"").replace(/\s*$/g,""));i.length?t.opt["default-locale"]=i.slice(0,1):t.opt["default-locale"]=["en"]}else"true"===e&&(this.default_locale=!0)},s.Attributes["@default-locale-sort"]=function(t,e){t.opt["default-locale-sort"]=e},s.Attributes["@demote-non-dropping-particle"]=function(t,e){t.opt["demote-non-dropping-particle"]=e},s.Attributes["@initialize-with-hyphen"]=function(t,e){"false"===e&&(t.opt["initialize-with-hyphen"]=!1)},s.Attributes["@institution-parts"]=function(t,e){this.strings["institution-parts"]=e},s.Attributes["@if-short"]=function(t,e){"true"===e&&(this.strings["if-short"]=!0)},s.Attributes["@substitute-use-first"]=function(t,e){this.strings["substitute-use-first"]=parseInt(e,10)},s.Attributes["@use-first"]=function(t,e){this.strings["use-first"]=parseInt(e,10)},s.Attributes["@stop-last"]=function(t,e){this.strings["stop-last"]=-1*parseInt(e,10)},s.Attributes["@use-last"]=function(t,e){this.strings["use-last"]=parseInt(e,10)},s.Attributes["@reverse-order"]=function(t,e){"true"===e&&(this.strings["reverse-order"]=!0)},s.Attributes["@display"]=function(t,e){2===t.bibliography.tokens.length&&(t.opt.using_display=!0),this.strings.cls=e},s.Stack=function(t,e){this.mystack=[],(e||t)&&this.mystack.push(t),this.tip=this.mystack[0]},s.Stack.prototype.push=function(t,e){e||t?this.mystack.push(t):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]},s.Stack.prototype.clear=function(){this.mystack=[],this.tip={}},s.Stack.prototype.replace=function(t,e){if(0===this.mystack.length)throw"Internal CSL processor error: attempt to replace nonexistent stack item with "+t;this.mystack[this.mystack.length-1]=e||t?t:"",this.tip=this.mystack[this.mystack.length-1]},s.Stack.prototype.pop=function(){var t=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},t},s.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]},s.Stack.prototype.length=function(){return this.mystack.length},s.Parallel=function(t){this.state=t,this.sets=new s.Stack([]),this.try_cite=!0,this.use_parallels=!1,this.midVars=["section","volume","container-title","collection-number","issue","page-first","page","number"],this.ignoreVarsLawGeneral=["first-reference-note-number","locator","label","page-first","page","genre"],this.ignoreVarsLawProceduralHistory=["issued","first-reference-note-number","locator","label","page-first","page","genre","jurisdiction"],this.ignoreVarsOrders=["first-reference-note-number"],this.ignoreVarsOther=["first-reference-note-number","locator","label","section","page-first","page"]},s.Parallel.prototype.isMid=function(t){return this.midVars.indexOf(t)>-1},s.Parallel.prototype.StartCitation=function(t,e){this.parallel_conditional_blobs_list=[],this.use_parallels&&(this.sortedItems=t,this.sortedItemsPos=-1,this.sets.clear(),this.sets.push([]),this.in_series=!0,this.delim_counter=0,this.delim_pointers=[],this.out=e||this.state.output.queue,this.master_was_neutral_cite=!0)},s.Parallel.prototype.StartCite=function(t,e,i){var r,n,a,o,l,u,p;if(this.use_parallels){this.sets.value().length&&this.sets.value()[0].itemId==t.id&&this.ComposeSet(),this.sortedItemsPos+=1,e&&(r=e.position),this.try_cite=!0;for(var h=!1,c=0,f=s.PARALLEL_MATCH_VARS.length;c<f;c+=1)if(t[s.PARALLEL_MATCH_VARS[c]]){h=!0;break}var m=!0,d=this.sets.value().slice(-1)[0];if(d&&d.Item){var g=d.Item.jurisdiction?d.Item.jurisdiction.split(":")[0]:"",b=t.jurisdiction?t.jurisdiction.split(":")[0]:"";d.Item.title!==t.title?m=!1:g!==b?m=!1:d.Item.type!==t.type?m=!1:["article-journal","article-magazine"].indexOf(t.type)>-1&&(this.state.opt.development_extensions.handle_parallel_articles&&d.Item["container-title"]===t["container-title"]||(m=!1))}if(m&&h&&-1!==s.PARALLEL_TYPES.indexOf(t.type)||(this.try_cite=!0,this.in_series&&(this.in_series=!1)),this.cite={},this.cite.front=[],this.cite.mid=[],this.cite.back=[],this.cite.front_collapse={},this.cite.back_forceme=[],this.cite.position=r,this.cite.Item=t,this.cite.itemId=""+t.id,this.cite.prevItemID=""+i,this.target="front",["treaty"].indexOf(t.type)>-1)this.ignoreVars=this.ignoreVarsOrders;else if(["article-journal","article-magazine"].indexOf(t.type)>-1)this.ignoreVars=this.ignoreVarsOther;else if(e&&e.prefix){this.ignoreVars=this.ignoreVarsLawProceduralHistory,this.cite.useProceduralHistory=!0;var _=this.sets.value()[this.sets.value().length-1];if(_&&_.back)for(c=_.back.length-1;c>-1;c+=-1)_.back[c]&&_[_.back[c]]&&delete _[_.back[c]]}else this.ignoreVars=this.ignoreVarsLawGeneral;if(this.sortedItems&&this.sortedItemsPos>0&&this.sortedItemsPos<this.sortedItems.length){if(a=this.sortedItems[this.sortedItemsPos][1],l=""+this.sortedItems[this.sortedItemsPos-1][1].id,o=this.state.registry.registry[l].parallel,u=!1,o==a.id){for(n=this.sortedItemsPos-1;n>-1;n+=-1)if(this.sortedItems[n][1].id==t.id){u=this.sortedItems[n][1].locator;break}p=this.sortedItems[this.sortedItemsPos][1].locator,a.position=!u&&p?s.POSITION_IBID_WITH_LOCATOR:p===u?s.POSITION_IBID:s.POSITION_IBID_WITH_LOCATOR}}else{if(!this.state.registry.registry[t.id])return this.try_cite=!1,void(this.force_collapse=!1);this.state.registry.registry[t.id].parallel=!1}this.force_collapse=!1,this.state.registry.registry[t.id].parallel&&(this.force_collapse=!0)}},s.Parallel.prototype.StartVariable=function(t,e){if(this.use_parallels&&(this.try_cite||this.force_collapse)){if(this.variable="names"===t?t+":"+this.target:t,this.ignoreVars.indexOf(t)>-1)return;"container-title"===t&&0===this.sets.value().length&&(this.master_was_neutral_cite=!1),this.data={},this.data.value="",this.data.blobs=[];var i=this.isMid(t);if("authority"===e&&"names:front"===this.variable&&this.sets.value().length){var r=this.sets.value()[this.sets.value().length-1].Item,n=!1;this.cite.Item.authority&&this.cite.Item.authority.length&&(n=this.cite.Item.authority[0].literal);var a=!1;r.authority&&r.authority.length&&(a=r.authority[0].literal),n!==a&&(this.try_cite=!0,this.in_series=!1)}else"front"===this.target&&i?this.target="mid":"mid"===this.target&&!i&&this.cite.Item.title&&"names"!==t?this.target="back":"back"===this.target&&i&&(this.try_cite=!0,this.in_series=!1);"number"===t?this.cite.front.push(this.variable):s.PARALLEL_COLLAPSING_MID_VARSET.indexOf(t)>-1?["article-journal","article-magazine"].indexOf(this.cite.Item.type)>-1?this.cite.mid.push(this.variable):this.cite.front.push(this.variable):this.cite[this.target].push(this.variable)}},s.Parallel.prototype.AppendBlobPointer=function(t){if(this.use_parallels){if(this.ignoreVars.indexOf(this.variable)>-1)return;if(this.use_parallels&&(this.force_collapse||this.try_cite)){if(["article-journal","article-magazine"].indexOf(this.cite.Item.type)>-1){if(["volume","page","page-first","issue"].indexOf(this.variable)>-1)return;if("container-title"===this.variable&&this.cite.mid.length>1)return}this.variable&&(this.try_cite||this.force_collapse)&&t&&t.blobs&&(this.cite.useProceduralHistory&&"back"===this.target||this.data.blobs.push([t,t.blobs.length]))}}},s.Parallel.prototype.AppendToVariable=function(t,e){if(this.use_parallels){if(this.ignoreVars.indexOf(this.variable)>-1)return;if(this.try_cite||this.force_collapse)if(this.target,0){var i=this.sets.value()[this.sets.value().length-1];i&&i[this.variable]&&i[this.variable].value&&(this.data.value+="::"+t)}else this.data.value+="::"+t}},s.Parallel.prototype.CloseVariable=function(){if(this.use_parallels){if(this.ignoreVars.indexOf(this.variable)>-1)return;if((this.try_cite||this.force_collapse)&&(this.cite[this.variable]=this.data,this.sets.value().length>0)){var t=this.sets.value()[this.sets.value().length-1];"front"===this.target&&"issued"===this.variable&&this.data.value&&this.master_was_neutral_cite&&(this.target="mid"),"front"===this.target?!t[this.variable]&&!this.data.value||t[this.variable]&&this.data.value===t[this.variable].value||"issued"!==this.variable&&(this.in_series=!1):"mid"===this.target?s.PARALLEL_COLLAPSING_MID_VARSET.indexOf(this.variable)>-1&&(t[this.variable]&&t[this.variable].value===this.data.value?this.cite.front_collapse[this.variable]=!0:this.cite.front_collapse[this.variable]=!1):"back"===this.target&&t[this.variable]&&this.data.value!==t[this.variable].value&&-1===this.sets.value().slice(-1)[0].back_forceme.indexOf(this.variable)&&(this.in_series=!1)}this.variable=!1}},s.Parallel.prototype.CloseCite=function(){var t,e,i,s,r,n;if(this.use_parallels&&(this.force_collapse||this.try_cite)){if(i=!1,this.cite.front_collapse["container-title"]||(i=!0),!1===this.cite.front_collapse.volume&&(i=!0),!1===this.cite.front_collapse["collection-number"]&&(i=!0),!1===this.cite.front_collapse.section&&(i=!0),i&&(this.cite.use_journal_info=!0,(n=this.cite.front.indexOf("section"))>-1&&(this.cite.front=this.cite.front.slice(0,n).concat(this.cite.front.slice(n+1))),(s=this.cite.front.indexOf("volume"))>-1&&(this.cite.front=this.cite.front.slice(0,s).concat(this.cite.front.slice(s+1))),(r=this.cite.front.indexOf("container-title"))>-1&&(this.cite.front=this.cite.front.slice(0,r).concat(this.cite.front.slice(r+1))),collection_number_pos=this.cite.front.indexOf("collection-number"),collection_number_pos>-1&&(this.cite.front=this.cite.front.slice(0,collection_number_pos).concat(this.cite.front.slice(collection_number_pos+1)))),this.in_series||this.force_collapse||this.ComposeSet(!0),0===this.sets.value().length){for(has_date=!1,t=0,e=this.cite.back.length;t<e;t+=1)if("issued"===this.cite.back[t]&&this.cite.issued&&this.cite.issued.value){has_date=!0;break}has_date||this.cite.back_forceme.push("issued")}else{var a=this.cite.front.indexOf("issued");(-1===a||this.master_was_neutral_cite)&&(this.cite.back_forceme=this.sets.value().slice(-1)[0].back_forceme),a>-1&&(this.sets.value()[this.sets.value().length-1].issued||(this.cite.front=this.cite.front.slice(0,a).concat(this.cite.front.slice(a+1)))),this.master_was_neutral_cite&&this.cite.mid.indexOf("names:mid")>-1&&this.cite.front.push("names:mid")}this.sets.value().push(this.cite)}},s.Parallel.prototype.ComposeSet=function(t){var e,i,r;if(this.use_parallels&&(this.force_collapse||this.try_cite)){var n=this.sets.value().length;if(1===this.sets.value().length)this.in_series||(this.sets.value().pop(),this.delim_counter+=1);else{for(r=this.sets.value().length,i=0;i<r;i+=1)e=this.sets.value()[i],0===i?this.delim_counter+=1:(!e.Item.title&&e.use_journal_info?this.delim_pointers.push(!1):this.delim_pointers.push(this.delim_counter),this.delim_counter+=1),s.POSITION_FIRST===e.position&&(0===i?(this.state.registry.registry[e.itemId].master=!0,this.state.registry.registry[e.itemId].siblings=[],this.state.registry.registry[e.itemId].parallel=!1):e.prevItemID&&(this.state.registry.registry[e.prevItemID].parallel?this.state.registry.registry[e.itemId].parallel=this.state.registry.registry[e.prevItemID].parallel:this.state.registry.registry[e.itemId].parallel=e.prevItemID,this.state.registry.registry[e.itemId].siblings=this.state.registry.registry[e.prevItemID].siblings,this.state.registry.registry[e.itemId].siblings||(this.state.registry.registry[e.itemId].siblings=[],s.debug("WARNING: adding missing siblings array to registry object")),this.state.registry.registry[e.itemId].siblings.push(e.itemId)));this.sets.push([])}n<2?this.purgeGroupsIfParallel(!1):this.purgeGroupsIfParallel(!0),this.in_series=!0}},s.Parallel.prototype.PruneOutputQueue=function(){var t,e,i,s,r,n;if(this.use_parallels)for(t=this.sets.mystack.length,e=0;e<t;e+=1)if((i=this.sets.mystack[e]).length>1)for(r=i.length,s=0;s<r;s+=1)n=i[s],0===s?this.purgeVariableBlobs(n,n.back):s===i.length-1?this.purgeVariableBlobs(n,n.front.concat(n.back_forceme)):this.purgeVariableBlobs(n,n.front.concat(n.back))},s.Parallel.prototype.purgeVariableBlobs=function(t,e){var i,s,r,n,a,o;if(this.use_parallels){for(void 0===(o=this.state.output.current.value()).length&&(o=o.blobs),s=0,i=this.delim_pointers.length;s<i;s+=1)!1!==(a=this.delim_pointers[s])&&(o[a].parallel_delimiter=", ");for(s=i=e.length-1;s>-1;s+=-1)if(r=e[s],t[r])for(a=t[r].blobs.length-1;a>-1;a+=-1)(n=t[r].blobs[a])[0].blobs=n[0].blobs.slice(0,n[1]).concat(n[0].blobs.slice(n[1]+1)),this.state.tmp.has_purged_parallel=!0,n[0]&&n[0].strings&&"string"==typeof n[0].strings.oops&&n[0].parent&&n[0].parent&&(n[0].parent.parent.strings.delimiter=n[0].strings.oops)}},s.Parallel.prototype.purgeGroupsIfParallel=function(t){for(var e=this.parallel_conditional_blobs_list.length-1;e>-1;e+=-1){for(var i=this.parallel_conditional_blobs_list[e],s=!0,r=0,n=i.conditions.length;r<n;r+=1)if(!i.conditions[r]!=!!t&&("master"!==i.conditions[r]||this.state.registry.registry[i.id].master)&&("servant"!==i.conditions[r]||this.state.registry.registry[i.id].parallel)){s=!1;break}if(s){for(var a=[];i.blobs.length>i.pos;)a.push(i.blobs.pop());for(a.length&&a.pop();a.length;)i.blobs.push(a.pop())}this.parallel_conditional_blobs_list.pop()}},s.Util={},s.Util.Match=function(){this.any=function(t,e,i){return function(t,e){for(var s=0,r=i.length;s<r;s+=1)if(result=i[s](t,e),result)return!0;return!1}},this.none=function(t,e,i){return function(t,e){for(var s=0,r=i.length;s<r;s+=1)if(result=i[s](t,e),result)return!1;return!0}},this.all=function(t,e,i){return function(t,e){for(var s=0,r=i.length;s<r;s+=1)if(result=i[s](t,e),!result)return!1;return!0}},this[void 0]=this.all,this.nand=function(t,e,i){return function(t,e){for(var s=0,r=i.length;s<r;s+=1)if(result=i[s](t,e),!result)return!0;return!1}}},s.Transform=function(t){function e(t,e,i,r,n,a){var o;if(!(n=s.FIELD_CATEGORY_REMAP[n]))return r;var l=n;if(o="",t.sys.getAbbreviation){var u=t.transform.loadAbbreviation(e.jurisdiction,n,r,e.type,!0);t.transform.abbrevs[u][n]&&r&&t.sys.getAbbreviation&&t.transform.abbrevs[u][n][r]&&(o=t.transform.abbrevs[u][n][r].replace("{stet}",r))}return o||t.opt.development_extensions.require_explicit_legal_case_title_short&&"legal_case"===e.type||!i||!e[i]||!a||(o=e[i]),o||(o=r),o&&o.match(/^\!(?:[^>]+,)*here(?:,[^>]+)*>>>/)&&(o="jurisdiction"===l&&["treaty","patent"].indexOf(e.type)>-1&&o.replace(/^\![^>]*>>>\s*/,"")),o}function i(e,i){var s,r=t.opt["default-locale"][0].slice(0,2);return s=t.opt.development_extensions.strict_text_case_locales?new RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):new RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)"),e.language&&(m=(""+e.language).match(s),r=m?m[1]:"tlh"),e.multi&&e.multi&&e.multi.main&&e.multi.main[i]&&(r=e.multi.main[i]),t.opt.development_extensions.strict_text_case_locales&&!t.opt.development_extensions.normalize_lang_keys_to_lowercase||(r=r.toLowerCase()),r}function r(e,r,n,a,o){var l,u,p,h=o,c=!1;if(!e[r])return{name:"",usedOrig:o,token:s.Util.cloneToken(this)};d={name:"",usedOrig:o,locale:i(e,r)},p=t.opt[n];var f=!1,m=!1;if("locale-orig"===n)d=o?{name:"",usedOrig:o}:{name:e[r],usedOrig:!1,locale:i(e,r)},f=!0,c=!0;else if(a&&(void 0===p||0===p.length)){var d={name:e[r],usedOrig:!0,locale:i(e,r)};f=!0,c=!0}if(!f){for(var g=0,b=p.length;g<b;g+=1){if(l=p[g],u=l.split(/[\-_]/)[0],l&&e.multi&&e.multi._keys[r]&&e.multi._keys[r][l]){d.name=e.multi._keys[r][l],d.locale=l,"jurisdiction"===r&&(m=d.name);break}if(u&&e.multi&&e.multi._keys[r]&&e.multi._keys[r][u]){d.name=e.multi._keys[r][u],d.locale=u,"jurisdiction"===r&&(m=d.name);break}}!d.name&&a&&(d={name:e[r],usedOrig:!0,locale:i(e,r)},c=!0)}if(d.token=s.Util.cloneToken(this),t.sys.getHumanForm&&"jurisdiction"===r&&d.name)d.name=s.getJurisdictionNameAndSuppress(t,e[r],m);else if(["title","container-title"].indexOf(r)>-1&&!(h||d.token.strings["text-case"]&&"sentence"!==d.token.strings["text-case"]&&"normal"!==d.token.strings["text-case"])){var _=!c&&d.locale,v=r.slice(0,-5),y="sentence"===d.token.strings["text-case"];d.name=s.titlecaseSentenceOrNormal(t,e,v,_,y),delete d.token.strings["text-case"]}return d}function n(i,s,r,n){var a=i.variables[0];if(t.publisherOutput&&r){if(-1===["publisher","publisher-place"].indexOf(a))return!1;t.publisherOutput[a+"-token"]=i,t.publisherOutput.varlist.push(a);var o=r.split(/;\s*/);o.length===t.publisherOutput[a+"-list"].length&&(t.publisherOutput[a+"-list"]=o);for(var l=0,u=o.length;l<u;l+=1)o[l]=e(t,s,!1,o[l],n,!0);return t.tmp[a+"-token"]=i,!0}return!1}function a(e){var i=e.match(/^!([-,_a-z]+)>>>/);if(i){var s=i[1].split(",");e=e.slice(i[0].length);for(var r=0,n=s.length;r<n;r+=1)-1===t.tmp.done_vars.indexOf(s[r])&&t.tmp.done_vars.push(s[r])}return e}this.abbrevs={},this.abbrevs.default=new t.sys.AbbreviationSegments,this.getTextSubField=r,this.loadAbbreviation=function(e,i,s,r){return e||(e="default"),s?(t.sys.getAbbreviation&&((e=t.sys.getAbbreviation(t.opt.styleID,t.transform.abbrevs,e,i,s,r,!0))||(e="default")),e):(t.transform.abbrevs[e]||(t.transform.abbrevs[e]=new t.sys.AbbreviationSegments),t.transform.abbrevs[e][i]||(t.transform.abbrevs[e][i]={}),e)},this.getOutputFunction=function(i,o,l,u,p){var h,c=s.LangPrefsMap[i[0]];return h=!!c&&t.opt["cite-lang-prefs"][c],function(t,l,p,f){var m,d,g,b,_,v;if(!i[0]||!l[i[0]]&&!l[u])return null;var y={primary:!1,secondary:!1,tertiary:!1};if("_sort"===t.tmp.area.slice(-5))y.primary="locale-sort";else if(h)for(var x=["primary","secondary","tertiary"],S=0,E=x.length;S<E&&!(h.length-1<S);S+=1)h[S]&&(y[x[S]]="locale-"+h[S]);else y.primary="locale-orig";if("title-short"!==i[0]&&("bibliography"===t.tmp.area||"citation"===t.tmp.area&&"note"===t.opt.xclass&&p&&!p.position)||(y.secondary=!1,y.tertiary=!1),t.tmp["publisher-list"])return"publisher"===i[0]?t.tmp["publisher-token"]=this:"publisher-place"===i[0]&&(t.tmp["publisher-place-token"]=this),null;var I=r.call(this,l,i[0],y.primary,!0);m=I.name,d=I.locale;var A=I.token,T=I.usedOrig;if(n(this,l,m,o))return null;if(g=!1,_=!1,y.secondary){g=(I=r.call(this,l,i[0],y.secondary,!1,I.usedOrig)).name,b=I.locale;var O=I.token}if(y.tertiary){_=(I=r.call(this,l,i[0],y.tertiary,!1,I.usedOrig)).name,v=I.locale;var N=I.token}o&&((m=e(t,l,u,m,o,!0))&&(m=a(m)),g=e(t,l,!1,g,o,!0),_=e(t,l,!1,_,o,!0));var k;if("locale-translit"===y.primary&&(k=t.opt.citeAffixes[c][y.primary].prefix),"<i>"===k&&"title"===i[0]&&!T){for(var w=!1,S=0,E=A.decorations.length;S<E;S+=1)"@font-style"===A.decorations[S][0]&&"italic"===A.decorations[S][1]&&(w=!0);w||A.decorations.push(["@font-style","italic"])}if("en"!==d&&"title"===A.strings["text-case"]&&(A.strings["text-case"]="passthrough"),"title"===i[0]&&(m=s.demoteNoiseWords(t,m,this["leading-noise-words"])),g||_){if(t.output.openLevel("empty"),A.strings.suffix=A.strings.suffix.replace(/[ .,]+$/,""),t.output.append(m,A),g){for(O.strings.prefix=t.opt.citeAffixes[c][y.secondary].prefix,O.strings.suffix=t.opt.citeAffixes[c][y.secondary].suffix,O.strings.prefix||(O.strings.prefix=" "),S=O.decorations.length-1;S>-1;S+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(O.decorations[S].join("/"))>-1&&(O.decorations=O.decorations.slice(0,S).concat(O.decorations.slice(S+1)));"en"!==b&&"title"===O.strings["text-case"]&&(O.strings["text-case"]="passthrough");var R=new s.Token;R.decorations.push(["@font-style","normal"]),R.decorations.push(["@font-weight","normal"]),t.output.openLevel(R),t.output.append(g,O),t.output.closeLevel();var C=t.output.current.value(),L=t.output.current.value().blobs.length-1;t.parallel.use_parallels&&(t.parallel.cite.front.push(i[0]+":secondary"),t.parallel.cite[i[0]+":secondary"]={blobs:[[C,L]]})}if(_){for(N.strings.prefix=t.opt.citeAffixes[c][y.tertiary].prefix,N.strings.suffix=t.opt.citeAffixes[c][y.tertiary].suffix,N.strings.prefix||(N.strings.prefix=" "),S=N.decorations.length-1;S>-1;S+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(N.decorations[S].join("/"))>-1&&(N.decorations=N.decorations.slice(0,S).concat(N.decorations.slice(S+1)));"en"!==v&&"title"===N.strings["text-case"]&&(N.strings["text-case"]="passthrough");var D=new s.Token;D.decorations.push(["@font-style","normal"]),D.decorations.push(["@font-weight","normal"]),t.output.openLevel(D),t.output.append(_,N),t.output.closeLevel();var C=t.output.current.value(),L=t.output.current.value().blobs.length-1;t.parallel.use_parallels&&(t.parallel.cite.front.push(i[0]+":tertiary"),t.parallel.cite[i[0]+":tertiary"]={blobs:[[C,L]]})}t.output.closeLevel()}else t.output.append(m,A);return null}},this.quashCheck=a},s.Token=function(t,e){this.name=t,this.strings={},this.strings.delimiter=void 0,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=e,this.evaluator=!1,this.tests=[],this.rawtests=[],this.succeed=!1,this.fail=!1,this.next=!1},s.Util.cloneToken=function(t){var e,i,r,n;if("string"==typeof t)return t;e=new s.Token(t.name,t.tokentype);for(i in t.strings)t.strings.hasOwnProperty(i)&&(e.strings[i]=t.strings[i]);if(t.decorations)for(e.decorations=[],r=0,n=t.decorations.length;r<n;r+=1)e.decorations.push(t.decorations[r].slice());return t.variables&&(e.variables=t.variables.slice()),t.execs&&(e.execs=t.execs.slice(),e.tests=t.tests.slice(),e.rawtests=t.tests.slice()),e},s.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0},s.Blob=function(t,e,i){var s,r,n;if(this.levelname=i,e){this.strings={prefix:"",suffix:""};for(n in e.strings)e.strings.hasOwnProperty(n)&&(this.strings[n]=e.strings[n]);for(this.decorations=[],s=void 0===e.decorations?0:e.decorations.length,r=0;r<s;r+=1)this.decorations.push(e.decorations[r].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];this.blobs="string"==typeof t?t:t?[t]:[],this.alldecor=[this.decorations]},s.Blob.prototype.push=function(t){if("string"==typeof this.blobs)throw"Attempt to push blob onto string object";!1!==t&&(t.alldecor=t.alldecor.concat(this.alldecor),this.blobs.push(t))},s.NumericBlob=function(t,e,i,r){this.id=r,this.alldecor=[],this.num=e,this.particle=t,this.blobs=e.toString(),this.status=s.START,this.strings={},i?(this.gender=i.gender,this.decorations=i.decorations,this.strings.prefix=i.strings.prefix,this.strings.suffix=i.strings.suffix,this.strings["text-case"]=i.strings["text-case"],this.successor_prefix=i.successor_prefix,this.range_prefix=i.range_prefix,this.splice_prefix=i.splice_prefix,this.formatter=i.formatter,this.formatter||(this.formatter=new s.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))):(this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new s.Output.DefaultFormatter)},s.NumericBlob.prototype.setFormatter=function(t){this.formatter=t,this.type=this.formatter.format(1)},s.Output.DefaultFormatter=function(){},s.Output.DefaultFormatter.prototype.format=function(t){return t.toString()},s.NumericBlob.prototype.checkNext=function(t,e){e?(this.status=s.START,"object"==typeof t&&(t.num===this.num+1?t.status=s.SUCCESSOR:t.status=s.SEEN)):t&&t.num&&this.type===t.type&&t.num===this.num+1?this.status===s.START||this.status===s.SEEN?t.status=s.SUCCESSOR:this.status!==s.SUCCESSOR&&this.status!==s.SUCCESSOR_OF_SUCCESSOR||(this.range_prefix?(t.status=s.SUCCESSOR_OF_SUCCESSOR,this.status=s.SUPPRESS):t.status=s.SUCCESSOR):(this.status===s.SUCCESSOR_OF_SUCCESSOR&&(this.status=s.END),"object"==typeof t&&(t.status=s.SEEN))},s.NumericBlob.prototype.checkLast=function(t){return(this.status===s.SEEN||t.num!==this.num-1&&this.status===s.SUCCESSOR)&&(this.status=s.SUCCESSOR,!0)},s.Util.fixDateNode=function(t,e,i){var s,r,n,a,o,l,u,p,h,c,f,m,d,g,b=this.cslXml.getAttributeValue(i,"lingo"),_=this.cslXml.getAttributeValue(i,"default-locale");this.build.date_key=!0,s=this.cslXml.getAttributeValue(i,"form");if(b=_?this.opt["default-locale"][0]:this.cslXml.getAttributeValue(i,"lingo"),!this.getDate(s,_))return t;var v=this.cslXml.getAttributeValue(i,"date-parts");r=this.cslXml.getAttributeValue(i,"variable"),p=this.cslXml.getAttributeValue(i,"prefix"),h=this.cslXml.getAttributeValue(i,"suffix"),d=this.cslXml.getAttributeValue(i,"display"),g=this.cslXml.getAttributeValue(i,"cslid"),n=this.cslXml.nodeCopy(this.getDate(s,_)),this.cslXml.setAttribute(n,"lingo",this.opt.lang),this.cslXml.setAttribute(n,"form",s),this.cslXml.setAttribute(n,"date-parts",v),this.cslXml.setAttribute(n,"cslid",g),this.cslXml.setAttribute(n,"variable",r),this.cslXml.setAttribute(n,"default-locale",_),p&&this.cslXml.setAttribute(n,"prefix",p),h&&this.cslXml.setAttribute(n,"suffix",h),d&&this.cslXml.setAttribute(n,"display",d),c=this.cslXml.children(n);for(f in c)a=c[f],"date-part"===this.cslXml.nodename(a)&&(o=this.cslXml.getAttributeValue(a,"name"),_&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(n,"date-part",o,"@default-locale","true"));c=this.cslXml.children(i);for(f in c)if(a=c[f],"date-part"===this.cslXml.nodename(a)){o=this.cslXml.getAttributeValue(a,"name"),m=this.cslXml.attributes(a);for(l in m)"@name"!==l&&(b&&b!==this.opt.lang&&["@suffix","@prefix","@form"].indexOf(l)>-1||(u=m[l],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(n,"date-part",o,l,u)))}if("year"===this.cslXml.getAttributeValue(i,"date-parts"))this.cslXml.deleteNodeByNameAttribute(n,"month"),this.cslXml.deleteNodeByNameAttribute(n,"day");else if("year-month"===this.cslXml.getAttributeValue(i,"date-parts"))this.cslXml.deleteNodeByNameAttribute(n,"day");else if("month-day"===this.cslXml.getAttributeValue(i,"date-parts")){for(var y=this.cslXml.children(n),x=1,S=this.cslXml.numberofnodes(y);x<S;x++)if("year"===this.cslXml.getAttributeValue(y[x],"name")){this.cslXml.setAttribute(y[x-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(n,"year")}return this.cslXml.insertChildNodeAfter(t,i,e,n)},s.dateMacroAsSortKey=function(t,e){s.dateAsSortKey.call(this,t,e,!0)},s.dateAsSortKey=function(t,e,i){var r,n,a,o,l,u,p,h,c=this.variables[0],f="empty";for(i&&t.tmp.extension&&(f="macro-with-date"),void 0===(r=e[c])&&((r={"date-parts":[[0]]}).year||(t.tmp.empty_date=!0)),void 0===this.dateparts&&(this.dateparts=["year","month","day"]),r.raw?r=t.fun.dateparser.parseDateToArray(r.raw):r["date-parts"]&&(r=t.dateParseArray(r)),void 0===r&&(r={}),p=0,h=s.DATE_PARTS_INTERNAL.length;p<h;p+=1)a=0,"_end"===(o=n=s.DATE_PARTS_INTERNAL[p]).slice(-4)&&(o=o.slice(0,-4)),r[n]&&this.dateparts.indexOf(o)>-1&&(a=r[n]),"year"===n.slice(0,4)?(u="Y","-"===(l=s.Util.Dates[o].numeric(t,a))[0]&&(u="X",l=l.slice(1),l=9999-parseInt(l,10)),t.output.append(s.Util.Dates[n.slice(0,4)].numeric(t,u+l),f)):((a=s.Util.Dates[o]["numeric-leading-zeros"](t,a))||(a="00"),t.output.append(a,f))},s.Engine.prototype.dateParseArray=function(t){var e,i,r,n;e={};for(i in t)if("date-parts"===i){(r=t["date-parts"]).length>1&&r[0].length!==r[1].length&&s.error("CSL data error: element mismatch in date range input."),n=["","_end"];for(var a=0,o=r.length;a<o;a+=1)for(var l=0,u=s.DATE_PARTS.length;l<u;l+=1)void 0===r[a][l]?e[s.DATE_PARTS[l]+n[a]]=r[a][l]:e[s.DATE_PARTS[l]+n[a]]=parseInt(r[a][l],10)}else t.hasOwnProperty(i)&&("literal"===i&&"object"==typeof t.literal&&"string"==typeof t.literal.part?(s.debug("Warning: fixing up weird literal date value"),e.literal=t.literal.part):e[i]=t[i]);return e},s.Util.Names={},s.Util.Names.compareNamesets=s.NameOutput.prototype._compareNamesets,s.Util.Names.unInitialize=function(t,e){var i,r,n,a,o;if(!e)return"";for(n=e.split(/(?:\-|\s+)/),a=e.match(/(\-|\s+)/g),o="",i=0,r=n.length;i<r;i+=1)s.ALL_ROMANESQUE_REGEXP.exec(n[i].slice(0,-1))&&n[i]&&n[i]!==n[i].toUpperCase()&&(n[i]=n[i].slice(0,1)+n[i].slice(1,2).toLowerCase()+n[i].slice(2)),o+=n[i],i<r-1&&(o+=a[i]);return o},s.Util.Names.initializeWith=function(t,e,i,r){var n,a,o,l,u,p,h;if(!e)return"";if(i||(i=""),["Lord","Lady"].indexOf(e)>-1||!e.match(s.STARTSWITH_ROMANESQUE_REGEXP)&&!i.match("%s"))return e;var c=e;if(!1===t.opt["initialize-with-hyphen"]&&(c=c.replace(/\-/g," ")),c=c.replace(/\s*\-\s*/g,"-").replace(/\s+/g," "),c=c.replace(/-([a-z])/g,"–$1"),u=c.match(/[\-\s]+/g),0===(p=c.split(/[\-\s]+/)).length)c=u;else for(c=[p[0]],n=1,a=p.length;n<a;n+=1)c.push(u[n-1]),c.push(p[n]);for(n=(p=c).length-1;n>-1;n+=-1)if(p[n]&&p[n].slice(0,-1).indexOf(".")>-1){var f=p.slice(n+1),m=p[n].slice(0,-1).split(".");for(p=p.slice(0,n),o=0,l=m.length;o<l;o+=1)p.push(m[o]+"."),o<m.length-1&&p.push(" ");p=p.concat(f)}return h=r?s.Util.Names.doNormalize(t,p,i):s.Util.Names.doInitialize(t,p,i),h=h.replace(/\u2013([a-z])/g,"-$1")},s.Util.Names.doNormalize=function(t,e,i,r){var n,a;i=i||"";var o=[];for(n=0,a=e.length;n<a;n+=1)e[n].length>1&&"."===e[n].slice(-1)?(e[n]=e[n].slice(0,-1),o.push(!0)):1===e[n].length&&e[n].toUpperCase()===e[n]?o.push(!0):o.push(!1);for(n=0,a=e.length;n<a;n+=2)o[n]&&(n<e.length-2&&(e[n+1]="",(!i||i.slice(-1)&&" "!==i.slice(-1))&&e[n].length&&e[n].match(s.ALL_ROMANESQUE_REGEXP)&&(e[n].length>1||e[n+2].length>1)&&(e[n+1]=" "),e[n+2].length>1?e[n]=e[n]+i.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,""):e[n]=e[n]+i),n===e.length-1&&(e[n]=e[n]+i));return e.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},s.Util.Names.doInitialize=function(t,e,i,r){var n,a,o,l,u,p,h;for(n=0,a=e.length;n<a;n+=2)if(h=e[n])if(!(o=h.match(s.NAME_INITIAL_REGEXP))&&!h.match(s.STARTSWITH_ROMANESQUE_REGEXP)&&h.length>1&&i.match("%s")&&(o=h.match(/(.)(.*)/)),o&&o[1]===o[1].toUpperCase()){var c="";if(o[2]){var f="";for(l=0,u=(p=o[2].split("")).length;l<u;l+=1){var m=p[l];if(m!==m.toUpperCase())break;f+=m}f.length<o[2].length&&(c=f.toLocaleLowerCase())}e[n]=o[1].toLocaleUpperCase()+c,n<a-1?i.match("%s")?e[n]=i.replace("%s",e[n]):e[n+1].indexOf("-")>-1?e[n+1]=i+e[n+1]:e[n+1]=i:i.match("%s")?e[n]=i.replace("%s",e[n]):e.push(i)}else h.match(s.ROMANESQUE_REGEXP)&&(e[n]=" "+h);var d=e.join("");return d=d.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},s.Util.Names.getRawName=function(t){var e=[];return t.given&&e.push(t.given),t.family&&e.push(t.family),e.join(" ")},s.Util.Dates={},s.Util.Dates.year={},s.Util.Dates.year.long=function(t,e){return e||(e="boolean"==typeof e?"":0),e.toString()},s.Util.Dates.year.imperial=function(t,e,i,s){e||(e="boolean"==typeof e?"":0),i=i?"_end":"";var r=t.tmp.date_object["month"+i];for(r=r?""+r:"1";r.length<2;)r="0"+r;var n=t.tmp.date_object["day"+i];for(n=n?""+n:"1";n.length<2;)n="0"+n;var a,o,l=parseInt(e+r+n,10);return l>=18680908&&l<19120730?(a="明治",o=1867):l>=19120730&&l<19261225?(a="大正",o=1911):l>=19261225&&l<19890108?(a="昭和",o=1925):l>=19890108&&(a="平成",o=1988),a&&o&&(t.transform.abbrevs.default.number[a]||t.transform.loadAbbreviation("default","number",a),t.transform.abbrevs.default.number[a]&&(a=t.transform.abbrevs.default.number[a]),year=a+(e-o)),year},s.Util.Dates.year.short=function(t,e){if((e=e.toString())&&4===e.length)return e.substr(2)},s.Util.Dates.year.numeric=function(t,e){var i,s;for((i=(e=""+e).match(/([0-9]*)$/))?(s=e.slice(0,-1*i[1].length),e=i[1]):(s=e,e="");e.length<4;)e="0"+e;return s+e},s.Util.Dates.normalizeMonth=function(t,e){var i;if(t||(t=0),(t=""+t).match(/^[0-9]+$/)||(t=0),t=parseInt(t,10),e){var s={stub:"month-",num:t};s.num<1||s.num>20?s.num=0:s.num>16?(s.stub="season-",s.num=s.num-16):s.num>12&&(s.stub="season-",s.num=s.num-12),i=s}else(t<1||t>12)&&(t=0),i=t;return i},s.Util.Dates.month={},s.Util.Dates.month.numeric=function(t,e){return(e=s.Util.Dates.normalizeMonth(e))||(e=""),e},s.Util.Dates.month["numeric-leading-zeros"]=function(t,e){if(e=s.Util.Dates.normalizeMonth(e))for(e=""+e;e.length<2;)e="0"+e;else e="";return e},s.Util.Dates.month.long=function(t,e,i,r){var n=s.Util.Dates.normalizeMonth(e,!0);if(e=n.num){for(e=""+e;e.length<2;)e="0"+e;e=t.getTerm(n.stub+e,"long",0,0,!1,r)}else e="";return e},s.Util.Dates.month.short=function(t,e,i,r){var n=s.Util.Dates.normalizeMonth(e,!0);if(e=n.num){for(e=""+e;e.length<2;)e="0"+e;e=t.getTerm(n.stub+e,"short",0,0,!1,r)}else e="";return e},s.Util.Dates.day={},s.Util.Dates.day.numeric=function(t,e){return e.toString()},s.Util.Dates.day.long=s.Util.Dates.day.numeric,s.Util.Dates.day["numeric-leading-zeros"]=function(t,e){for(e||(e=0),e=e.toString();e.length<2;)e="0"+e;return e.toString()},s.Util.Dates.day.ordinal=function(t,e,i){return t.fun.ordinalizer.format(e,i)},s.Util.Sort={},s.Util.Sort.strip_prepositions=function(t){var e;return"string"==typeof t&&(e=t.toLocaleLowerCase(),e=t.match(/^((a|an|the)\s+)/)),e&&(t=t.substr(e[1].length)),t},s.Util.substituteStart=function(t,e){var i,r,n,a,o,l,u;a=function(t,e){for(var i=0,s=this.decorations.length;i<s;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){t.tmp.strip_periods+=1;break}},this.execs.push(a),this.decorations&&(t.opt.development_extensions.csl_reverse_lookup_support||t.sys.csl_reverse_lookup_support)&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),u=["number","date","names"],("text"===this.name&&!this.postponed_macro||u.indexOf(this.name)>-1)&&(i=function(t,e,i){"author"===t.tmp.element_trace.value()||"names"===this.name?i&&i["author-only"]?t.tmp.element_trace.push("do-not-suppress-me"):i&&i["suppress-author"]:i&&i["author-only"]?t.tmp.element_trace.push("suppress-me"):i&&i["suppress-author"]&&t.tmp.element_trace.push("do-not-suppress-me")},this.execs.push(i)),r=this.strings.cls,this.strings.cls=!1,0===t.build.render_nesting_level&&("bibliography"===t.build.area&&t.bibliography.opt["second-field-align"]?((n=new s.Token("group",s.START)).decorations=[["@display","left-margin"]],a=function(t,e){t.tmp.render_seen||(n.strings.first_blob=e.id,t.output.startTag("bib_first",n))},n.execs.push(a),e.push(n)):s.DISPLAY_CLASSES.indexOf(r)>-1&&((n=new s.Token("group",s.START)).decorations=[["@display",r]],a=function(t,e){n.strings.first_blob=e.id,t.output.startTag("bib_first",n)},n.execs.push(a),e.push(n)),t.build.cls=r),t.build.render_nesting_level+=1,1===t.build.substitute_level.value()&&(o=new s.Token("choose",s.START),s.Node.choose.build.call(o,t,e),a=function(e,i){return!!t.tmp.can_substitute.value()},(l=new s.Token("if",s.START)).tests.push(a),l.test=t.fun.match.any(this,t,l.tests),e.push(l)),t.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&(a=function(t,e,i){if(!t.tmp.just_looking&&!t.tmp.suppress_decorations){variable_entry=new s.Token("text",s.START),variable_entry.decorations=[["@showid","true"]],t.output.startTag("variable_entry",variable_entry);var r=null;i&&(r=i.position),r||(r=0);var n=["first","subsequent","ibid","ibid-with-locator"],a=0;i&&i.noteIndex&&(a=i.noteIndex);var o=0;i&&i["first-reference-note-number"]&&(o=i["first-reference-note-number"]);var l=0;i&&i["citation-number"]&&(l=i["citation-number"]);var u=0;i&&i.index&&(u=i.index);var p={itemData:e,variableNames:this.variables,context:t.tmp.area,xclass:t.opt.xclass,position:n[r],"note-number":a,"first-reference-note-number":o,"citation-number":l,index:u,mode:t.opt.mode};t.output.current.value().params=p}},this.execs.push(a))},s.Util.substituteEnd=function(t,e){var i,r,n,a,o,l;t.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&(i=function(t,e){t.tmp.just_looking||t.tmp.suppress_decorations||t.output.endTag("variable_entry")},this.execs.push(i)),i=function(t,e){for(var i=0,s=this.decorations.length;i<s;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){t.tmp.strip_periods+=-1;break}},this.execs.push(i),t.build.render_nesting_level+=-1,0===t.build.render_nesting_level&&(t.build.cls?(i=function(t,e){t.output.endTag("bib_first")},this.execs.push(i),t.build.cls=!1):"bibliography"===t.build.area&&t.bibliography.opt["second-field-align"]&&(i=function(t,e){t.tmp.render_seen||t.output.endTag("bib_first")},(r=new s.Token("group",s.END)).execs.push(i),e.push(r),(n=new s.Token("group",s.START)).decorations=[["@display","right-inline"]],i=function(t,e){t.tmp.render_seen||(t.tmp.render_seen=!0,t.output.startTag("bib_other",n))},n.execs.push(i),e.push(n))),1===t.build.substitute_level.value()&&(a=new s.Token("if",s.END),e.push(a),o=new s.Token("choose",s.END),s.Node.choose.build.call(o,t,e)),("names"===this.name||"text"===this.name&&"title"!==this.variables_real)&&(new s.Token("text",s.SINGLETON),i=function(t,e){if("bibliography"===t.tmp.area&&"string"==typeof t.bibliography.opt["subsequent-author-substitute"]&&(!this.variables_real||e[this.variables_real])&&t.tmp.substituted_variable===this.variables_real){var i,r,n=t.bibliography.opt["subsequent-author-substitute-rule"];if(!t.tmp.suppress_decorations&&t.tmp.subsequent_author_substitute_ok&&t.tmp.rendered_name){if("partial-each"===n||"partial-first"===n){var a=!0,o=[];for(i=0,r=t.tmp.name_node.children.length;i<r;i+=1){var u=t.tmp.rendered_name[i];a&&t.tmp.last_rendered_name&&t.tmp.last_rendered_name.length>i-1&&u&&!u.localeCompare(t.tmp.last_rendered_name[i])?(l=new s.Blob(t[t.tmp.area].opt["subsequent-author-substitute"]),t.tmp.name_node.children[i].blobs=[l],"partial-first"===n&&(a=!1)):a=!1,o.push(u)}t.tmp.last_rendered_name=o}else if("complete-each"===n){if(o=t.tmp.rendered_name.join(",")){if(t.tmp.last_rendered_name&&!o.localeCompare(t.tmp.last_rendered_name))for(i=0,r=t.tmp.name_node.children.length;i<r;i+=1)l=new s.Blob(t[t.tmp.area].opt["subsequent-author-substitute"]),t.tmp.name_node.children[i].blobs=[l];t.tmp.last_rendered_name=o}}else(o=t.tmp.rendered_name.join(","))&&(t.tmp.last_rendered_name&&!o.localeCompare(t.tmp.last_rendered_name)&&(l=new s.Blob(t[t.tmp.area].opt["subsequent-author-substitute"]),t.tmp.label_blob?t.tmp.name_node.top.blobs=[l,t.tmp.label_blob]:t.tmp.name_node.top.blobs.length?t.tmp.name_node.top.blobs[0].blobs=[l]:t.tmp.name_node.top.blobs=[l],t.tmp.substituted_variable=this.variables_real),t.tmp.last_rendered_name=o);t.tmp.subsequent_author_substitute_ok=!1}}},this.execs.push(i)),("text"===this.name&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&(i=function(t,e){t.tmp.element_trace.pop()},this.execs.push(i))},s.Util.padding=function(t){var e=t.match(/\s*(-{0,1}[0-9]+)/);if(e)for((t=parseInt(e[1],10))<0&&(t=1e20+t),t=""+t;t.length<20;)t="0"+t;return t},s.Util.LongOrdinalizer=function(){},s.Util.LongOrdinalizer.prototype.init=function(t){this.state=t},s.Util.LongOrdinalizer.prototype.format=function(t,e){t<10&&(t="0"+t);var i=s.Engine.getField(s.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+t,"long",0,e);return i||(i=this.state.fun.ordinalizer.format(t,e)),this.state.tmp.cite_renders_content=!0,i},s.Util.Ordinalizer=function(t){this.state=t,this.suffixes={}},s.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var t=0;t<3;t+=1){var e=[void 0,"masculine","feminine"][t];this.suffixes[this.state.opt.lang][e]=[];for(var i=1;i<5;i+=1){var s=this.state.getTerm("ordinal-0"+i,"long",!1,e);if(void 0===s){delete this.suffixes[this.state.opt.lang][e];break}this.suffixes[this.state.opt.lang][e].push(s)}}}},s.Util.Ordinalizer.prototype.format=function(t,e){var i;i=""+(t=parseInt(t,10));var s="",r=[];if(e&&r.push(e),r.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"]){s=this.state.getTerm("ordinal",!1,0,e);for(var n,a=0,o=r.length;a<o;a+=1){n=r[a];var l=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(l["whole-number"][i]&&l["whole-number"][i][n]?s=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][i][n],!1,0,e):l["last-two-digits"][i.slice(i.length-2)]&&l["last-two-digits"][i.slice(i.length-2)][n]?s=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][i.slice(i.length-2)][n],!1,0,e):l["last-digit"][i.slice(i.length-1)]&&l["last-digit"][i.slice(i.length-1)][n]&&(s=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][i.slice(i.length-1)][n],!1,0,e)),s)break}}else e||(e=void 0),this.state.fun.ordinalizer.init(),s=t/10%10==1||t>10&&t<20?this.suffixes[this.state.opt.lang][e][3]:t%10==1&&t%100!=11?this.suffixes[this.state.opt.lang][e][0]:t%10==2&&t%100!=12?this.suffixes[this.state.opt.lang][e][1]:t%10==3&&t%100!=13?this.suffixes[this.state.opt.lang][e][2]:this.suffixes[this.state.opt.lang][e][3];return i=i+=s},s.Util.Romanizer=function(){},s.Util.Romanizer.prototype.format=function(t){var e,i,r,n,a;if(e="",t<6e3)for((n=t.toString().split("")).reverse(),i=0,r=0,a=n.length,i=0;i<a;i+=1)r=parseInt(n[i],10),e=s.ROMAN_NUMERALS[i][r]+e;return e},s.Util.Suffixator=function(t){t||(t=s.SUFFIX_CHARS),this.slist=t.split(",")},s.Util.Suffixator.prototype.format=function(t){var e;t+=1;var i="";do{e=t%26==0?26:t%26,i=this.slist[e-1]+i,t=(t-e)/26}while(0!==t);return i},s.Engine.prototype.processNumber=function(t,e,i,r){function n(t,r){var n=(t=t.trim()).match(/^([^ ]+)/);if(n&&!s.STATUTE_SUBDIV_STRINGS[n[1]]){var a=null;(a="locator"===i?e.label?s.STATUTE_SUBDIV_STRINGS_REVERSE[e.label]:"p.":s.STATUTE_SUBDIV_STRINGS_REVERSE[i])&&(t=a+" "+t)}return t}function a(t,e,r,n){n=n||"";var a={};if(e||s.STATUTE_SUBDIV_STRINGS_REVERSE[i]||(e="var:"+i),e){var o=e.match(/(\s*)([^\s]*)(\s*)/);a.label=o[2],a.origLabel=t,a.labelSuffix=o[3]?o[3]:"",a.plural=0,a.labelVisibility=!1}return(o=r.match(/^([a-zA-Z0]*)([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/))?(a.particle=o[1],a.value=o[2]):(a.particle="",a.value=r),a.joiningSuffix=n.replace(/\s*-\s*/,"-"),a}function o(t){for(var e=t.length-2;e>-1;e-=2)"-"===t[e]&&t[e-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&t[e+1].match(/^[,a-zA-Z]+$/)&&(t[e-1]=t.slice(e-1,e+2).join(""),t=t.slice(0,e).concat(t.slice(e+2)));return t}function l(t,e,i){var s=t[i.pos],r=t[e].value,n="\\-"===s.joiningSuffix;r.particle&&r.particle!==s.particle&&(i.collapsible=!1);var a=r.match(/^[0-9]+([-,:a-zA-Z]*)$/),o=s.value.match(/^[0-9]+([-,:a-zA-Z]*)$/);r&&a&&o&&!n||(i.collapsible=!1,r&&o||(i.numeric=!1),n&&i.count--),(a&&a[1]||o&&o[1])&&(i.collapsible=!1);var l=i.collapsible;!l&&e>0&&r.match(/^[ivxlcmIVXLCM]+$/)&&t[e-1].value.match(/^[ivxlcmIVXLCM]+$/)&&(l=!0);for(var u=i.pos,p=t.length;u<p;u++)i.label===t[u].label&&i.count>1&&l&&(t[u].plural=1),t[u].numeric=i.numeric,t[u].collapsible=i.collapsible;i.label=t[e].label,i.count=1,i.pos=e,i.numeric=!0,i.collapsible=!0}function u(e){var i=s.Util.cloneToken(t),r=new s.Token;if(!b.tmp.just_looking){for(var n=i.decorations.length-1;n>-1;n--)"@quotes"===i.decorations[n][0]&&(r.decorations=r.decorations.concat(i.decorations.slice(n,n+1)),i.decorations=i.decorations.slice(0,n).concat(i.decorations.slice(n+1)));r.strings.prefix=i.strings.prefix,i.strings.prefix="",r.strings.suffix=i.strings.suffix,i.strings.suffix=""}var a=e.length?e[0].label:null;if(e.length){for(var o=0,l=e.length;o<l;o++){var u=e[o],h=s.Util.cloneToken(i);h.gender=t.gender,a===u.label&&(h.formatter=t.formatter),u.numeric&&(h.successor_prefix=u.successor_prefix),h.strings.suffix=h.strings.suffix+p(u.joiningSuffix),u.styling=h}b.tmp.just_looking||'"'===e[0].value.slice(0,1)&&'"'===e[e.length-1].value.slice(-1)&&(e[0].value=e[0].value.slice(1),e[e.length-1].value=e[e.length-1].value.slice(0,-1),r.decorations.push(["@quotes",!0]))}return r}function p(t){return t.replace("\\-","-")}function h(t,e,i,s){var r=c(t,e);return f(t,e)&&"-"===i&&s&&((r||["locator","issue","volume","edition","number"].indexOf(t)>-1)&&((i=b.getTerm("page-range-delimiter"))||(i="–")),"collection-number"===t&&((i=b.getTerm("year-range-delimiter"))||(i="–"))),i}function c(t,e){return"page"===t||"locator"===t&&["p."].indexOf(e.label)>-1}function f(t,e){var i=!0;return"locator"===t&&(i=!!b.getTerm(s.STATUTE_SUBDIV_STRINGS[e.label])),i}function m(t,e,s){if(!(e<1)&&2===s.count&&t[e-1].particle===t[e].particle)if("-"===t[e-1].joiningSuffix)if(!b.opt["page-range-format"]&&parseInt(t[e-1].value,10)>parseInt(t[e].value,10))t[e-1].joiningSuffix=h(i,t[e],t[e-1].joiningSuffix,!0);else{var r=t[e];if(c(i,r)){var n=t[e-1].particle+t[e-1].value+" - "+t[e].particle+t[e].value;n=b.fun.page_mangler(n)}else n=t[e-1].value+p(t[e-1].joiningSuffix)+t[e].value;var a=n.match(/^([a-zA-Z]?0*)([0-9]+)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+)$/);if(a){var o=a[3];o=h(i,r,o,t[e].numeric),t[e-1].particle=a[1],t[e-1].value=a[2],t[e-1].joiningSuffix=o,t[e].particle=a[4],t[e].value=a[5]}s.count=0}else s.count=1}function d(e){if(t&&-1!==["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator"].indexOf(i)){for(var s={count:0,label:null,lastHadRangeDelimiter:!1},r=0,n=e.length;r<n;r++){var a=e[r];if(a.collapsible)s.label===a.label&&"-"===a.joiningSuffix?s.count=1:s.label===a.label&&"-"!==a.joiningSuffix?(s.count++,2===s.count&&m(e,r,s)):s.label!==a.label?(s.label=a.label,s.count=1):(s.count=1,s.label=a.label);else{s.count=0,s.label=null;var o=a.numeric;r<e.length-1&&!o&&a.value.match(/^[ivxlcmIVXLCM]+$/)&&e[r+1].value.match(/^[ivxlcmIVXLCM]+$/)&&(o=!0),a.joiningSuffix=h(i,a,a.joiningSuffix,o)}}2===s.count&&m(e,e.length-1,s)}}var g,b=this;if(t&&this.tmp.shadow_numbers[i]&&this.tmp.shadow_numbers[i].values.length)return d(S=this.tmp.shadow_numbers[i].values),void(this.tmp.shadow_numbers[i].masterStyling=u(S));if(this.tmp.shadow_numbers[i]||(this.tmp.shadow_numbers[i]={values:[]}),e){var _=s.LangPrefsMap[i];if(_){var v=this.opt["cite-lang-prefs"][_][0];g=(g=this.transform.getTextSubField(e,i,"locale-"+v,!0)).name}else g=e[i];if(g&&this.sys.getAbbreviation){var y=this.transform.loadAbbreviation(e.jurisdiction,"number",g);this.transform.abbrevs[y].number&&(this.transform.abbrevs[y].number[g]?g=this.transform.abbrevs[y].number[g]:void 0!==this.transform.abbrevs[y].number[g]&&delete this.transform.abbrevs[y].number[g])}if(void 0!==g&&("string"==typeof g||"number"==typeof g)){"number"==typeof g&&(g=""+g);var x=s.STATUTE_SUBDIV_STRINGS_REVERSE[i];if(!this.tmp.shadow_numbers.values){var S=function(t,e){var r=[],l=(t=n(t,e=e||"")).match(/(,\s+|\s*\\*[\-\u2013]+\s*|\s*&\s*)/g);if(l){for(var u=0,p=(m=t.split(/(?:,\s+|\s*\\*[\-\u2013]+\s*|\s*&\s*)/)).length-1;u<p;u++)r.push(m[u]),r.push(l[u]);r.push(m[m.length-1]),r=o(r)}else r=[t];for(var h=[],c=e,f="",u=0,p=r.length;u<p;u+=2)if(l=r[u].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\. *)/g)){for(var m=r[u].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\. *)/),d=m.length-1;d>0;d--)!m[d-1]||m[d].match(/^[0-9]+([-,:a-zA-Z]*)$/)&&m[d-1].match(/^[0-9]+([-,:a-zA-Z]*)$/)||(m[d-1]=m[d-1]+l[d-1]+m[d],m=m.slice(0,d).concat(m.slice(d+1)),l=l.slice(0,d-1).concat(l.slice(d)));if(l.length>0&&0===u){var g=l[0].trim();s.STATUTE_SUBDIV_STRINGS[g]&&b.getTerm(s.STATUTE_SUBDIV_STRINGS[g])&&(-1!==["locator","number"].indexOf(i)||s.STATUTE_SUBDIV_STRINGS[g]===i)||(l=l.slice(1),m[0]=m[0]+" "+g+" "+m[1],m=m.slice(0,1).concat(m.slice(2)))}for(var d=0,_=m.length;d<_;d++)if(m[d]||d===m.length-1){c=l[d-1]?l[d-1]:c;var f=d>1?l[d-1]:"",t=m[d]?m[d].trim():"";d===m.length-1?h.push(a(f,c,t,r[u+1])):h.push(a(f,c,t))}}else h.push(a(f,c,r[u],r[u+1]));return h}(g,x);!function(t){for(var e=0,i=t.length-1;e<i;e++)!t[e].joiningSuffix&&t[e+1].label&&(t[e].joiningSuffix=" ")}(S),function(t){for(var r={label:null,count:1,numeric:!0,collapsible:!0,pos:0},n=(t.length&&t[0].label,0),a=t.length;n<a;n++)t[n].label&&(t[n].label===r.label?r.count++:(l(t,n,r),0===r.pos?("locator"!==i&&"number"!==i||b.getTerm(s.STATUTE_SUBDIV_STRINGS[r.label])||"var:"===r.label.slice(0,4)||(t[r.pos].labelVisibility=!0),-1===["locator","number"].indexOf(i)&&s.STATUTE_SUBDIV_STRINGS[r.label]!==i&&"var:"!==r.label.slice(0,4)&&(t[0].labelVisibility=!0)):t[n-1].label!==t[n].label&&"var:"!==r.label.slice(0,4)&&(t[r.pos].labelVisibility=!0)));l(t,t.length-1,r),t.length&&t[0].numeric&&"number-of-"===i.slice(0,10)&&parseInt(e[i],10)>1&&(t[0].plural=1);for(var n=0,a=t.length;n<a;n++)if(!t[n].numeric){var o=t[n].origLabel?t[n].origLabel:"";t[n].value=(o+t[n].value).trim(),t[n].label!==t[0].label&&(t[n].label="")}}(S),this.tmp.shadow_numbers[i].values=S}t&&(d(S),this.tmp.shadow_numbers[i].masterStyling=u(S)),function(t,e,i){var r=t[e];i.length&&(r.numeric=i[0].numeric,r.collapsible=i[0].collapsible,r.plural=i[0].plural,r.label=s.STATUTE_SUBDIV_STRINGS[i[0].label],"number"===e&&"issue"===r.label&&b.getTerm("number")&&(r.label="number"))}(this.tmp.shadow_numbers,i,S)}}},s.Util.outputNumericField=function(t,e,i){t.output.openLevel(t.tmp.shadow_numbers[e].masterStyling);var r,n=t.tmp.shadow_numbers[e].values,a=n.length?n[0].label:null,o=t.tmp.shadow_numbers[e].labelForm;r=o||"short";for(var l=t.tmp.shadow_numbers[e].labelDecorations,u=null,p=0,h=n.length;p<h;p++){var c=n[p],f="";if(c.label){var m;(m="var:"===c.label.slice(0,4)?c.label.slice(4):s.STATUTE_SUBDIV_STRINGS[c.label])&&(f=c.label===a?t.getTerm(m,o,c.plural):t.getTerm(m,r,c.plural))}var d=-1;f&&(d=f.indexOf("%s"));var g=s.Util.cloneToken(c.styling);if(g.formatter=c.styling.formatter,g.type=c.styling.type,g.num=c.styling.num,g.gender=c.styling.gender,d>0&&d<f.length-2)g.strings.prefix+=f.slice(0,d),g.strings.suffix=f.slice(d+2)+g.strings.suffix;else if(c.labelVisibility)if(f||(f=c.label,m=c.label),d>0){var b=new s.Token;b.decorations=l,t.output.append(f.slice(0,d),b)}else d!==f.length-2&&-1!==d||t.output.append(f+c.labelSuffix,"empty");if(c.collapsible){if(c.value.match(/^[0-9]+$/))_=new s.NumericBlob(c.particle,parseInt(c.value,10),g,i);else var _=new s.NumericBlob(c.particle,c.value,g,i);void 0===_.gender&&(_.gender=t.locale[t.opt.lang]["noun-genders"][e]),t.output.append(_,"literal")}else t.output.append(c.particle+c.value,g);if(0===d&&d<f.length-2&&(null===u&&(u=m),m!==u||p===n.length-1)){var v=new s.Token;v.decorations=l,t.output.append(f.slice(d+2),v)}}t.output.closeLevel()},s.Util.PageRangeMangler={},s.Util.PageRangeMangler.getFunction=function(t,e){var i,s,r,n,a,o,l,u,p,h,c,f,m,d,g,b,_,v=t.getTerm(e+"-range-delimiter");i=/([a-zA-Z]*)([0-9]+)\s*(?:\u2013|-)\s*([a-zA-Z]*)([0-9]+)/,n=function(i){for(r=i.length,s=1;s<r;s+=2)"object"==typeof i[s]&&(i[s]=i[s].join(""));var n=i.join("");return n=n.replace(/([^\\])\-/g,"$1"+t.getTerm(e+"-range-delimiter"))},a=function(t){var e,i,n,a="-"===v?"":v,o=new RegExp("([^\\\\])[-"+a+"\\u2013]","g");t=t.replace(o,"$1 - ").replace(/\s+-\s+/g," - ");var l=new RegExp("([a-zA-Z]*[0-9]+\\s+\\-\\s+[a-zA-Z]*[0-9]+)","g"),u=new RegExp("[a-zA-Z]*[0-9]+\\s+\\-\\s+[a-zA-Z]*[0-9]+");if(e=t.match(l),0===(i=t.split(u)).length)n=e;else for(n=[i[0]],s=1,r=i.length;s<r;s+=1)n.push(e[s-1].replace(/\s*\-\s*/g,"-")),n.push(i[s]);return n},o=function(t){for(h=a(t=""+t),r=h.length,s=1;s<r;s+=2)(c=h[s].match(i))&&(c[3]&&c[1]!==c[3]||(c[4].length<c[2].length&&(c[4]=c[2].slice(0,c[2].length-c[4].length)+c[4]),parseInt(c[2],10)<parseInt(c[4],10)&&(c[3]=v+c[1],h[s]=c.slice(1)))),"string"==typeof h[s]&&(h[s]=h[s].replace(/\-/g,v));return h},l=function(t,e,i){r=t.length;for(var s=1,a=t.length;s<a;s+=2)t[s][3]=u(t[s][1],t[s][3],e,i),t[s][2].slice(1)===t[s][0]&&(t[s][2]=v);return n(t)},u=function(t,e,i,s){if(i||(i=0),f=(""+t).split(""),m=(""+e).split(""),(d=m.slice()).reverse(),f.length===m.length)for(var r=0,n=f.length;r<n;r+=1){if(!(f[r]===m[r]&&d.length>i)){if(i&&s&&3===d.length){var a=f.slice(0,r);a.reverse(),d=d.concat(a)}break}d.pop()}return d.reverse(),d.join("")},p=function(t){for(r=t.length,s=1;s<r;s+=2)"object"==typeof t[s]&&(c=t[s],g=parseInt(c[1],10),b=parseInt(c[3],10),g>100&&g%100&&parseInt(g/100,10)===parseInt(b/100,10)?c[3]=""+b%100:g>=1e4&&(c[3]=""+b%1e3)),c[2].slice(1)===c[0]&&(c[2]=v);return n(t)};var y=function(t,e,i,s){return e(o(t=""+t),i,s)};return t.opt[e+"-range-format"]?"expanded"===t.opt[e+"-range-format"]?_=function(t){return y(t,n)}:"minimal"===t.opt[e+"-range-format"]?_=function(t){return y(t,l)}:"minimal-two"===t.opt[e+"-range-format"]?_=function(t,e){return y(t,l,2,e)}:"chicago"===t.opt[e+"-range-format"]&&(_=function(t){return y(t,p)}):_=function(t){return y(t,n)},_},s.Util.FlipFlopper=function(t){function e(t){var e={" '":' "',' "':" '",'("':"('","('":'("'};c[t].outer="true",c[e[t]].outer="inner"}function i(t){var e=[];for(var i of Object.keys(c))"quote"===c[t].type&&c[t]||e.push(i);var s=c[t];return s.opener=new RegExp("^(?:"+e.map(function(t){return t.replace("(","\\(")}).join("|")+")"),s}function r(t,e){return n(t,e)}function n(t,e){return t.match(_.open)?a(t,e):o(t,e)}function a(t,e){var i=h[h.length-1];return!i||t.match(i.opener)?(h.push({type:b[t].type,opener:b[t].opener,closer:b[t].closer,pos:e}),!1):(h.pop(),h.push({type:b[t].type,opener:b[t].opener,closer:b[t].closer,pos:e}),{fixtag:i.pos})}function o(t,e){var i=h[h.length-1];return i&&t===i.closer?(h.pop(),"nocase"===i.type&&{nocase:{open:i.pos,close:e}}):i?{fixtag:i.pos}:{fixtag:e}}function l(t){var e=[],i=(t=(t=t.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4')).replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3")).match(_.matchAll);if(!i)return{tags:[],strings:[t],forcedSpaces:[]};for(var s=t.split(_.splitAll),r=0,n=i.length-1;r<n;r++)c[i[r]]&&(""===s[r+1]&&['"',"'"].indexOf(i[r+1])>-1?(i[r+1]=" "+i[r+1],e.push(!0)):e.push(!1));return{tags:i,strings:s,forcedSpaces:e}}function u(t,e){if("'"===t){if(e&&e.match(/^[^\.\?\:\;\ ]/))return!0}else if(" '"===t&&e&&e.match(/^[\ ]/))return!0;return!1}function p(e,i,r){var n=!0,a=new v(e);e.blobs=[];var o=new function(e){this.stack=[e],this.latest=e,this.addStyling=function(e,i,r){if(n&&(" "===e.slice(0,1)&&(e=e.slice(1))," "===e.slice(0,1)&&(e=e.slice(1)),n=!1),this.latest=this.stack[this.stack.length-1],i){"string"==typeof this.latest.blobs&&((d=new s.Blob).blobs=this.latest.blobs,d.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[d]);var a=new s.Token,o=new s.Blob(null,a);if(o.alldecor=this.latest.alldecor.slice(),"@class"===i[0]&&"nodecor"===i[1]){for(var l=[],u={},p=[t[t.tmp.area].opt.layout_decorations].concat(o.alldecor),h=p.length-1;h>-1;h--){var c=p[h];if(c)for(var f=c.length-1;f>-1;f--){var m=c[f];["@font-weight","@font-style","@font-variant"].indexOf(m[0])>-1&&!u[m[0]]&&("normal"!==i[1]&&(o.decorations.push([m[0],"normal"]),l.push([m[0],"normal"])),u[m[0]]=!0)}}o.alldecor.push(l)}else o.decorations.push(i),o.alldecor.push([i]);this.latest.blobs.push(o),this.stack.push(o),this.latest=o,e&&(a=new s.Token,(o=new s.Blob(null,a)).blobs=e,o.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(o))}else if(e){var d=new s.Blob;d.blobs=e,d.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(d)}},this.popStyling=function(){this.stack.pop()}}(e);if(i.strings.length){h=i.strings[0];r&&(h=" "+h),o.addStyling(h)}for(var l=0,u=i.tags.length;l<u;l++){var p=i.tags[l],h=i.strings[l+1];p.match(_.open)?(a.set(p),o.addStyling(h,a.pair())):(a.pop(),o.popStyling(),o.addStyling(h))}}this.processTags=function(t){var i=t.blobs,s=!1;" "!==i.slice(0,1)||i.match(/^\s+[\'\"]/)||(s=!0);var n=l(i=" "+i);if(0!==n.tags.length){for(var a=!1,o=0,c=n.tags.length;o<c;o++)if(u(g=n.tags[o],i=n.strings[o+1]))n.strings[o+1]=" '"===g?" ’"+n.strings[o+1]:"’"+n.strings[o+1],n.tags[o]="";else{for(var f;f=r(g,o);){if(!(Object.keys(f).indexOf("fixtag")>-1)){if(f.nocase){n.tags[f.nocase.open]="",n.tags[f.nocase.close]="";break}break}if(g.match(_.close)&&"'"===g)n.strings[o+1]="’"+n.strings[o+1],n.tags[o]="";else{var m=n.tags[f.fixtag];n.forcedSpaces[f.fixtag-1]&&(m=m.slice(1)),n.strings[f.fixtag+1]=m+n.strings[f.fixtag+1],n.tags[f.fixtag]=""}if(!(h.length>0))break;h.pop()}f&&(f.fixtag||0===f.fixtag)&&(n.strings[o+1]=n.tags[o]+n.strings[o+1],n.tags[o]="")}for(o=h.length-1;o>-1;o--){var d=h[o].pos,g=n.tags[d];n.strings[d+1]=" '"===g||"'"===g?" ’"+n.strings[d+1]:n.tags[d]+n.strings[d+1],n.tags[d]="",h.pop()}for(o=n.tags.length-1;o>-1;o--)n.tags[o]||(n.tags=n.tags.slice(0,o).concat(n.tags.slice(o+1)),n.strings[o]=n.strings[o]+n.strings[o+1],n.strings=n.strings.slice(0,o+1).concat(n.strings.slice(o+2)));for(var o=0,c=n.tags.length;o<c;o++){var g=n.tags[o],b=n.forcedSpaces[o-1];[' "'," '",'("',"('"].indexOf(g)>-1&&(a||(e(g),a=!0),b||(n.strings[o]+=g.slice(0,1)))}p(t,n,s)}};var h=[],c={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{true:"inner",inner:"true",false:"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{true:"inner",inner:"true",false:"true"}}};c['("']=c[' "'],c["('"]=c[" '"];var f=t.getTerm("open-quote"),m=t.getTerm("close-quote"),d=t.getTerm("open-inner-quote"),g=t.getTerm("close-inner-quote");f&&m&&-1===[' "'," '",'"',"'"].indexOf(f)&&(c[f]=JSON.parse(JSON.stringify(c[' "'])),c[f].opener=f,c[f].closer=m),d&&g&&-1===[' "'," '",'"',"'"].indexOf(d)&&(c[d]=JSON.parse(JSON.stringify(c[" '"])),c[d].opener=d,c[d].closer=g);(function(){var t={};for(var e of Object.keys(c))"quote"===c[e].type&&(t[c[e].closer]=c[e])})(),function(){var t={};for(var e of Object.keys(c))if("nocase"!==c[e].type){var i=c[e].attr,s=c[e].outer,r=c[e].flipflop[c[e].outer];t[i+"/"+s]=c[e],t[i+"/"+r]=c[e]}}();var b=function(){var t={};for(var e of Object.keys(c))t[e]=i(e);return t}(),_=function(){var t=[],e=[],i={};for(var s in b)t.push(s),i[b[s].closer]=!0;for(var r of Object.keys(i))e.push(r);var n=t.concat(e).map(function(t){return t.replace("(","\\(")}).join("|");return{matchAll:new RegExp("((?:"+n+"))","g"),splitAll:new RegExp("(?:"+n+")","g"),open:new RegExp("(^(?:"+t.map(function(t){return t.replace("(","\\(")}).join("|")+")$)"),close:new RegExp("(^(?:"+e.join("|")+")$)")}}(),v=function(e){this.set=function(i){for(var s=c[i].attr,r=null,n=_stack.length-1;n>-1;n--)if((u=_stack[n])[0]===s){r=u;break}if(!r){var a=[t[t.tmp.area].opt.layout_decorations].concat(e.alldecor);t:for(n=a.length-1;n>-1;n--){var o=a[n];if(o)for(var l=o.length-1;l>-1;l--){var u=o[l];if(u[0]===s){r=u;break t}}}}r=r?[s,c[i].flipflop[r[1]]]:[s,c[i].outer],_stack.push(r)},this.pair=function(){return _stack[_stack.length-1]},this.pop=function(){_stack.pop()},_stack=[]}},s.Output.Formatters=new function(){function t(t,e){var i=t.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return!i||i[2].match(/^[\u0370-\u03FF]$/)&&!i[3]?t:i[1]+i[2].toUpperCase()+i[3]}function e(e,s){function r(t,e){return["“","‘",' "'," '"].indexOf(t)>-1?n(t,e):a(t,e)}function n(t,i){if(0===e.quoteState.length||t===e.quoteState[e.quoteState.length-1].opener)return e.quoteState.push({opener:o[t].opener,closer:o[t].closer,pos:i}),!1;var s=e.quoteState[e.quoteState.length-1].pos;return e.quoteState.pop(),e.quoteState.push({opener:o[t].opener,closer:o[t].closer,positions:i}),s}function a(t,i){if(!(e.quoteState.length>0&&t===e.quoteState[e.quoteState.length-1].closer))return i;e.quoteState.pop()}if(!s)return"";e.doppel=tagDoppel.split(s);var o={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"‘":{opener:"‘",closer:"’"},"“":{opener:"“",closer:"”"}};e.doppel.strings.length&&e.doppel.strings[0].trim()&&(e.doppel.strings[0]=e.capitaliseWords(e.doppel.strings[0],0,e.doppel.tags[0]));for(var l=0,u=e.doppel.tags.length;l<u;l++){var p=e.doppel.tags[l],h=e.doppel.strings[l+1];if(null!==e.tagState&&(i[p]?e.tagState.push(i[p]):e.tagState.length&&p===e.tagState[e.tagState.length-1]&&e.tagState.pop()),null!==e.afterPunct&&p.match(/[\!\?\:]$/)&&(e.afterPunct=!0),0===e.tagState.length?e.doppel.strings[l+1]=e.capitaliseWords(h,l+1,e.doppel,e.doppel.tags[l+1]):e.doppel.strings[l+1].trim()&&(e.lastWordPos=null),null!==e.quoteState&&((c=function(t,e){var i=t.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/);if(i)return r(i[1],e)}(p,l))||0===c)){f=e.doppel.origStrings[c+1].slice(0,1);e.doppel.strings[c+1]=f+e.doppel.strings[c+1].slice(1),e.lastWordPos=null}e.isFirst&&h.trim()&&(e.isFirst=!1),e.afterPunct&&h.trim()&&(e.afterPunct=!1)}if(e.quoteState)for(var l=0,u=e.quoteState.length;l<u;l++){var c=e.quoteState[l].pos;if(void 0!==c){var f=e.doppel.origStrings[c+1].slice(0,1);e.doppel.strings[c+1]=f+e.doppel.strings[c+1].slice(1)}}if(e.lastWordPos){var m=wordDoppel.split(e.doppel.strings[e.lastWordPos.strings]),d=t(m.strings[e.lastWordPos.words]);m.strings[e.lastWordPos.words]=d,e.doppel.strings[e.lastWordPos.strings]=wordDoppel.join(m)}return tagDoppel.join(e.doppel)}this.passthrough=function(t,e){return e},this.lowercase=function(t,i){return e({quoteState:null,capitaliseWords:function(t){for(var e=t.split(" "),i=0,s=e.length;i<s;i++){var r=e[i];r&&(e[i]=r.toLowerCase())}return e.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},i)},this.uppercase=function(t,i){return e({quoteState:null,capitaliseWords:function(t){for(var e=t.split(" "),i=0,s=e.length;i<s;i++){var r=e[i];r&&(e[i]=r.toUpperCase())}return e.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},i)},this.sentence=function(i,s){var r={quoteState:[],capitaliseWords:function(e){for(var i=e.split(" "),s=0,n=i.length;s<n;s++){var a=i[s];a&&(r.isFirst?(i[s]=t(a),r.isFirst=!1):i[s]=a.toLowerCase())}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return e(r,s)},this.title=function(i,s){var r={quoteState:[],capitaliseWords:function(e,i,s){if(e.trim()){for(var n=e.split(/[ \u00A0]+/),a=wordDoppel.split(e),o=0,l=(n=a.strings).length;o<l;o++){var u=n[o];u&&(u.length>1&&!u.toLowerCase().match(r.skipWordsRex)?n[o]=t(n[o]):o===n.length-1&&"-"===s?n[o]=t(n[o]):r.isFirst?n[o]=t(n[o]):r.afterPunct&&(n[o]=t(n[o])),r.afterPunct=!1,r.isFirst=!1,r.lastWordPos={strings:i,words:o})}e=wordDoppel.join(a)}return e},skipWordsRex:i.locale[i.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return e(r,s)},this["capitalize-first"]=function(i,s){var r={quoteState:[],capitaliseWords:function(e){for(var i=e.split(" "),s=0,n=i.length;s<n;s++){var a=i[s];if(a&&r.isFirst){i[s]=t(a),r.isFirst=!1;break}}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return e(r,s)},this["capitalize-all"]=function(i,s){return e({quoteState:[],capitaliseWords:function(e){for(var i=e.split(" "),s=0,r=i.length;s<r;s++){var n=i[s];n&&(i[s]=t(n))}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},s)};tagDoppel=new s.Doppeler('(?:‘|’|“|”| "| \'|"|\'|[-–—/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)',function(t){return t.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")}),wordDoppel=new s.Doppeler("(?:[   -​ 　]+)");var i={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>"}},s.Output.Formats=function(){},s.Output.Formats.prototype.html={text_escape:function(t){return t||(t=""),t.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g,"  ").replace(s.SUPERSCRIPTS_REGEXP,function(t){return"<sup>"+s.SUPERSCRIPTS[t]+"</sup>"})},bibstart:'<div class="csl-bib-body">\n',bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":s.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":s.Output.Formatters.passthrough,"@strip-periods/false":s.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?t.getTerm("open-quote"):t.getTerm("open-quote")+e+t.getTerm("close-quote")},"@quotes/inner":function(t,e){return void 0===e?"’":t.getTerm("open-inner-quote")+e+t.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){var i="";return t.sys.embedBibliographyEntry&&(i=t.sys.embedBibliographyEntry(this.item_id)+"\n"),'  <div class="csl-entry">'+e+"</div>\n"+i},"@display/block":function(t,e){return'\n\n    <div class="csl-block">'+e+"</div>\n"},"@display/left-margin":function(t,e){return'\n    <div class="csl-left-margin">'+e+"</div>"},"@display/right-inline":function(t,e){return'<div class="csl-right-inline">'+e+"</div>\n  "},"@display/indent":function(t,e){return'<div class="csl-indent">'+e+"</div>\n  "},"@showid/true":function(t,e,i){if(t.tmp.just_looking||t.tmp.suppress_decorations)return e;if(i)return'<span class="'+t.opt.nodenames[i]+'" cslid="'+i+'">'+e+"</span>";if(this.params&&"string"==typeof e){var r="";if(e){var n=e.match(s.VARIABLE_WRAPPER_PREPUNCT_REX);r=n[1],e=n[2]}var a="";return e&&s.SWAPPING_PUNCTUATION.indexOf(e.slice(-1))>-1&&(a=e.slice(-1),e=e.slice(0,-1)),t.sys.variableWrapper(this.params,r,e,a)}return e},"@URL/true":function(t,e){return'<a href="'+e+'">'+e+"</a>"},"@DOI/true":function(t,e){return'<a href="http://dx.doi.org/'+e+'">'+e+"</a>"}},s.Output.Formats.prototype.text={text_escape:function(t){return t||(t=""),t},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":s.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":s.Output.Formatters.passthrough,"@strip-periods/false":s.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?t.getTerm("open-quote"):t.getTerm("open-quote")+e+t.getTerm("close-quote")},"@quotes/inner":function(t,e){return void 0===e?"’":t.getTerm("open-inner-quote")+e+t.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){return e+"\n"},"@display/block":function(t,e){return"\n"+e},"@display/left-margin":function(t,e){return e},"@display/right-inline":function(t,e){return e},"@display/indent":function(t,e){return"\n    "+e},"@showid/true":function(t,e,i){return e},"@URL/true":function(t,e){return e},"@DOI/true":function(t,e){return e}},s.Output.Formats.prototype.rtf={text_escape:function(t){return t||(t=""),t.replace(/([\\{}])/g,"\\$1").replace(s.SUPERSCRIPTS_REGEXP,function(t){return"\\super "+s.SUPERSCRIPTS[t]+"\\nosupersub{}"}).replace(/[\u007F-\uFFFF]/g,function(t){return"\\uc0\\u"+t.charCodeAt(0).toString()+"{}"}).split("\t").join("\\tab{}")},"@passthrough/true":s.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":s.Output.Formatters.passthrough,"@strip-periods/false":s.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?s.Output.Formats.rtf.text_escape(t.getTerm("open-quote")):s.Output.Formats.rtf.text_escape(t.getTerm("open-quote"))+e+s.Output.Formats.rtf.text_escape(t.getTerm("close-quote"))},"@quotes/inner":function(t,e){return void 0===e?s.Output.Formats.rtf.text_escape("’"):s.Output.Formats.rtf.text_escape(t.getTerm("open-inner-quote"))+e+s.Output.Formats.rtf.text_escape(t.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":"\\line{}%%STRING%%\\line\r\n","@cite/entry":function(t,e){return e},"@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){return e},"@display/left-margin":function(t,e){return e+"\\tab "},"@display/right-inline":function(t,e){return e+"\r\n"},"@display/indent":function(t,e){return"\n\\tab "+e+"\\line\r\n"},"@showid/true":function(t,e,i){if(t.tmp.just_looking||t.tmp.suppress_decorations)return e;var r="";if(e){var n=e.match(s.VARIABLE_WRAPPER_PREPUNCT_REX);r=n[1],e=n[2]}var a="";return e&&s.SWAPPING_PUNCTUATION.indexOf(e.slice(-1))>-1&&(a=e.slice(-1),e=e.slice(0,-1)),t.sys.variableWrapper(this.params,r,e,a)},"@URL/true":function(t,e){return e},"@DOI/true":function(t,e){return e}},s.Output.Formats=new s.Output.Formats,s.Registry=function(t){var e,i,r;this.debug=!1,this.state=t,this.registry={},this.reflist=[],this.refhash={},this.namereg=new s.Registry.NameReg(t),this.citationreg=new s.Registry.CitationReg(t),this.authorstrings={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new s.Registry.Comparifier(t,"bibliography_sort"),this.getSortedIds=function(){for(e=[],i=0,r=this.reflist.length;i<r;i+=1)e.push(""+this.reflist[i].id);return e},this.getSortedRegistryItems=function(){for(e=[],i=0,r=this.reflist.length;i<r;i+=1)e.push(this.reflist[i]);return e}},s.Registry.prototype.init=function(t,e){if(this.oldseq={},e){this.uncited={};for(var i=0,s=t.length;i<s;i+=1)this.myhash[t[i]]||this.mylist.push(""+t[i]),this.uncited[t[i]]=!0,this.myhash[t[i]]=!0}else{for(var r in this.uncited)t.push(r);var n={};for(i=t.length-1;i>-1;i+=-1)n[t[i]]?t=t.slice(0,i).concat(t.slice(i+1)):n[t[i]]=!0;this.mylist=[];for(var i=0,s=t.length;i<s;i+=1)this.mylist.push(""+t[i]);this.myhash=n}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}},s.Registry.prototype.dopurge=function(t){for(var e=this.mylist.length-1;e>-1;e+=-1)this.citationreg.citationsByItemId&&(this.citationreg.citationsByItemId[this.mylist[e]]||t[this.mylist[e]]||(delete this.myhash[this.mylist[e]],this.mylist=this.mylist.slice(0,e).concat(this.mylist.slice(e+1))));this.dodeletes(this.myhash)},s.Registry.prototype.dodeletes=function(t){var e,i,s,r,n,a,o,l,u;"string"==typeof t&&((t={})[t]=!0);for(i in this.registry)if(!t[i]){if(this.uncited[i])continue;e=this.namereg.delitems(i);for(o in e)this.refreshes[o]=!0;for(s=this.registry[i].ambig,(l=this.ambigcites[s].indexOf(i))>-1&&(a=this.ambigcites[s].slice(),this.ambigcites[s]=a.slice(0,l).concat(a.slice(l+1,a.length)),this.ambigresets[s]=this.ambigcites[s].length),n=this.ambigcites[s].length,r=0;r<n;r+=1)u=""+this.ambigcites[s][r],this.refreshes[u]=!0;if(this.registry[i].siblings)if(1==this.registry[i].siblings.length){var p=this.registry[i].siblings[0];this.registry[p].master=!0,this.registry[p].siblings.pop(),this.registry[p].parallel=!1}else if(this.registry[i].siblings.length>1){var h=[i];if(this.registry[i].master){var c=this.registry[i].siblings[0],f=this.registry[c];f.master=!0,f.parallel=!1,h.push(c);for(var m=0,d=this.registry[i].siblings.length;m<d;m+=1)this.registry[this.registry[i].siblings[m]].parallel=c}for(var g=[],m=this.registry[i].siblings.length-1;m>-1;m+=-1){var b=this.registry[i].siblings.pop();-1===h.indexOf(b)&&g.push(b)}for(m=g.length-1;m>-1;m+=-1)this.registry[i].siblings.push(g[m])}delete this.registry[i],delete this.refhash[i],this.return_data.bibchange=!0}},s.Registry.prototype.doinserts=function(t){var e,i,r,n,a,o,l;for("string"==typeof t&&(t=[t]),o=0,l=t.length;o<l;o+=1)e=t[o],this.registry[e]||(i=this.state.retrieveItem(e),r=s.getAmbiguousCite.call(this.state,i),this.ambigsTouched[r]=!0,i.legislation_id||(this.akeys[r]=!0),n={id:""+e,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:i},this.registry[e]=n,this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[e]&&(this.registry[e]["first-reference-note-number"]=this.citationreg.citationsByItemId[e][0].properties.noteIndex),a=s.getAmbigConfig.call(this.state),this.registerAmbigToken(r,e,a),this.touched[e]=!0,this.return_data.bibchange=!0)},s.Registry.prototype.rebuildlist=function(){var t,e,i;for(this.reflist=[],this.state.opt.citation_number_sort_direction===s.DESCENDING&&this.state.opt.citation_number_sort_used,t=this.mylist.length,e=0;e<t;e+=1)i=this.mylist[e],this.reflist.push(this.registry[i]),this.oldseq[i]=this.registry[i].seq,this.registry[i].seq=e+1;this.state.opt.citation_number_sort_direction===s.DESCENDING&&this.state.opt.citation_number_sort_used},s.Registry.prototype.dorefreshes=function(){var t,e;for(t in this.refreshes)if(e=this.registry[t]){e.sortkeys=void 0,n=this.state.retrieveItem(t),void 0===(a=e.ambig)&&(this.state.tmp.disambig_settings=!1,a=s.getAmbiguousCite.call(this.state,n),o=s.getAmbigConfig.call(this.state),this.registerAmbigToken(a,t,o));for(var i in this.ambigresets)if(1===this.ambigresets[i]){var r=this.ambigcites[a][0],n=this.state.retrieveItem(r);this.registry[r].disambig=new s.AmbigConfig,this.state.tmp.disambig_settings=!1;var a=s.getAmbiguousCite.call(this.state,n),o=s.getAmbigConfig.call(this.state);this.registerAmbigToken(a,r,o)}this.state.tmp.taintedItemIDs[t]=!0,this.ambigsTouched[a]=!0,n.legislation_id||(this.akeys[a]=!0),this.touched[t]=!0}},s.Registry.prototype.setdisambigs=function(){var t;this.leftovers=[];for(t in this.ambigsTouched)this.state.disambiguate.run(t);this.ambigsTouched={},this.akeys={}},s.Registry.prototype.renumber=function(){var t,e,i;for(this.state.opt.citation_number_sort_direction===s.DESCENDING&&this.state.opt.citation_number_sort_used,t=this.reflist.length,e=0;e<t;e+=1)(i=this.reflist[e]).seq=e+1,this.state.opt.update_mode===s.NUMERIC&&i.seq!=this.oldseq[i.id]&&(this.state.tmp.taintedItemIDs[i.id]=!0),this.state.opt.bib_mode===s.NUMERIC&&i.seq!=this.oldseq[i.id]&&(this.return_data.bibchange=!0);this.state.opt.citation_number_sort_direction===s.DESCENDING&&this.state.opt.citation_number_sort_used&&this.reflist.reverse()},s.Registry.prototype.setsortkeys=function(){for(var t=0,e=this.mylist.length;t<e;t+=1){var i=this.mylist[t];(this.touched[i]||this.state.tmp.taintedItemIDs[i]||!this.registry[i].sortkeys)&&(this.registry[i].sortkeys=s.getSortKeys.call(this.state,this.state.retrieveItem(i),"bibliography_sort"))}},s.Registry.prototype.sorttokens=function(){this.reflist.sort(this.sorter.compareKeys)},s.Registry.Comparifier=function(t,e){var i,r,n,a,o=s.getSortCompare(t.opt["default-locale-sort"]);i=t[e].opt.sort_directions,this.compareKeys=function(t,e){for(r=t.sortkeys?t.sortkeys.length:0,n=0;n<r;n+=1){var s=0;if(0<(s=t.sortkeys[n]===e.sortkeys[n]?0:void 0===t.sortkeys[n]?i[n][1]:void 0===e.sortkeys[n]?i[n][0]:o(t.sortkeys[n],e.sortkeys[n])))return i[n][1];if(0>s)return i[n][0]}return t.seq>e.seq?1:t.seq<e.seq?-1:0},a=this.compareKeys,this.compareCompositeKeys=function(t,e){return a(t[1],e[1])}},s.Registry.prototype.compareRegistryTokens=function(t,e){return t.seq>e.seq?1:t.seq<e.seq?-1:0},s.Registry.prototype.registerAmbigToken=function(t,e,i){if(this.registry[e]&&this.registry[e].disambig&&this.registry[e].disambig.names)for(var r=0,n=i.names.length;r<n;r+=1)if(i.names[r]!==this.registry[e].disambig.names[r])this.state.tmp.taintedItemIDs[e]=!0;else if(i.givens[r])for(var a=0,o=i.givens[r].length;a<o;a+=1)i.givens[r][a]!==this.registry[e].disambig.givens[r][a]&&(this.state.tmp.taintedItemIDs[e]=!0);this.ambigcites[t]||(this.ambigcites[t]=[]),-1===this.ambigcites[t].indexOf(""+e)&&this.ambigcites[t].push(""+e),this.registry[e].ambig=t;this.registry[e].disambig=s.cloneAmbigConfig(i)},s.getSortKeys=function(t,e){var i,r,n,a,o,l;for(i=this.tmp.area,r=this.tmp.root,n=this.tmp.extension,a=s.Util.Sort.strip_prepositions,this.tmp.area=e,this.tmp.root=e.indexOf("_")>-1?e.slice(0,-5):e,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.parallel.use_parallels=(!0===this.parallel.use_parallels||null===this.parallel.use_parallels)&&null,this.tmp.suppress_decorations=!0,s.getCite.call(this,t),this.tmp.suppress_decorations=!1,this.parallel.use_parallels=null===this.parallel.use_parallels,this.tmp.disambig_override=!1,o=this[e].keys.length,l=0;l<o;l+=1)this[e].keys[l]=a(this[e].keys[l]);return this.tmp.area=i,this.tmp.root=r,this.tmp.extension=n,this[e].keys},s.Registry.NameReg=function(t){var e,i,r,n,a,o,l,u,p,h,c,f,m,d,g,b;this.state=t,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},u=function(t){return t||(t=""),t.replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},p=function(t,n,a){e=u(a.family);var o=(r=u(a.given)).match(/[,\!]* ([^,]+)$/);o&&o[1]===o[1].toLowerCase()&&(r=r.replace(/[,\!]* [^,]+$/,"")),i=s.Util.Names.initializeWith(t,r,"%s"),"by-cite"===t.citation.opt["givenname-disambiguation-rule"]&&(e=""+n+e)},h=function(s,r,o,l,u,h){var c;if("bibliography"===t.tmp.area.slice(0,12)&&!u)return"string"==typeof h?1:2;r=t.nameOutput.getName(r,"locale-translit",!0).name,p(this.state,""+s,r),c=2,n=t.opt["disambiguate-add-givenname"];var f=a=t.citation.opt["givenname-disambiguation-rule"];return"by-cite"===a&&(a="all-names"),"short"===u?c=0:"string"==typeof h&&(c=1),void 0===this.namereg[e]||void 0===this.namereg[e].ikey[i]?c:"by-cite"===f&&c<=l?l:n?"string"==typeof a&&"primary-name"===a.slice(0,12)&&o>0?c:(a&&"all-names"!==a&&"primary-name"!==a?"all-names-with-initials"!==a&&"primary-name-with-initials"!==a||(c=this.namereg[e].count>1?1:0):(this.namereg[e].count>1&&(c=1),(this.namereg[e].ikey&&this.namereg[e].ikey[i].count>1||this.namereg[e].count>1&&"string"!=typeof h)&&(c=2)),t.registry.registry[s]?c:"short"==u?0:"string"==typeof h?1:void 0):c},c=function(s){var n,a,u,p,h;for("string"!=typeof s&&"number"!=typeof s||(s=[""+s]),o={},a=s.length,n=0;n<a;n+=1)if(p=""+s[n],this.nameind[p]){for(h in this.nameind[p])if(this.nameind[p].hasOwnProperty(h)){if(m=h.split("::"),e=m[0],i=m[1],r=m[2],void 0===this.namereg[e])continue;if(l=this.namereg[e].items,r&&this.namereg[e].ikey[i]&&this.namereg[e].ikey[i].skey[r]&&(d=this.namereg[e].ikey[i].skey[r].items,(u=d.indexOf(""+p))>-1&&(this.namereg[e].ikey[i].skey[r].items=d.slice(0,u).concat(d.slice([u+1]))),0===this.namereg[e].ikey[i].skey[r].items.length&&(delete this.namereg[e].ikey[i].skey[r],this.namereg[e].ikey[i].count+=-1,this.namereg[e].ikey[i].count<2)))for(g=0,b=this.namereg[e].ikey[i].items.length;g<b;g+=1)t.tmp.taintedItemIDs[this.namereg[e].ikey[i].items[g]]=!0;if(i&&this.namereg[e].ikey[i]&&((u=this.namereg[e].ikey[i].items.indexOf(""+p))>-1&&(l=this.namereg[e].ikey[i].items.slice(),this.namereg[e].ikey[i].items=l.slice(0,u).concat(l.slice([u+1]))),0===this.namereg[e].ikey[i].items.length&&(delete this.namereg[e].ikey[i],this.namereg[e].count+=-1,this.namereg[e].count<2)))for(g=0,b=this.namereg[e].items.length;g<b;g+=1)t.tmp.taintedItemIDs[this.namereg[e].items[g]]=!0;e&&((u=this.namereg[e].items.indexOf(""+p))>-1&&(l=this.namereg[e].items.slice(),this.namereg[e].items=l.slice(0,u).concat(l.slice([u+1],l.length))),this.namereg[e].items.length<2&&delete this.namereg[e]),delete this.nameind[p][h]}delete this.nameind[p],delete this.nameindpkeys[p]}return o},f=function(s,n,a){var o,l;if(n=t.nameOutput.getName(n,"locale-translit",!0).name,!t.citation.opt["givenname-disambiguation-rule"]||"primary-"!==t.citation.opt["givenname-disambiguation-rule"].slice(0,8)||0===a){if(p(this.state,""+s,n),e&&(void 0===this.namereg[e]?(this.namereg[e]={},this.namereg[e].count=0,this.namereg[e].ikey={},this.namereg[e].items=[s]):-1===this.namereg[e].items.indexOf(s)&&this.namereg[e].items.push(s)),e&&i)if(void 0===this.namereg[e].ikey[i]){if(this.namereg[e].ikey[i]={},this.namereg[e].ikey[i].count=0,this.namereg[e].ikey[i].skey={},this.namereg[e].ikey[i].items=[s],this.namereg[e].count+=1,2===this.namereg[e].count)for(o=0,l=this.namereg[e].items.length;o<l;o+=1)t.tmp.taintedItemIDs[this.namereg[e].items[o]]=!0}else-1===this.namereg[e].ikey[i].items.indexOf(s)&&this.namereg[e].ikey[i].items.push(s);if(e&&i&&r)if(void 0===this.namereg[e].ikey[i].skey[r]){if(this.namereg[e].ikey[i].skey[r]={},this.namereg[e].ikey[i].skey[r].items=[s],this.namereg[e].ikey[i].count+=1,2===this.namereg[e].ikey[i].count)for(o=0,l=this.namereg[e].ikey[i].items.length;o<l;o+=1)t.tmp.taintedItemIDs[this.namereg[e].ikey[i].items[o]]=!0}else-1===this.namereg[e].ikey[i].skey[r].items.indexOf(s)&&this.namereg[e].ikey[i].skey[r].items.push(s);void 0===this.nameind[s]&&(this.nameind[s]={},this.nameindpkeys[s]={}),e&&(this.nameind[s][e+"::"+i+"::"+r]=!0,this.nameindpkeys[s][e]=this.namereg[e])}},this.addname=f,this.delitems=c,this.evalname=h},s.Registry.CitationReg=function(t){this.citationById={},this.citationByIndex=[]},s.Disambiguation=function(t){this.state=t,this.sys=this.state.sys,this.registry=t.registry.registry,this.ambigcites=t.registry.ambigcites,this.configModes(),this.debug=!1},s.Disambiguation.prototype.run=function(t){this.modes.length&&(this.akey=t,this.initVars(t)&&this.runDisambig())},s.Disambiguation.prototype.runDisambig=function(){var t;for(this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;){this.listpos=0,this.base||(this.base=this.lists[0][0]);t=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(t)}this.lists=this.lists.slice(1)}},s.Disambiguation.prototype.scanItems=function(t){var e;this.Item=t[1][0],this.ItemCite=s.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=t[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var i=0,r=1,n=t[1].length;r<n;r+=1){e=t[1][r];var a=s.getAmbiguousCite.call(this.state,e,this.base,!0);this.ItemCite===a?(i+=1,this.partners.push(e)):this.nonpartners.push(e)}this.clashes[0]=this.clashes[1],this.clashes[1]=i},s.Disambiguation.prototype.evalScan=function(t){this[this.modes[this.modeindex]](t),t&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])},s.Disambiguation.prototype.disNames=function(t){if(0===this.clashes[1]&&1===this.nonpartners.length)this.captureStepToBase(),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(0===this.clashes[1])this.captureStepToBase(),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(1===this.nonpartners.length)this.captureStepToBase(),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(t&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){for(var e=0,i=this.partners.length;e<i;e+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[e].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}},s.Disambiguation.prototype.disExtraText=function(){var t=!1;if(0===this.clashes[1]&&this.nonpartners.length<2&&(t=!0),t||this.base.disambiguate&&this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax){if(t||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(t||this.modeindex===this.modes.length-1){for(var e=this.lists[this.listpos][0],i=0,s=this.lists[this.listpos][1].length;i<s;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][i].id,e);this.lists[this.listpos]=[this.betterbase,[]]}else{this.modeindex=this.modes.length-1,(e=this.lists[this.listpos][0]).disambiguate=!0;for(var i=0,s=this.lists[this.listpos][1].length;i<s;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][i].id,e)}}else if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var i=0,s=this.lists[this.listpos][1].length;i<s;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0}},s.Disambiguation.prototype.disYears=function(){var t,e;t=[];var i=this.lists[this.listpos][0];if(this.clashes[1])for(var r=0,n=this.state.registry.mylist.length;r<n;r+=1)for(var a=this.state.registry.mylist[r],o=0,l=this.lists[this.listpos][1].length;o<l;o+=1)if((e=this.lists[this.listpos][1][o]).id==a){t.push(this.registry[e.id]);break}t.sort(this.state.registry.sorter.compareKeys);for(var u=0,p=t.length;u<p;u+=1){i.year_suffix=""+u;var h=this.state.registry.registry[t[u].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+t[u].id,i),s.ambigConfigDiff(h,i)&&(this.state.tmp.taintedItemIDs[t[u].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]},s.Disambiguation.prototype.incrementDisambig=function(){if(this.initGivens)return this.initGivens=!1,!1;var t=!1,e=!0;if("disNames"===this.modes[this.modeindex]){e=!1,"number"!=typeof this.givensMax&&(e=!0);var i=!1;if("number"!=typeof this.namesMax&&(i=!0),"number"==typeof this.givensMax&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:e=!0),"number"==typeof this.namesMax&&e&&(this.state.opt["disambiguate-add-names"]?(i=!1,this.gname<this.namesMax?(this.base.names[this.gnameset]+=1,this.gname+=1):i=!0):i=!0),"number"==typeof this.namesetsMax&&i)if(this.gnameset<this.namesetsMax)this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0;else;"number"==typeof this.namesetsMax&&-1!==this.namesetsMax&&this.gnameset!==this.namesetsMax||this.state.opt["disambiguate-add-names"]&&"number"==typeof this.namesMax&&this.gname!==this.namesMax||"number"==typeof this.givensMax&&void 0!==this.base.givens[this.gnameset]&&void 0!==this.base.givens[this.gnameset][this.gname]&&this.base.givens[this.gnameset][this.gname]!==this.givensMax||(t=!0)}else"disExtraText"===this.modes[this.modeindex]&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1);return t},s.Disambiguation.prototype.initVars=function(t){var e,i,r;if(this.lists=[],this.base=!1,this.betterbase=!1,this.akey=t,this.maxNamesByItemId={},i=[],!(e=this.ambigcites[t])||!e.length)return!1;var n=this.state.retrieveItem(""+e[0]);if(this.getCiteData(n),this.base=s.getAmbigConfig.call(this.state),e&&e.length>1){i.push([this.maxNamesByItemId[n.id],n]);for(var a=1,o=e.length;a<o;a+=1)n=this.state.retrieveItem(""+e[a]),this.getCiteData(n,this.base),i.push([this.maxNamesByItemId[n.id],n]);i.sort(function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1].id>e[1].id?1:t[1].id<e[1].id?-1:0}),r=[];for(var a=0,o=i.length;a<o;a+=1)r.push(i[a][1]);this.lists.push([this.base,r]),this.Item=this.lists[0][1][0]}else this.Item=this.state.retrieveItem(""+e[0]);if(this.modeindex=0,this.state.citation.opt["disambiguate-add-names"],0)for(var l=this.base.names[0],a=1,o=this.base.names.length;a<o;a+=1)l=Math.max(l,this.base.names.names[a]);else this.namesMax=this.maxNamesByItemId[this.Item.id][0];return this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0},s.Disambiguation.prototype.padBase=function(t){for(var e=0,i=t.names.length;e<i;e+=1){t.givens[e]||(t.givens[e]=[]);for(var s=0,r=t.names[e];s<r;s+=1)t.givens[e][s]||(t.givens[e][s]=0)}},s.Disambiguation.prototype.configModes=function(){var t,e;this.modes=[],t=this.state.opt["disambiguate-add-givenname"],e=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||t&&"by-cite"===e)&&this.modes.push("disNames"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")},s.Disambiguation.prototype.getCiteData=function(t,e){if(!this.maxNamesByItemId[t.id]){s.getAmbiguousCite.call(this.state,t,e),e=s.getAmbigConfig.call(this.state),this.maxNamesByItemId[t.id]=s.getMaxVals.call(this.state),this.state.registry.registry[t.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var i=0,r=this.state.registry.registry[t.id].disambig.givens.length;i<r;i+=1)this.state.registry.registry[t.id].disambig.givens[i]=this.state.tmp.disambig_settings.givens[i].slice();this.namesetsMax=this.state.registry.registry[t.id].disambig.names.length-1,this.base||(this.base=e,this.betterbase=s.cloneAmbigConfig(e)),e.names.length<this.base.names.length&&(this.base=e);for(var i=0,r=e.names.length;i<r;i+=1)e.names[i]>this.base.names[i]&&(this.base.givens[i]=e.givens[i].slice(),this.base.names[i]=e.names[i],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var n=0,a=this.base.givens.length;n<a;n+=1)this.betterbase.givens[n]=this.base.givens[n].slice()}},s.Disambiguation.prototype.captureStepToBase=function(){"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.base.givens&&this.base.givens.length&&void 0!==this.base.givens[this.gnameset][this.gname]&&(this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]},s.Engine.prototype.getJurisdictionList=function(t){for(var e=[],i=t.split(":"),s=i.length;s>0;s--)e.push(i.slice(0,s).join(":"));return-1===e.indexOf("us")&&e.push("us"),e},s.Engine.prototype.retrieveAllStyleModules=function(t){var e={},i=this.locale[this.opt.lang].opts["jurisdiction-preference"];i=i||[];for(var s=(i=[""].concat(i)).length-1;s>-1;s--)for(var r=i[s],n=0,a=t.length;n<a;n++){var o=t[n];if(!this.opt.jurisdictions_seen[o]){var l=this.sys.retrieveStyleModule(o,r);(!l&&!r||l)&&(this.opt.jurisdictions_seen[o]=!0),l&&(e[o]=l)}}return e},s.ParticleList=function(){var t=[[[0,1],null]],e=[[[0,3],null]],i=[[null,[0,1]]],s=[[null,[0,2]]],r=[[null,[0,3]]],n=[[null,[0,1]],[[0,1],null]],a=[[null,[0,2]],[[0,2],null]],o=[[[0,1],null],[null,[0,1]]],l=[[[0,2],null],[null,[0,2]]],u=[[[0,3],null],[null,[0,3]]],p=[[null,[0,2]],[[0,1],[1,2]]];return PARTICLES=[["'s",i],["'s-",i],["'t",i],["a",i],["aan 't",s],["aan de",s],["aan den",s],["aan der",s],["aan het",s],["aan t",s],["aan",i],["ad-",n],["adh-",n],["af",n],["al",n],["al-",n],["am de",s],["am",i],["an-",n],["ar-",n],["as-",n],["ash-",n],["at-",n],["ath-",n],["auf dem",l],["auf den",l],["auf der",l],["auf ter",s],["auf",o],["aus 'm",l],["aus dem",l],["aus den",l],["aus der",l],["aus m",l],["aus",o],["aus'm",l],["az-",n],["aš-",n],["aḍ-",n],["aḏ-",n],["aṣ-",n],["aṭ-",n],["aṯ-",n],["aẓ-",n],["ben",i],["bij 't",s],["bij de",s],["bij den",s],["bij het",s],["bij t",s],["bij",i],["bin",i],["boven d",s],["boven d'",s],["d",i],["d'",n],["da",n],["dal",i],["dal'",i],["dall'",i],["dalla",i],["das",n],["de die le",r],["de die",s],["de l",s],["de l'",s],["de la",p],["de las",p],["de le",s],["de li",a],["de van der",r],["de",n],["de'",n],["deca",i],["degli",n],["dei",n],["del",n],["dela",t],["dell'",n],["della",n],["delle",n],["dello",n],["den",n],["der",n],["des",n],["di",n],["die le",s],["do",i],["don",i],["dos",n],["du",n],["ed-",n],["edh-",n],["el",n],["el-",n],["en-",n],["er-",n],["es-",n],["esh-",n],["et-",n],["eth-",n],["ez-",n],["eš-",n],["eḍ-",n],["eḏ-",n],["eṣ-",n],["eṭ-",n],["eṯ-",n],["eẓ-",n],["het",i],["i",i],["il",t],["im",i],["in 't",s],["in de",s],["in den",s],["in der",a],["in het",s],["in t",s],["in",i],["l",i],["l'",i],["la",i],["las",i],["le",i],["les",n],["lo",n],["los",i],["lou",i],["of",i],["onder 't",s],["onder de",s],["onder den",s],["onder het",s],["onder t",s],["onder",i],["op 't",s],["op de",a],["op den",s],["op der",s],["op gen",s],["op het",s],["op t",s],["op ten",s],["op",i],["over 't",s],["over de",s],["over den",s],["over het",s],["over t",s],["over",i],["s",i],["s'",i],["sen",t],["t",i],["te",i],["ten",i],["ter",i],["tho",i],["thoe",i],["thor",i],["to",i],["toe",i],["tot",i],["uijt 't",s],["uijt de",s],["uijt den",s],["uijt te de",r],["uijt ten",s],["uijt",i],["uit 't",s],["uit de",s],["uit den",s],["uit het",s],["uit t",s],["uit te de",r],["uit ten",s],["uit",i],["unter",i],["v",i],["v.",i],["v.d.",i],["van 't",s],["van de l",r],["van de l'",r],["van de",s],["van de",s],["van den",s],["van der",s],["van gen",s],["van het",s],["van la",s],["van t",s],["van ter",s],["van van de",r],["van",n],["vander",i],["vd",i],["ver",i],["vom und zum",e],["vom",n],["von 't",s],["von dem",l],["von den",l],["von der",l],["von t",s],["von und zu",u],["von zu",l],["von",o],["voor 't",s],["voor de",s],["voor den",s],["voor in 't",r],["voor in t",r],["voor",i],["vor der",l],["vor",o],["z",t],["ze",t],["zu",o],["zum",n],["zur",n]]}(),s.parseParticles=function(){function t(t,e,i){var r=t;t=i?t.toLowerCase():t;var n,a=[];e?(t=t.split("").reverse().join(""),n=s.PARTICLE_GIVEN_REGEXP):n=s.PARTICLE_FAMILY_REGEXP;for(var o=t.match(n);o;){var l=e?o[1].split("").reverse().join(""):o[1],u=!!o&&l,p=!!(u=!!u&&l.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1"))&&u.toUpperCase()!==u;if(!p)break;e?(a.push(r.slice(-1*l.length)),r=r.slice(0,-1*l.length)):(a.push(r.slice(0,l.length)),r=r.slice(l.length)),o=(t=o[2]).match(n)}if(e){t=t.split("").reverse().join(""),a.reverse();for(var h=1,c=a.length;h<c;h++)" "==a[h].slice(0,1)&&(a[h-1]+=" ");for(var h=0,c=a.length;h<c;h++)" "==a[h].slice(0,1)&&(a[h]=a[h].slice(1));t=r.slice(0,t.length)}else t=r.slice(-1*t.length);return[p,t,a]}function e(t){var e=t.slice(-1);return t=t.trim()," "===e&&["'","’"].indexOf(t.slice(-1))>-1&&(t+=" "),t}function i(t){if(!t.suffix&&t.given&&(m=t.given.match(/(\s*,!*\s*)/),m)){idx=t.given.indexOf(m[1]);var e=t.given.slice(idx+m[1].length),i=t.given.slice(idx,idx+m[1].length).replace(/\s*/g,"");"et al"!==e.replace(/\./g,"")||t["dropping-particle"]?(2===i.length&&(t["comma-suffix"]=!0),t.suffix=e):(t["dropping-particle"]=e,t["comma-dropping-particle"]=","),t.given=t.given.slice(0,idx)}}return function(s){var r=t(s.family),n=(r[0],r[1]),a=r[2];s.family=n;var o=e(a.join(""));o&&(s["non-dropping-particle"]=o),i(s);(r=t(s.given,!0))[0];var l=r[1],u=r[2];s.given=l;var p=u.join("").trim();p&&(s["dropping-particle"]=p)}}(),t.exports=s}).call(e,s(105)(t))},function(t,e){var i=t.exports={get firstChild(){var t=this.children;return t&&t[0]||null},get lastChild(){var t=this.children;return t&&t[t.length-1]||null},get nodeType(){return r[this.type]||r.element}},s={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},r={element:1,text:3,cdata:4,comment:8};Object.keys(s).forEach(function(t){var e=s[t];Object.defineProperty(i,t,{get:function(){return this[e]||null},set:function(t){return this[e]=t,t}})})},function(t,e,i){"use strict";var s={};t.exports=s},function(t,e,i){"use strict";var s=i(50),r=i(24),n=i(22),a=i(23);t.exports={Parser:s,ProcessingInstructions:r,IsValidNodeDefinitions:n,ProcessNodeDefinitions:a}},function(t,e){"use strict";t.exports={alwaysValid:function(){return!0}}},function(t,e,i){"use strict";var s=i(25),r=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","menuitem","textarea"];t.exports=function(){return{processDefaultNode:function(t,e,i){return"text"===t.type?t.data:"comment"!==t.type&&(r.indexOf(t.name)>-1?s.createElement(t,i):s.createElement(t,i,t.data,e))}}}},function(t,e,i){"use strict";var s=i(51),r=i(23);t.exports=function(){var t=new r;return{defaultProcessingInstructions:[{shouldProcessNode:s.shouldProcessEveryNode,processNode:t.processDefaultNode}]}}},function(t,e,i){"use strict";function s(t){for(var e,i,s,n=(t=t||"").split(/;(?!base64)/),a={},o=0;o<n.length;++o)(e=n[o].split(":")).length>2&&(e[1]=e.slice(1).join(":")),i=r(e[0]),s=e[1],i.length>0&&s.length>0&&(a[i]=s);return a}var r=i(99),n=i(86),a=i(84),o=i(15),l=i(49);t.exports={createElement:function(t,e,i,r){var u={key:e};t.attribs&&(u=a(function(t,e){var i=e[0],r=e[1];return"style"===(i=l[i.replace(/[-:]/,"")]||i)?r=s(r):"class"===i?i="className":"for"===i&&(i="htmlFor"),"string"==typeof r&&(r=r),t[i]=r||i,t},u,n(t.attribs))),r=r||[];var p=null!=i?[i].concat(r):r;return o.createElement.apply(null,[t.name,u].concat(p))}}},function(t,e,i){t.exports=i(61)()},function(t,e){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,i){var s=i(10),r=i(3),n=i(1),a=i(70);t.exports=n(function(t,e){return 1===t?r(e):s(t,a(t,[],e))})},function(t,e){t.exports=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){var s=i(3),r=i(12),n=i(72);t.exports=function(){var t=!{toString:null}.propertyIsEnumerable("toString"),e=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],i=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),a=function(t,e){for(var i=0;i<t.length;){if(t[i]===e)return!0;i+=1}return!1};return s("function"!=typeof Object.keys||i?function(s){if(Object(s)!==s)return[];var o,l,u=[],p=i&&n(s);for(o in s)!r(o,s)||p&&"length"===o||(u[u.length]=o);if(t)for(l=e.length-1;l>=0;)r(o=e[l],s)&&!a(u,o)&&(u[u.length]=o),l-=1;return u}:function(t){return Object(t)!==t?[]:Object.keys(t)})}()},function(t,e,i){"use strict";function s(t,e,i){this.props=t,this.context=e,this.refs=u,this.updater=i||l}function r(t,e,i){this.props=t,this.context=e,this.refs=u,this.updater=i||l}function n(){}var a=i(9),o=i(7),l=i(34),u=(i(35),i(20));i(2),i(96);s.prototype.isReactComponent={},s.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&a("85"),this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")};n.prototype=s.prototype,(r.prototype=new n).constructor=r,o(r.prototype,s.prototype),r.prototype.isPureReactComponent=!0,t.exports={Component:s,PureComponent:r}},function(t,e){"use strict";var i={current:null};t.exports=i},function(t,e){"use strict";var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=i},function(t,e,i){"use strict";function s(t,e){}i(6);var r={isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){s()},enqueueReplaceState:function(t,e){s()},enqueueSetState:function(t,e){s()}};t.exports=r},function(t,e,i){"use strict";var s=!1;t.exports=s},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=i(15),u=s(l),p=s(i(26)),h=i(18),c=new(0,i(21).Parser),f=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={bibliography:"",sys:{retrieveLocale:function(){return i.props.locale},retrieveItem:function(t){return i.props.items[t]}}},i.makeReactBibliography=function(t,e){t.updateItems(Object.keys(e));var i=t.makeBibliography()[1].join("\n");return c.parse(i)},i}return a(e,l.Component),o(e,[{key:"componentDidMount",value:function(){if(this.props.locale&&this.props.style){var t=new h.Engine(this.state.sys,this.props.style);this.setState({processor:t,bibliography:this.props.items&&this.makeReactBibliography(t,this.props.items)})}}},{key:"componentWillReceiveProps",value:function(t){if(!this.state.processor&&this.props.locale&&this.props.style){var e=new h.Engine(this.state.sys,t.style);this.setState({processor:e})}}},{key:"componentDidUpdate",value:function(t){var e=this;if((this.state.processor&&this.props.items!==t.items||!this.state.bibliography)&&this.setState({bibliography:this.makeReactBibliography(this.state.processor,this.props.items)}),this.props.locale!==t.locale){var i={retrieveLocale:function(){return e.props.locale},retrieveItem:function(t){return e.props.items[t]}},s=new h.Engine(i,this.props.style);this.setState({processor:s,bibliography:this.makeReactBibliography(s,this.props.items),sys:i})}if(this.props.style!==t.style){var r=new h.Engine(this.state.sys,this.props.style);this.setState({processor:r,bibliography:this.makeReactBibliography(r,this.props.items)})}}},{key:"render",value:function(){var t=this.props.componentClass,e=void 0===t?"Bibliography":t,i=this.state.bibliography;return i?u.default.createElement("section",{className:e},i):u.default.createElement("section",{className:e+" loading"},this.props.loadingContent||"loading")}}]),e}();f.propTypes={componentClass:p.default.string,style:p.default.string,locale:p.default.string,items:p.default.object},e.default=f},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),u=i(15),p=s(u),h=s(i(26)),c=i(18),f=new(0,i(21).Parser),m=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={bibliography:void 0,sys:{retrieveLocale:function(){return i.props.locale},retrieveItem:function(t){return i.props.items[t]}}},i.makeReactBibliography=function(t,e){t.updateItems(Object.keys(e));var i=t.makeBibliography()[1].join("\n");return f.parse(i)},i.makeReactCitations=function(t,e){return e.reduce(function(e,i){var s=o({},e),r=i[0],n=i[1],a=i[2],l=t.processCitationCluster(r,n,a);return(l=l[1]).forEach(function(t){var e=t[0],i=t[1],r=f.parse(t[1]),n=t[2];s[n]={order:e,html:i,Component:r}}),s},{})},i}return a(e,u.Component),l(e,[{key:"getChildContext",value:function(){return{bibliography:this.state.bibliography,citations:this.state.citations}}},{key:"componentDidMount",value:function(){if(this.props.locale&&this.props.style){var t=new c.Engine(this.state.sys,this.props.style);this.setState({processor:t,citations:this.props.citations&&this.props.citations.length?this.makeReactCitations(t,this.props.citations):void 0,bibliography:this.props.items&&this.props.items.length?this.makeReactBibliography(t,this.props.items):void 0})}}},{key:"componentWillReceiveProps",value:function(t){if(!this.state.processor&&this.props.locale&&this.props.style){var e=new c.Engine(this.state.sys,t.style);this.setState({processor:e})}}},{key:"componentDidUpdate",value:function(t){var e=this;if(this.props.items&&Object.keys(this.props.items).length){if((this.state.processor&&this.props.items!==t.items||this.props.citations!==t.citations||!this.state.bibliography)&&this.setState({citations:this.props.citations&&this.makeReactCitations(this.state.processor,this.props.citations),bibliography:this.makeReactBibliography(this.state.processor,this.props.items)}),this.props.locale!==t.locale){var i={retrieveLocale:function(){return e.props.locale},retrieveItem:function(t){return e.props.items[t]}},s=new c.Engine(i,this.props.style);this.setState({processor:s,citations:this.props.citations&&this.makeReactCitations(s,this.props.citations),bibliography:this.makeReactBibliography(s,this.props.items),sys:i})}if(this.props.style!==t.style){var r=new c.Engine(this.state.sys,this.props.style);this.setState({processor:r,citations:this.props.citations&&this.makeReactCitations(r,this.props.citations),bibliography:this.makeReactBibliography(r,this.props.items)})}}}},{key:"render",value:function(){var t=this.props,e=t.componentClass,i=t.children;return p.default.createElement("section",{className:e},i)}}]),e}();m.propTypes={componentClass:h.default.string,style:h.default.string,locale:h.default.string,items:h.default.object,citations:h.default.array},m.childContextTypes={bibliography:h.default.array,citations:h.default.object},e.default=m},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ReferencesManager=e.Bibliography=void 0;var r=s(i(36)),n=s(i(37));e.Bibliography=r.default,e.ReferencesManager=n.default},function(t,e,i){function s(t,e,i){return function(){var o=a.call(arguments),l=i.concat(o),u=[];return e<=n(l)?(u=r(o,i),t.apply(null,u)):e>=l.length?s(t,e,l):s(t,e,r(o,i))}}var r=i(42),n=i(40),a=Array.prototype.slice;t.exports=function(t){var e=a.call(arguments,1);return s(t,t.length,e)},t.exports.n=function(t,e){return s(t,e,a.call(arguments,2))},t.exports.__=void 0},function(t,e,i){var s=i(17);t.exports=function(t){var e=0;return s(t,function(t,i){void 0!==i&&(e+=1)}),e}},function(t,e,i){var s=i(17);t.exports=function(t,e){var i=[];return s(t,function(t,s){i.push(e(t,s))}),i}},function(t,e,i){var s=i(41);t.exports=function(t,e){return s(e,function(e,i){return void 0===i?t.shift():i}).concat(t)}},function(t,e,i){"use strict";function s(t){return t}var r=i(7),n=i(20),a=i(2),o="mixins";t.exports=function(t,e,i){function l(t,e){var i=b.hasOwnProperty(e)?b[e]:null;x.hasOwnProperty(e)&&a("OVERRIDE_BASE"===i,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&a("DEFINE_MANY"===i||"DEFINE_MANY_MERGED"===i,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function u(t,i){if(i){a("function"!=typeof i,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),a(!e(i),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var s=t.prototype,r=s.__reactAutoBindPairs;i.hasOwnProperty(o)&&_.mixins(t,i.mixins);for(var n in i)if(i.hasOwnProperty(n)&&n!==o){var u=i[n],p=s.hasOwnProperty(n);if(l(p,n),_.hasOwnProperty(n))_[n](t,u);else{var h=b.hasOwnProperty(n);if("function"!=typeof u||h||p||!1===i.autobind)if(p){var m=b[n];a(h&&("DEFINE_MANY_MERGED"===m||"DEFINE_MANY"===m),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,n),"DEFINE_MANY_MERGED"===m?s[n]=c(s[n],u):"DEFINE_MANY"===m&&(s[n]=f(s[n],u))}else s[n]=u;else r.push(n,u),s[n]=u}}}}function p(t,e){if(e)for(var i in e){var s=e[i];e.hasOwnProperty(i)&&(a(!(i in _),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',i),a(!(i in t),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",i),t[i]=s)}}function h(t,e){a(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var i in e)e.hasOwnProperty(i)&&(a(void 0===t[i],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",i),t[i]=e[i]);return t}function c(t,e){return function(){var i=t.apply(this,arguments),s=e.apply(this,arguments);if(null==i)return s;if(null==s)return i;var r={};return h(r,i),h(r,s),r}}function f(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function m(t,e){var i=e.bind(t);return i}function d(t){for(var e=t.__reactAutoBindPairs,i=0;i<e.length;i+=2){var s=e[i],r=e[i+1];t[s]=m(t,r)}}var g=[],b={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},_={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var i=0;i<e.length;i++)u(t,e[i])},childContextTypes:function(t,e){t.childContextTypes=r({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=r({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=c(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=r({},t.propTypes,e)},statics:function(t,e){p(t,e)},autobind:function(){}},v={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},S=function(){};return r(S.prototype,t.prototype,x),function(t){var e=s(function(t,s,r){this.__reactAutoBindPairs.length&&d(this),this.props=t,this.context=s,this.refs=n,this.updater=r||i,this.state=null;var o=this.getInitialState?this.getInitialState():null;a("object"==typeof o&&!Array.isArray(o),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=o});e.prototype=new S,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],g.forEach(u.bind(null,e)),u(e,v),u(e,t),u(e,y),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),a(e.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in b)e.prototype[r]||(e.prototype[r]=null);return e}}},function(t,e){t.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(t){return"tag"===t.type||"script"===t.type||"style"===t.type}}},function(t,e,i){function s(t,e,i){"object"==typeof t?(i=e,e=t,t=null):"function"==typeof e&&(i=e,e=l),this._callback=t,this._options=e||l,this._elementCB=i,this.dom=[],this._done=!1,this._tagStack=[],this._parser=this._parser||null}var r=i(44),n=/\s+/g,a=i(19),o=i(46),l={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1};s.prototype.onparserinit=function(t){this._parser=t},s.prototype.onreset=function(){s.call(this,this._callback,this._options,this._elementCB)},s.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))},s.prototype._handleCallback=s.prototype.onerror=function(t){if("function"==typeof this._callback)this._callback(t,this.dom);else if(t)throw t},s.prototype.onclosetag=function(){var t=this._tagStack.pop();this._options.withEndIndices&&(t.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(t)},s.prototype._createDomElement=function(t){if(!this._options.withDomLvl1)return t;var e;e="tag"===t.type?Object.create(o):Object.create(a);for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},s.prototype._addDomElement=function(t){var e=this._tagStack[this._tagStack.length-1],i=e?e.children:this.dom,s=i[i.length-1];t.next=null,this._options.withStartIndices&&(t.startIndex=this._parser.startIndex),this._options.withEndIndices&&(t.endIndex=this._parser.endIndex),s?(t.prev=s,s.next=t):t.prev=null,i.push(t),t.parent=e||null},s.prototype.onopentag=function(t,e){var i={type:"script"===t?r.Script:"style"===t?r.Style:r.Tag,name:t,attribs:e,children:[]},s=this._createDomElement(i);this._addDomElement(s),this._tagStack.push(s)},s.prototype.ontext=function(t){var e,i=this._options.normalizeWhitespace||this._options.ignoreWhitespace;if(!this._tagStack.length&&this.dom.length&&(e=this.dom[this.dom.length-1]).type===r.Text)i?e.data=(e.data+t).replace(n," "):e.data+=t;else if(this._tagStack.length&&(e=this._tagStack[this._tagStack.length-1])&&(e=e.children[e.children.length-1])&&e.type===r.Text)i?e.data=(e.data+t).replace(n," "):e.data+=t;else{i&&(t=t.replace(n," "));var s=this._createDomElement({data:t,type:r.Text});this._addDomElement(s)}},s.prototype.oncomment=function(t){var e=this._tagStack[this._tagStack.length-1];if(e&&e.type===r.Comment)e.data+=t;else{var i={data:t,type:r.Comment},s=this._createDomElement(i);this._addDomElement(s),this._tagStack.push(s)}},s.prototype.oncdatastart=function(){var t={children:[{data:"",type:r.Text}],type:r.CDATA},e=this._createDomElement(t);this._addDomElement(e),this._tagStack.push(e)},s.prototype.oncommentend=s.prototype.oncdataend=function(){this._tagStack.pop()},s.prototype.onprocessinginstruction=function(t,e){var i=this._createDomElement({name:t,data:e,type:r.Directive});this._addDomElement(i)},t.exports=s},function(t,e,i){var s=i(19),r=t.exports=Object.create(s),n={tagName:"name"};Object.keys(n).forEach(function(t){var e=n[t];Object.defineProperty(r,t,{get:function(){return this[e]||null},set:function(t){return this[e]=t,t}})})},function(t,e,i){var s=i(55);t.exports=function(t){if(t>=55296&&t<=57343||t>1114111)return"�";t in s&&(t=s[t]);var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t)}},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function r(t){return"number"==typeof t}function n(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,r,o,l,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var p=new Error('Uncaught, unspecified "error" event. ('+e+")");throw p.context=e,p}if(i=this._events[t],a(i))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(n(i))for(o=Array.prototype.slice.call(arguments,1),r=(u=i.slice()).length,l=0;l<r;l++)u[l].apply(this,o);return!0},i.prototype.addListener=function(t,e){var r;if(!s(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}if(!s(e))throw TypeError("listener must be a function");var r=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,r,a,o;if(!s(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],a=i.length,r=-1,i===e||s(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(i)){for(o=a;o-- >0;)if(i[o]===e||i[o].listener&&i[o].listener===e){r=o;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],s(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(s(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"use strict";var i=["autoCapitalize","autoCorrect","color","itemProp","itemScope","itemType","itemRef","itemID","security","unselectable","results","autoSave"],s=["accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baseProfile","baselineShift","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","ideographic","imageRendering","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","scale","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","viewBox","viewTarget","visibility","widths","wordSpacing","writingMode","x","x1","x2","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlns","xmlnsXlink","xmlBase","xmlLang","xmlSpace","y","y1","y2","yChannelSelector","z","zoomAndPan"],r=["accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","capture","cellPadding","cellSpacing","challenge","charSet","checked","cite","classID","className","colSpan","cols","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","encType","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","height","hidden","high","href","hrefLang","htmlFor","httpEquiv","icon","id","inputMode","integrity","is","keyParams","keyType","kind","label","lang","list","loop","low","manifest","marginHeight","marginWidth","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","nonce","open","optimum","pattern","placeholder","poster","preload","profile","radioGroup","readOnly","rel","required","reversed","role","rowSpan","rows","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","spellCheck","src","srcDoc","srcLang","srcSet","start","step","style","summary","tabIndex","target","title","type","useMap","value","width","wmode","wrap"].concat(i).concat(s).reduce(function(t,e){var i=e.toLowerCase();return i!==e&&(t[i]=e),t},{});t.exports=r},function(t,e,i){"use strict";var s=i(66),r=i(85),n=i(63),a=i(83),o=i(52),l=i(45),u=i(24),p=i(22),h=i(25);t.exports=function(t){function e(e){(t=t||{}).decodeEntities=!0;var i=new l;return new o(i,t).parseComplete(e),i.dom}function i(t,e,o,l){if(e(t)){var u=s(function(e){return e.shouldProcessNode(t)},o);if(null!=u){var p=r(function(t){return null==t||!1===t},n(a)(function(t,s){return i(t,e,o,s)},t.children||[]));return u.replaceChildren?h.createElement(t,l,t.data,[u.processNode(t,p,l)]):u.processNode(t,p,l)}return!1}return!1}function c(t,s,r){var n=e(t).map(function(t,e){return i(t,s,r,e)});return n.length<=1?n[0]:n}return{parse:function(t){var e=new u;return c(t,p.alwaysValid,e.defaultProcessingInstructions)},parseWithInstructions:c}}},function(t,e){"use strict";t.exports={shouldProcessEveryNode:function(t){return!0}}},function(t,e,i){function s(t,e){this._options=e||{},this._cbs=t||{},this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this.startIndex=0,this.endIndex=null,this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode,this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode,this._options.Tokenizer&&(r=this._options.Tokenizer),this._tokenizer=new r(this._options,this),this._cbs.onparserinit&&this._cbs.onparserinit(this)}var r=i(53),n={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0},a={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:n,input:n,output:n,button:n,datalist:n,textarea:n,option:{option:!0},optgroup:{optgroup:!0}},o={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,path:!0,circle:!0,ellipse:!0,line:!0,rect:!0,use:!0,stop:!0,polyline:!0,polygon:!0},l=/\s|\//;i(54)(s,i(48).EventEmitter),s.prototype._updatePosition=function(t){null===this.endIndex?this._tokenizer._sectionStart<=t?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-t:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},s.prototype.ontext=function(t){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(t)},s.prototype.onopentagname=function(t){if(this._lowerCaseTagNames&&(t=t.toLowerCase()),this._tagname=t,!this._options.xmlMode&&t in a)for(var e;(e=this._stack[this._stack.length-1])in a[t];this.onclosetag(e));!this._options.xmlMode&&t in o||this._stack.push(t),this._cbs.onopentagname&&this._cbs.onopentagname(t),this._cbs.onopentag&&(this._attribs={})},s.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in o&&this._cbs.onclosetag(this._tagname),this._tagname=""},s.prototype.onclosetag=function(t){if(this._updatePosition(1),this._lowerCaseTagNames&&(t=t.toLowerCase()),!this._stack.length||t in o&&!this._options.xmlMode)this._options.xmlMode||"br"!==t&&"p"!==t||(this.onopentagname(t),this._closeCurrentTag());else{var e=this._stack.lastIndexOf(t);if(-1!==e)if(this._cbs.onclosetag)for(e=this._stack.length-e;e--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=e;else"p"!==t||this._options.xmlMode||(this.onopentagname(t),this._closeCurrentTag())}},s.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing?this._closeCurrentTag():this.onopentagend()},s.prototype._closeCurrentTag=function(){var t=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===t&&(this._cbs.onclosetag&&this._cbs.onclosetag(t),this._stack.pop())},s.prototype.onattribname=function(t){this._lowerCaseAttributeNames&&(t=t.toLowerCase()),this._attribname=t},s.prototype.onattribdata=function(t){this._attribvalue+=t},s.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},s.prototype._getInstructionName=function(t){var e=t.search(l),i=e<0?t:t.substr(0,e);return this._lowerCaseTagNames&&(i=i.toLowerCase()),i},s.prototype.ondeclaration=function(t){if(this._cbs.onprocessinginstruction){var e=this._getInstructionName(t);this._cbs.onprocessinginstruction("!"+e,"!"+t)}},s.prototype.onprocessinginstruction=function(t){if(this._cbs.onprocessinginstruction){var e=this._getInstructionName(t);this._cbs.onprocessinginstruction("?"+e,"?"+t)}},s.prototype.oncomment=function(t){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(t),this._cbs.oncommentend&&this._cbs.oncommentend()},s.prototype.oncdata=function(t){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(t),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+t+"]]")},s.prototype.onerror=function(t){this._cbs.onerror&&this._cbs.onerror(t)},s.prototype.onend=function(){if(this._cbs.onclosetag)for(var t=this._stack.length;t>0;this._cbs.onclosetag(this._stack[--t]));this._cbs.onend&&this._cbs.onend()},s.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},s.prototype.parseComplete=function(t){this.reset(),this.end(t)},s.prototype.write=function(t){this._tokenizer.write(t)},s.prototype.end=function(t){this._tokenizer.end(t)},s.prototype.pause=function(){this._tokenizer.pause()},s.prototype.resume=function(){this._tokenizer.resume()},s.prototype.parseChunk=s.prototype.write,s.prototype.done=s.prototype.end,t.exports=s},function(t,e,i){function s(t){return" "===t||"\n"===t||"\t"===t||"\f"===t||"\r"===t}function r(t,e,i){var s=t.toLowerCase();return t===s?function(t){t===s?this._state=e:(this._state=i,this._index--)}:function(r){r===s||r===t?this._state=e:(this._state=i,this._index--)}}function n(t,e){var i=t.toLowerCase();return function(s){s===i||s===t?this._state=e:(this._state=m,this._index--)}}function a(t,e){this._state=c,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=c,this._special=mt,this._cbs=e,this._running=!0,this._ended=!1,this._xmlMode=!(!t||!t.xmlMode),this._decodeEntities=!(!t||!t.decodeEntities)}t.exports=a;var o=i(47),l=i(56),u=i(57),p=i(58),h=0,c=h++,f=h++,m=h++,d=h++,g=h++,b=h++,_=h++,v=h++,y=h++,x=h++,S=h++,E=h++,I=h++,A=h++,T=h++,O=h++,N=h++,k=h++,w=h++,R=h++,C=h++,L=h++,D=h++,P=h++,j=h++,q=h++,U=h++,B=h++,M=h++,V=h++,F=h++,X=h++,G=h++,z=h++,H=h++,$=h++,W=h++,Y=h++,Q=h++,K=h++,J=h++,Z=h++,tt=h++,et=h++,it=h++,st=h++,rt=h++,nt=h++,at=h++,ot=h++,lt=h++,ut=h++,pt=h++,ht=h++,ct=h++,ft=0,mt=ft++,dt=ft++,gt=ft++;a.prototype._stateText=function(t){"<"===t?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=f,this._sectionStart=this._index):this._decodeEntities&&this._special===mt&&"&"===t&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=c,this._state=lt,this._sectionStart=this._index)},a.prototype._stateBeforeTagName=function(t){"/"===t?this._state=g:"<"===t?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===t||this._special!==mt||s(t)?this._state=c:"!"===t?(this._state=T,this._sectionStart=this._index+1):"?"===t?(this._state=N,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==t&&"S"!==t?m:F,this._sectionStart=this._index)},a.prototype._stateInTagName=function(t){("/"===t||">"===t||s(t))&&(this._emitToken("onopentagname"),this._state=v,this._index--)},a.prototype._stateBeforeCloseingTagName=function(t){s(t)||(">"===t?this._state=c:this._special!==mt?"s"===t||"S"===t?this._state=X:(this._state=c,this._index--):(this._state=b,this._sectionStart=this._index))},a.prototype._stateInCloseingTagName=function(t){(">"===t||s(t))&&(this._emitToken("onclosetag"),this._state=_,this._index--)},a.prototype._stateAfterCloseingTagName=function(t){">"===t&&(this._state=c,this._sectionStart=this._index+1)},a.prototype._stateBeforeAttributeName=function(t){">"===t?(this._cbs.onopentagend(),this._state=c,this._sectionStart=this._index+1):"/"===t?this._state=d:s(t)||(this._state=y,this._sectionStart=this._index)},a.prototype._stateInSelfClosingTag=function(t){">"===t?(this._cbs.onselfclosingtag(),this._state=c,this._sectionStart=this._index+1):s(t)||(this._state=v,this._index--)},a.prototype._stateInAttributeName=function(t){("="===t||"/"===t||">"===t||s(t))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=x,this._index--)},a.prototype._stateAfterAttributeName=function(t){"="===t?this._state=S:"/"===t||">"===t?(this._cbs.onattribend(),this._state=v,this._index--):s(t)||(this._cbs.onattribend(),this._state=y,this._sectionStart=this._index)},a.prototype._stateBeforeAttributeValue=function(t){'"'===t?(this._state=E,this._sectionStart=this._index+1):"'"===t?(this._state=I,this._sectionStart=this._index+1):s(t)||(this._state=A,this._sectionStart=this._index,this._index--)},a.prototype._stateInAttributeValueDoubleQuotes=function(t){'"'===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=lt,this._sectionStart=this._index)},a.prototype._stateInAttributeValueSingleQuotes=function(t){"'"===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=lt,this._sectionStart=this._index)},a.prototype._stateInAttributeValueNoQuotes=function(t){s(t)||">"===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v,this._index--):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=lt,this._sectionStart=this._index)},a.prototype._stateBeforeDeclaration=function(t){this._state="["===t?L:"-"===t?k:O},a.prototype._stateInDeclaration=function(t){">"===t&&(this._cbs.ondeclaration(this._getSection()),this._state=c,this._sectionStart=this._index+1)},a.prototype._stateInProcessingInstruction=function(t){">"===t&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=c,this._sectionStart=this._index+1)},a.prototype._stateBeforeComment=function(t){"-"===t?(this._state=w,this._sectionStart=this._index+1):this._state=O},a.prototype._stateInComment=function(t){"-"===t&&(this._state=R)},a.prototype._stateAfterComment1=function(t){this._state="-"===t?C:w},a.prototype._stateAfterComment2=function(t){">"===t?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=c,this._sectionStart=this._index+1):"-"!==t&&(this._state=w)},a.prototype._stateBeforeCdata1=r("C",D,O),a.prototype._stateBeforeCdata2=r("D",P,O),a.prototype._stateBeforeCdata3=r("A",j,O),a.prototype._stateBeforeCdata4=r("T",q,O),a.prototype._stateBeforeCdata5=r("A",U,O),a.prototype._stateBeforeCdata6=function(t){"["===t?(this._state=B,this._sectionStart=this._index+1):(this._state=O,this._index--)},a.prototype._stateInCdata=function(t){"]"===t&&(this._state=M)},a.prototype._stateAfterCdata1=function(t,e){return function(i){i===t&&(this._state=e)}}("]",V),a.prototype._stateAfterCdata2=function(t){">"===t?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=c,this._sectionStart=this._index+1):"]"!==t&&(this._state=B)},a.prototype._stateBeforeSpecial=function(t){"c"===t||"C"===t?this._state=G:"t"===t||"T"===t?this._state=tt:(this._state=m,this._index--)},a.prototype._stateBeforeSpecialEnd=function(t){this._special!==dt||"c"!==t&&"C"!==t?this._special!==gt||"t"!==t&&"T"!==t?this._state=c:this._state=rt:this._state=Y},a.prototype._stateBeforeScript1=n("R",z),a.prototype._stateBeforeScript2=n("I",H),a.prototype._stateBeforeScript3=n("P",$),a.prototype._stateBeforeScript4=n("T",W),a.prototype._stateBeforeScript5=function(t){("/"===t||">"===t||s(t))&&(this._special=dt),this._state=m,this._index--},a.prototype._stateAfterScript1=r("R",Q,c),a.prototype._stateAfterScript2=r("I",K,c),a.prototype._stateAfterScript3=r("P",J,c),a.prototype._stateAfterScript4=r("T",Z,c),a.prototype._stateAfterScript5=function(t){">"===t||s(t)?(this._special=mt,this._state=b,this._sectionStart=this._index-6,this._index--):this._state=c},a.prototype._stateBeforeStyle1=n("Y",et),a.prototype._stateBeforeStyle2=n("L",it),a.prototype._stateBeforeStyle3=n("E",st),a.prototype._stateBeforeStyle4=function(t){("/"===t||">"===t||s(t))&&(this._special=gt),this._state=m,this._index--},a.prototype._stateAfterStyle1=r("Y",nt,c),a.prototype._stateAfterStyle2=r("L",at,c),a.prototype._stateAfterStyle3=r("E",ot,c),a.prototype._stateAfterStyle4=function(t){">"===t||s(t)?(this._special=mt,this._state=b,this._sectionStart=this._index-5,this._index--):this._state=c},a.prototype._stateBeforeEntity=r("#",ut,pt),a.prototype._stateBeforeNumericEntity=r("X",ct,ht),a.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var t=this._buffer.substring(this._sectionStart+1,this._index),e=this._xmlMode?p:l;e.hasOwnProperty(t)&&(this._emitPartial(e[t]),this._sectionStart=this._index+1)}},a.prototype._parseLegacyEntity=function(){var t=this._sectionStart+1,e=this._index-t;for(e>6&&(e=6);e>=2;){var i=this._buffer.substr(t,e);if(u.hasOwnProperty(i))return this._emitPartial(u[i]),void(this._sectionStart+=e+1);e--}},a.prototype._stateInNamedEntity=function(t){";"===t?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(t<"a"||t>"z")&&(t<"A"||t>"Z")&&(t<"0"||t>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(this._baseState!==c?"="!==t&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},a.prototype._decodeNumericEntity=function(t,e){var i=this._sectionStart+t;if(i!==this._index){var s=this._buffer.substring(i,this._index),r=parseInt(s,e);this._emitPartial(o(r)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},a.prototype._stateInNumericEntity=function(t){";"===t?(this._decodeNumericEntity(2,10),this._sectionStart++):(t<"0"||t>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},a.prototype._stateInHexEntity=function(t){";"===t?(this._decodeNumericEntity(3,16),this._sectionStart++):(t<"a"||t>"f")&&(t<"A"||t>"F")&&(t<"0"||t>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},a.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(this._state===c?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},a.prototype.write=function(t){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=t,this._parse()},a.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var t=this._buffer.charAt(this._index);this._state===c?this._stateText(t):this._state===f?this._stateBeforeTagName(t):this._state===m?this._stateInTagName(t):this._state===g?this._stateBeforeCloseingTagName(t):this._state===b?this._stateInCloseingTagName(t):this._state===_?this._stateAfterCloseingTagName(t):this._state===d?this._stateInSelfClosingTag(t):this._state===v?this._stateBeforeAttributeName(t):this._state===y?this._stateInAttributeName(t):this._state===x?this._stateAfterAttributeName(t):this._state===S?this._stateBeforeAttributeValue(t):this._state===E?this._stateInAttributeValueDoubleQuotes(t):this._state===I?this._stateInAttributeValueSingleQuotes(t):this._state===A?this._stateInAttributeValueNoQuotes(t):this._state===T?this._stateBeforeDeclaration(t):this._state===O?this._stateInDeclaration(t):this._state===N?this._stateInProcessingInstruction(t):this._state===k?this._stateBeforeComment(t):this._state===w?this._stateInComment(t):this._state===R?this._stateAfterComment1(t):this._state===C?this._stateAfterComment2(t):this._state===L?this._stateBeforeCdata1(t):this._state===D?this._stateBeforeCdata2(t):this._state===P?this._stateBeforeCdata3(t):this._state===j?this._stateBeforeCdata4(t):this._state===q?this._stateBeforeCdata5(t):this._state===U?this._stateBeforeCdata6(t):this._state===B?this._stateInCdata(t):this._state===M?this._stateAfterCdata1(t):this._state===V?this._stateAfterCdata2(t):this._state===F?this._stateBeforeSpecial(t):this._state===X?this._stateBeforeSpecialEnd(t):this._state===G?this._stateBeforeScript1(t):this._state===z?this._stateBeforeScript2(t):this._state===H?this._stateBeforeScript3(t):this._state===$?this._stateBeforeScript4(t):this._state===W?this._stateBeforeScript5(t):this._state===Y?this._stateAfterScript1(t):this._state===Q?this._stateAfterScript2(t):this._state===K?this._stateAfterScript3(t):this._state===J?this._stateAfterScript4(t):this._state===Z?this._stateAfterScript5(t):this._state===tt?this._stateBeforeStyle1(t):this._state===et?this._stateBeforeStyle2(t):this._state===it?this._stateBeforeStyle3(t):this._state===st?this._stateBeforeStyle4(t):this._state===rt?this._stateAfterStyle1(t):this._state===nt?this._stateAfterStyle2(t):this._state===at?this._stateAfterStyle3(t):this._state===ot?this._stateAfterStyle4(t):this._state===lt?this._stateBeforeEntity(t):this._state===ut?this._stateBeforeNumericEntity(t):this._state===pt?this._stateInNamedEntity(t):this._state===ht?this._stateInNumericEntity(t):this._state===ct?this._stateInHexEntity(t):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},a.prototype.pause=function(){this._running=!1},a.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},a.prototype.end=function(t){this._ended&&this._cbs.onerror(Error(".end() after done!")),t&&this.write(t),this._ended=!0,this._running&&this._finish()},a.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},a.prototype._handleTrailingData=function(){var t=this._buffer.substr(this._sectionStart);this._state===B||this._state===M||this._state===V?this._cbs.oncdata(t):this._state===w||this._state===R||this._state===C?this._cbs.oncomment(t):this._state!==pt||this._xmlMode?this._state!==ht||this._xmlMode?this._state!==ct||this._xmlMode?this._state!==m&&this._state!==v&&this._state!==S&&this._state!==x&&this._state!==y&&this._state!==I&&this._state!==E&&this._state!==A&&this._state!==b&&this._cbs.ontext(t):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},a.prototype.reset=function(){a.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)},a.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},a.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},a.prototype._emitToken=function(t){this._cbs[t](this._getSection()),this._sectionStart=-1},a.prototype._emitPartial=function(t){this._baseState!==c?this._cbs.onattribdata(t):this._cbs.ontext(t)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e){t.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},function(t,e){t.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},function(t,e){t.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}},function(t,e){t.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},function(t,e,i){"use strict";t.exports=function(t,e,i,s,r){}},function(t,e,i){"use strict";var s=i(62);t.exports=function(t){return s(t,!1)}},function(t,e,i){"use strict";var s=i(5),r=i(2),n=i(27);t.exports=function(){function t(t,e,i,s,a,o){o!==n&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e};return i.checkPropTypes=s,i.PropTypes=i,i}},function(t,e,i){"use strict";var s=i(5),r=i(2),n=i(6),a=i(27),o=i(59);t.exports=function(t,e){function i(t){var e=t&&(_&&t[_]||t[v]);if("function"==typeof e)return e}function l(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e}function u(t){this.message=t,this.stack=""}function p(t){function i(i,s,n,o,l,p,h){if(o=o||y,p=p||n,h!==a)if(e)r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==s[n]?i?new u(null===s[n]?"The "+l+" `"+p+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+l+" `"+p+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:t(s,n,o,l,p)}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}function h(t){return p(function(e,i,s,r,n,a){var o=e[i];return m(o)!==t?new u("Invalid "+r+" `"+n+"` of type `"+d(o)+"` supplied to `"+s+"`, expected `"+t+"`."):null})}function c(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(c);if(null===e||t(e))return!0;var s=i(e);if(!s)return!1;var r,n=s.call(e);if(s!==e.entries){for(;!(r=n.next()).done;)if(!c(r.value))return!1}else for(;!(r=n.next()).done;){var a=r.value;if(a&&!c(a[1]))return!1}return!0;default:return!1}}function f(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function m(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":f(e,t)?"symbol":e}function d(t){if(void 0===t||null===t)return""+t;var e=m(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function g(t){var e=d(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function b(t){return t.constructor&&t.constructor.name?t.constructor.name:y}var _="function"==typeof Symbol&&Symbol.iterator,v="@@iterator",y="<<anonymous>>",x={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),symbol:h("symbol"),any:p(s.thatReturnsNull),arrayOf:function(t){return p(function(e,i,s,r,n){if("function"!=typeof t)return new u("Property `"+n+"` of component `"+s+"` has invalid PropType notation inside arrayOf.");var o=e[i];if(!Array.isArray(o))return new u("Invalid "+r+" `"+n+"` of type `"+m(o)+"` supplied to `"+s+"`, expected an array.");for(var l=0;l<o.length;l++){var p=t(o,l,s,r,n+"["+l+"]",a);if(p instanceof Error)return p}return null})},element:function(){return p(function(e,i,s,r,n){var a=e[i];return t(a)?null:new u("Invalid "+r+" `"+n+"` of type `"+m(a)+"` supplied to `"+s+"`, expected a single ReactElement.")})}(),instanceOf:function(t){return p(function(e,i,s,r,n){if(!(e[i]instanceof t)){var a=t.name||y;return new u("Invalid "+r+" `"+n+"` of type `"+b(e[i])+"` supplied to `"+s+"`, expected instance of `"+a+"`.")}return null})},node:function(){return p(function(t,e,i,s,r){return c(t[e])?null:new u("Invalid "+s+" `"+r+"` supplied to `"+i+"`, expected a ReactNode.")})}(),objectOf:function(t){return p(function(e,i,s,r,n){if("function"!=typeof t)return new u("Property `"+n+"` of component `"+s+"` has invalid PropType notation inside objectOf.");var o=e[i],l=m(o);if("object"!==l)return new u("Invalid "+r+" `"+n+"` of type `"+l+"` supplied to `"+s+"`, expected an object.");for(var p in o)if(o.hasOwnProperty(p)){var h=t(o,p,s,r,n+"."+p,a);if(h instanceof Error)return h}return null})},oneOf:function(t){return Array.isArray(t)?p(function(e,i,s,r,n){for(var a=e[i],o=0;o<t.length;o++)if(l(a,t[o]))return null;return new u("Invalid "+r+" `"+n+"` of value `"+a+"` supplied to `"+s+"`, expected one of "+JSON.stringify(t)+".")}):s.thatReturnsNull},oneOfType:function(t){if(!Array.isArray(t))return s.thatReturnsNull;for(var e=0;e<t.length;e++){var i=t[e];if("function"!=typeof i)return n(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",g(i),e),s.thatReturnsNull}return p(function(e,i,s,r,n){for(var o=0;o<t.length;o++)if(null==(0,t[o])(e,i,s,r,n,a))return null;return new u("Invalid "+r+" `"+n+"` supplied to `"+s+"`.")})},shape:function(t){return p(function(e,i,s,r,n){var o=e[i],l=m(o);if("object"!==l)return new u("Invalid "+r+" `"+n+"` of type `"+l+"` supplied to `"+s+"`, expected `object`.");for(var p in t){var h=t[p];if(h){var c=h(o,p,s,r,n+"."+p,a);if(c)return c}}return null})}};return u.prototype=Error.prototype,x.checkPropTypes=o,x.PropTypes=x,x}},function(t,e,i){var s=i(68),r=i(3),n=i(28);t.exports=r(function(t){return n(t.length,function(){var e=0,i=arguments[0],r=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0);return n[0]=function(){var t=i.apply(this,s(arguments,[e,r]));return e+=1,t},t.apply(this,n)})})},function(t,e,i){var s=i(10),r=i(1);t.exports=r(function(t,e){return s(t.length,function(){return t.apply(e,arguments)})})},function(t,e,i){var s=i(1),r=i(11),n=i(71),a=i(74),o=i(13),l=i(79),u=i(30);t.exports=s(r(["filter"],l,function(t,e){return a(e)?o(function(i,s){return t(e[s])&&(i[s]=e[s]),i},{},u(e)):n(t,e)}))},function(t,e,i){var s=i(1),r=i(11),n=i(80);t.exports=s(r(["find"],n,function(t,e){for(var i=0,s=e.length;i<s;){if(t(e[i]))return e[i];i+=1}}))},function(t,e){t.exports=function(t){return function(){return!t.apply(this,arguments)}}},function(t,e){t.exports=function(t,e){t=t||[],e=e||[];var i,s=t.length,r=e.length,n=[];for(i=0;i<s;)n[n.length]=t[i],i+=1;for(i=0;i<r;)n[n.length]=e[i],i+=1;return n}},function(t,e,i){var s=i(3),r=i(1),n=i(8);t.exports=function(t){return function e(i,a,o){switch(arguments.length){case 0:return e;case 1:return n(i)?e:r(function(e,s){return t(i,e,s)});case 2:return n(i)&&n(a)?e:n(i)?r(function(e,i){return t(e,a,i)}):n(a)?r(function(e,s){return t(i,e,s)}):s(function(e){return t(i,a,e)});default:return n(i)&&n(a)&&n(o)?e:n(i)&&n(a)?r(function(e,i){return t(e,i,o)}):n(i)&&n(o)?r(function(e,i){return t(e,a,i)}):n(a)&&n(o)?r(function(e,s){return t(i,e,s)}):n(i)?s(function(e){return t(e,a,o)}):n(a)?s(function(e){return t(i,e,o)}):n(o)?s(function(e){return t(i,a,e)}):t(i,a,o)}}}},function(t,e,i){var s=i(10),r=i(8);t.exports=function t(e,i,n){return function(){for(var a=[],o=0,l=e,u=0;u<i.length||o<arguments.length;){var p;u<i.length&&(!r(i[u])||o>=arguments.length)?p=i[u]:(p=arguments[o],o+=1),a[u]=p,r(p)||(l-=1),u+=1}return l<=0?n.apply(this,a):s(l,t(e,a,n))}}},function(t,e){t.exports=function(t,e){for(var i=0,s=e.length,r=[];i<s;)t(e[i])&&(r[r.length]=e[i]),i+=1;return r}},function(t,e,i){var s=i(12);t.exports=function(){var t=Object.prototype.toString;return"[object Arguments]"===t.call(arguments)?function(e){return"[object Arguments]"===t.call(e)}:function(t){return s("callee",t)}}()},function(t,e,i){var s=i(3),r=i(29),n=i(75);t.exports=s(function(t){return!!r(t)||!!t&&("object"==typeof t&&(!n(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})},function(t,e){t.exports=function(t){return"[object Object]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){return"[object String]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){return"function"==typeof t["@@transducer/step"]}},function(t,e){t.exports=function(t,e){for(var i=0,s=e.length,r=Array(s);i<s;)r[i]=t(e[i]),i+=1;return r}},function(t,e){t.exports=function(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}},function(t,e,i){var s=i(1),r=i(14);t.exports=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=r.init,t.prototype["@@transducer/result"]=r.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},s(function(e,i){return new t(e,i)})}()},function(t,e,i){var s=i(1),r=i(78),n=i(14);t.exports=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=n.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=r(this.xf["@@transducer/step"](t,e))),t},s(function(e,i){return new t(e,i)})}()},function(t,e,i){var s=i(1),r=i(14);t.exports=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=r.init,t.prototype["@@transducer/result"]=r.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},s(function(e,i){return new t(e,i)})}()},function(t,e){t.exports=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},function(e){return new t(e)}}()},function(t,e,i){var s=i(1),r=i(11),n=i(77),a=i(13),o=i(81),l=i(28),u=i(30);t.exports=s(r(["fantasy-land/map","map"],o,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return l(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return a(function(i,s){return i[s]=t(e[s]),i},{},u(e));default:return n(t,e)}}))},function(t,e,i){var s=i(69),r=i(13);t.exports=s(r)},function(t,e,i){var s=i(67),r=i(1),n=i(65);t.exports=r(function(t,e){return n(s(t),e)})},function(t,e,i){var s=i(3),r=i(12);t.exports=s(function(t){var e=[];for(var i in t)r(i,t)&&(e[e.length]=[i,t[i]]);return e})},function(t,e){"use strict";var i={escape:function(t){var e=/[=:]/g,i={"=":"=0",":":"=2"};return"$"+(""+t).replace(e,function(t){return i[t]})},unescape:function(t){var e=/(=0|=2)/g,i={"=0":"=","=2":":"};return(""+("."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1))).replace(e,function(t){return i[t]})}};t.exports=i},function(t,e,i){"use strict";var s=i(9),r=(i(2),function(t){var e=this;if(e.instancePool.length){var i=e.instancePool.pop();return e.call(i,t),i}return new e(t)}),n=function(t){var e=this;t instanceof e||s("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},a=r,o={addPoolingTo:function(t,e){var i=t;return i.instancePool=[],i.getPooled=e||a,i.poolSize||(i.poolSize=10),i.release=n,i},oneArgumentPooler:r,twoArgumentPooler:function(t,e){var i=this;if(i.instancePool.length){var s=i.instancePool.pop();return i.call(s,t,e),s}return new i(t,e)},threeArgumentPooler:function(t,e,i){var s=this;if(s.instancePool.length){var r=s.instancePool.pop();return s.call(r,t,e,i),r}return new s(t,e,i)},fourArgumentPooler:function(t,e,i,s){var r=this;if(r.instancePool.length){var n=r.instancePool.pop();return r.call(n,t,e,i,s),n}return new r(t,e,i,s)}};t.exports=o},function(t,e,i){"use strict";var s=i(7),r=i(31),n=i(90),a=i(91),o=i(4),l=i(92),u=i(93),p=i(94),h=i(97),c=o.createElement,f=o.createFactory,m=o.cloneElement,d=s,g=function(t){return t},b={Children:{map:n.map,forEach:n.forEach,count:n.count,toArray:n.toArray,only:h},Component:r.Component,PureComponent:r.PureComponent,createElement:c,cloneElement:m,isValidElement:o.isValidElement,PropTypes:l,createClass:p,createFactory:f,createMixin:g,DOM:a,version:u,__spread:d};t.exports=b},function(t,e,i){"use strict";function s(t){return(""+t).replace(g,"$&/")}function r(t,e){this.func=t,this.context=e,this.count=0}function n(t,e,i){var s=t.func,r=t.context;s.call(r,e,t.count++)}function a(t,e,i,s){this.result=t,this.keyPrefix=e,this.func=i,this.context=s,this.count=0}function o(t,e,i){var r=t.result,n=t.keyPrefix,a=t.func,o=t.context,u=a.call(o,e,t.count++);Array.isArray(u)?l(u,r,i,c.thatReturnsArgument):null!=u&&(h.isValidElement(u)&&(u=h.cloneAndReplaceKey(u,n+(!u.key||e&&e.key===u.key?"":s(u.key)+"/")+i)),r.push(u))}function l(t,e,i,r,n){var l="";null!=i&&(l=s(i)+"/");var u=a.getPooled(e,l,r,n);f(t,o,u),a.release(u)}function u(t,e,i){return null}var p=i(88),h=i(4),c=i(5),f=i(98),m=p.twoArgumentPooler,d=p.fourArgumentPooler,g=/\/+/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},p.addPoolingTo(r,m),a.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},p.addPoolingTo(a,d);var b={forEach:function(t,e,i){if(null==t)return t;var s=r.getPooled(e,i);f(t,n,s),r.release(s)},map:function(t,e,i){if(null==t)return t;var s=[];return l(t,s,null,e,i),s},mapIntoWithKeyPrefixInternal:l,count:function(t,e){return f(t,u,null)},toArray:function(t){var e=[];return l(t,e,null,c.thatReturnsArgument),e}};t.exports=b},function(t,e,i){"use strict";var s=i(4).createFactory,r={a:s("a"),abbr:s("abbr"),address:s("address"),area:s("area"),article:s("article"),aside:s("aside"),audio:s("audio"),b:s("b"),base:s("base"),bdi:s("bdi"),bdo:s("bdo"),big:s("big"),blockquote:s("blockquote"),body:s("body"),br:s("br"),button:s("button"),canvas:s("canvas"),caption:s("caption"),cite:s("cite"),code:s("code"),col:s("col"),colgroup:s("colgroup"),data:s("data"),datalist:s("datalist"),dd:s("dd"),del:s("del"),details:s("details"),dfn:s("dfn"),dialog:s("dialog"),div:s("div"),dl:s("dl"),dt:s("dt"),em:s("em"),embed:s("embed"),fieldset:s("fieldset"),figcaption:s("figcaption"),figure:s("figure"),footer:s("footer"),form:s("form"),h1:s("h1"),h2:s("h2"),h3:s("h3"),h4:s("h4"),h5:s("h5"),h6:s("h6"),head:s("head"),header:s("header"),hgroup:s("hgroup"),hr:s("hr"),html:s("html"),i:s("i"),iframe:s("iframe"),img:s("img"),input:s("input"),ins:s("ins"),kbd:s("kbd"),keygen:s("keygen"),label:s("label"),legend:s("legend"),li:s("li"),link:s("link"),main:s("main"),map:s("map"),mark:s("mark"),menu:s("menu"),menuitem:s("menuitem"),meta:s("meta"),meter:s("meter"),nav:s("nav"),noscript:s("noscript"),object:s("object"),ol:s("ol"),optgroup:s("optgroup"),option:s("option"),output:s("output"),p:s("p"),param:s("param"),picture:s("picture"),pre:s("pre"),progress:s("progress"),q:s("q"),rp:s("rp"),rt:s("rt"),ruby:s("ruby"),s:s("s"),samp:s("samp"),script:s("script"),section:s("section"),select:s("select"),small:s("small"),source:s("source"),span:s("span"),strong:s("strong"),style:s("style"),sub:s("sub"),summary:s("summary"),sup:s("sup"),table:s("table"),tbody:s("tbody"),td:s("td"),textarea:s("textarea"),tfoot:s("tfoot"),th:s("th"),thead:s("thead"),time:s("time"),title:s("title"),tr:s("tr"),track:s("track"),u:s("u"),ul:s("ul"),var:s("var"),video:s("video"),wbr:s("wbr"),circle:s("circle"),clipPath:s("clipPath"),defs:s("defs"),ellipse:s("ellipse"),g:s("g"),image:s("image"),line:s("line"),linearGradient:s("linearGradient"),mask:s("mask"),path:s("path"),pattern:s("pattern"),polygon:s("polygon"),polyline:s("polyline"),radialGradient:s("radialGradient"),rect:s("rect"),stop:s("stop"),svg:s("svg"),text:s("text"),tspan:s("tspan")};t.exports=r},function(t,e,i){"use strict";var s=i(4).isValidElement,r=i(60);t.exports=r(s)},function(t,e){"use strict";t.exports="15.6.1"},function(t,e,i){"use strict";var s=i(31).Component,r=i(4).isValidElement,n=i(34),a=i(43);t.exports=a(s,r,n)},function(t,e){"use strict";var i="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";t.exports=function(t){var e=t&&(i&&t[i]||t[s]);if("function"==typeof e)return e}},function(t,e,i){"use strict";var s=function(){};t.exports=s},function(t,e,i){"use strict";var s=i(9),r=i(4);i(2);t.exports=function(t){return r.isValidElement(t)||s("143"),t}},function(t,e,i){"use strict";function s(t,e){return t&&"object"==typeof t&&null!=t.key?l.escape(t.key):e.toString(36)}function r(t,e,i,h){var c=typeof t;if("undefined"!==c&&"boolean"!==c||(t=null),null===t||"string"===c||"number"===c||"object"===c&&t.$$typeof===a)return i(h,t,""===e?u+s(t,0):e),1;var f,m=0,d=""===e?u:e+p;if(Array.isArray(t))for(var g=0;g<t.length;g++)m+=r(f=t[g],d+s(f,g),i,h);else{var b=o(t);if(b){var _,v=b.call(t);if(b!==t.entries)for(var y=0;!(_=v.next()).done;)m+=r(f=_.value,d+s(f,y++),i,h);else for(;!(_=v.next()).done;){var x=_.value;x&&(m+=r(f=x[1],d+l.escape(x[0])+p+s(f,0),i,h))}}else if("object"===c){var S="",E=String(t);n("31","[object Object]"===E?"object with keys {"+Object.keys(t).join(", ")+"}":E,S)}}return m}var n=i(9),a=(i(32),i(33)),o=i(95),l=(i(2),i(87)),u=(i(6),"."),p=":";t.exports=function(t,e,i){return null==t?0:r(t,"",e,i)}},function(t,e,i){var s=i(100),r=i(39);t.exports=r(function(t){return s(t,!0)})},function(t,e,i){var s=i(104),r=i(101);t.exports=function(t,e){return t=s(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""}),!0===e?r(t):t}},function(t,e,i){var s=i(16);t.exports=function(t){return(t=s(t)).charAt(0).toLowerCase()+t.slice(1)}},function(t,e,i){var s=i(103);t.exports=function(t){return null==t?"\\s":t.source?t.source:"["+s(t)+"]"}},function(t,e,i){var s=i(16);t.exports=function(t){return s(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},function(t,e,i){var s=i(16),r=i(102),n=String.prototype.trim;t.exports=function(t,e){return t=s(t),!e&&n?n.call(t):(e=r(e),t.replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}]);
//# sourceMappingURL=bundle.js.map